Қайырлы күн, құрметті студенттер! Келесі зертханалық жұмысқа шолу сессиясында көргеніме қуаныштымын. Бүгінгі зертханалық жұмыстың тақырыбы - VPC Peering Connection құру. Ендеше, бастайық. Зертханалық жұмысты AWS Academy курсының негізгі парақшасынан бастаймыз. Сол жақтағы шарлау мәзірін пайдаланып, Modules бөліміне өту керек. Бізді жетінші модуль – Connecting Networks қызықтырады. Мұнда белсенділіктер тізімінде Guided Lab - Creating a VPC Peering Connection бөлімін көре аласыз. Зертханалық жұмыстың негізгі парақшасына өткеннен кейін, README терезесін қалдырып, Terminal терезесін жабуға болады. Бүгін зертханалық жұмыстың аясында біз VPC Peering Connection құруды үйренеміз. Көбінесе біз бірнеше VPC арасында деректер алмасу тапсырмасына тап боламыз. Peering connection екі VPC-ді тікелей қосуға және деректер алмасуды баптауға мүмкіндік береді. Осы зертханалық жұмыстың аясында VPC Peering connection жасаймыз және VPC-лерімізде route tables баптаймыз. Зертханалық жұмыстың соңында біз келесі диаграмманы аламыз. Қолданба жұмыс істейтін Lab VPC бар екенін және public subnet-те орналасқан инстанстан Shared VPC-ге, атап айтқанда дерекқор орналасқан private subnet-ке өту керек екенін көре аласыз. Қолданба дұрыс жұмыс істеуі үшін осы дерекқордан кейбір деректерді жүктеп алып, оны пайдаланушыларға жіберу керек. Бұл зертханалық жұмысты орындауға шамамен 20 минут уақыт бөлу ұсынылады. Еске сала кетейік, зертханалық жұмысты орындау уақытыңызды ұзарта аласыз және бұл сіздің бағаңызға әсер етпейді. Ол үшін End lab батырмасын баспай-ақ, Start lab батырмасын басыңыз, есептегіш қайтадан санай бастайды. Сондай-ақ, біз уақытша жасалған AWS аккаунтында жұмыс істеп жатқанымызды және бұл құмсалғыш болғандықтан, онда барлық AWS сервистері қолжетімді емес, бірақ зертханалық жұмыстың аясында жұмыс істеуі керек сервистер мен функциялардың қолжетімді болуына кепілдік берілгенін еске саламын. Зертханалық жұмысты бастау үшін, ең алдымен, Start lab батырмасын басып, құмсалғыш, уақытша AWS аккаунтының дайын болуын күту керек. Енді AWS Management Console-іне өтіп, зертханалық жұмысымызды орындау үшін AWS батырмасын басамыз. Біз бірінші тапсырманы бастаймыз және осы жерде Peering connection жасаймыз. Peering Connection не екенін дәрісте өткенбіз. Мұнда біз әртүрлі аймақтарда, сондай-ақ әртүрлі аккаунттарда орналасқан VPC-лерді қоса алатынымызды қосымша еске салғым келеді. Зертханалық жұмыстың аясында біз Lab VPC және Shared VPC-мен жұмыс істейтін боламыз. Сондай-ақ, Lab VPC ішінде EC2 инстансы бар және ол Shared VPC арқылы дерекқорға қосылады. Мұнда сіз барлығы қазіргі уақытта қалай бапталғанының диаграммасын көре аласыз. Peering connection жасау үшін AWS Management Console-де сервисті іздеу жолағын пайдалану керек немесе сервистер тізімінен VPC табу керек. Әрі қарай, VPC негізгі парақшасында сол жақтағы шарлау мәзірін пайдаланып, Peering connection опциясын таңдау керек. Сіз оны ашқан кезде, Peering connection болмауы мүмкін, біз жаңасын жасауымыз керек. Жоғарғы оң жақта Create Peering Connection батырмасы болады, біз кіріс деректерін енгізу парақшасына қайта бағытталамыз және бұл жерде біз Peering Connection Name tag ретінде Lab-Peer, VPC Requester ретінде, яғни Peering connection қай VPC-ді сұрайды, LabVPC, және VPC Accepter ретінде Shared VPC көрсетеміз. Егер біздің жағдайда, мысалы, Shared VPC басқа аймақта немесе басқа AWS аккаунтында орналасқан болса, онда бірінші жағдайда сәйкес аймаққа ауысып, VPC сервисіне өту керек, ал басқа аккаунтында орналасқан болса, басқа аккаунт арқылы қайта қосылу қажет болады және тиісінше, ол жерден қабылдануы қажет шақыруды табасыз. Жарайды, бұл парақшада параметрлерді енгізіп болдық, енді Create Peering Connection батырмасын басуымыз керек. Біздің жағдайда, зертханалық жұмыстың аясында барлығы жеңілдетілген және екі VPC бір аймақта бір аккаунтта орналасқан, сондықтан тізімнен Lab-Peer таңдап, содан кейін жоғарғы оң жақтағы Actions батырмасын басып, ашылмалы мәзірден Accept Request опциясын таңдап, шақыруды қабылдайтынымызды растаңыз. VPC Peering Connection ресурсы сәтті жасалып, екі VPC қосылды. Бірақ бұл жеткіліксіз екенін ескеріңіз. Екінші қадам - VPC ішінде трафикті қайда бағыттау керектігін түсінетіндей route tables баптау. Енді біз зертханалық жұмысымыздың екінші бөліміне көшеміз және мұнда route tables баптаймыз. Бұл слайдта сіз екі VPC-де route table-дің бапталған соңғы күйін көресіз. Олардың әрқайсысына тоқталайық. Біріншісі, сол жақта, Lab VPC, ол жалпыға қолжетімді, Интернетке кіру мүмкіндігі бар, сондықтан үшінші ретінде бізде Интернет және Target ретінде - Internet gateway бар. Біріншісі ретінде әдепкі route бар, осы VPC CIDR блогы көрсетілген және Target - local, яғни бұл осы VPC ішіндегі ресурстардың бір-бірімен байланысуына мүмкіндік беретін route. Енді мұнда қосымша route қосуымыз керек, Destination ретінде Shared VPC көрсетілген, яғни Shared VPC CIDR блогы және Target ретінде Peering Connection ID көресіз. Осылайша, егер Shared VPC CIDR блогында кез келген IP мекенжайына бағытталған трафик болса, ол бұл трафикті Peering Connection-ге жібереді, ал ол, сәйкесінше, бұл трафикті одан әрі Shared VPC-ге жібереді. Енді оң жақта Shared VPC Route Table-ге қарасақ, онда алдымен әдепкі route көреміз, Destination ретінде осы VPC CIDR блогы және Target ретінде local көреміз. Бұл VPC-дегі ресурстар бір-бірімен байланыса алуы үшін керек екенін еске саламын. Мұнда қосымша route қосу керек, Destination ретінде Lab VPC CIDR блогы болады, ал Target – Peering Connection ID болады. Екі route table бапталған кезде біз барлық қажетті қадамдарды орындап боламыз және деректер алмасу мүмкін болады. Ол үшін сол жақтағы шарлау мәзірін пайдаланып, Route Tables пунктін таңдау керек. Онда біз құрылған route tables көреміз, Lab public route table таңдауымыз керек. Парақшаның төменгі жағында бірнеше қойындылар пайда болады. Бізді Routes қойындысы қызықтырады. Біз Интернетке кіру үшін route пен әдепкі route бар екенін көреміз. Енді Edit routes батырмасын басып, өңдеуге арналған routes тізімін ашуымыз керек. Бұл парақшада Add route батырмасын басу керек. Destination ретінде Shared VPC CIDR блогын көрсетеміз және Target ретінде Peering Connection көрсетеміз. Осыдан кейін өзгертулерді сақтау керек, route tables тізімінен келесі route table таңдау керек - бұл Shared VPC route table. Мұнда біз бірдей өзгерістерді енгізуіміз керек, яғни қойындылардағы Routes қойындысын таңдап, Edit routes батырмасын басыңыз. Осы routes бар ашылатын парақшада Add route батырмасын басу керек, содан кейін Destination ретінде Lab VPC CIDR блогын көрсетеміз және Target ретінде Peering Connection көрсетеміз, содан кейін өзгертулерді сақтаймыз. Енді зертханалық жұмыстың соңғы тапсырмасына көшеміз. Біз AWS аккаунтына енгізілген барлық өзгерістерді тексеруіміз керек. Ол үшін сервистерді іздеу жолағына EC2 деп енгізуді бастау керек немесе оны сервистер тізімінен тауып, оған өту керек. Біз EC2 сервисінің негізгі парақшасына өткеннен кейін, сол жақтағы шарлау мәзірін пайдаланып, Instances пунктін таңдауымыз керек. Ол жақта бір инстанс болады, осы инстанстың метадеректерінен жалпы IP мекенжайын көшіру керек. Содан кейін браузерде жаңа қойындыны ашып, осы мәнді енгізу керек. Қолданба ашылады және сіз қолданбаның жұмыс істей бастауы үшін дерекқор параметрлерін баптау керектігі туралы келесі хабарламаны көресіз. Келесі қадамдарды орындайық. Қолданба парақшасында Settings қойындысына өтуіңіз керек. Мұнда барлық өрістерді толтыруыңыз керек. Endpoint ретінде дерекқордың Endpoint көрсету керек. Оны екі жолмен жасай аламыз. Бірінші опция – RDS сервисіне өту, содан кейін Instance RDS табу және осы инстанстың мәліметтерінен Endpoint мәнін табу, оны көшіріп, осы өріске қою. Екінші нұсқа жеңілдетілген. Зертханалық жұмыстың негізгі парақшасына оралуымыз керек. Мұнда Details батырмасын басыңыз. Әрі қарай, AWS жанында Show батырмасы болады. Оны басқаннан кейін ақпарат көрсетіледі, соның ішінде Endpoint. Бұл мәнді көшіріп, оны қолданбадағы өріске қою керек. Әрі қарай, Database ретінде inventory, Username ретінде admin және Password ретінде lab-password көрсетеміз. Содан кейін Save батырмасын басыңыз. Save батырмасын басқаннан кейін, сіз басқа парақшаға бағытталасыз және дерекқордан жазбаларды көресіз. Егер сіз мұны көрсеңіз, бұл барлық өзгерістерді дұрыс жасағанымызды білдіреді. Peering connection сәтті бапталды. Shared VPC жағында Интернетке кіру мүмкіндігі жоқ және дерекқордағы деректерге қол жеткізудің жалғыз мүмкіндігі VPC Peering connection арқылы ғана екенін еске саламын. Жақсы. Осымен біз зертханалық жұмыстың негізгі бөлігін аяқтадық. Енді зертханалық жұмыстың негізгі парақшасындағы Submit батырмасын басу керек. Автоматты бағалау скрипті іске қосылады және сіз өз бағаларыңызды көресіз. Егер сіз максималды балл алсаңыз, онда жақсы, құттықтаймыз, барлық тапсырмалар дұрыс орындалды. Егер ұпай максимум болмаса, ұпай жетіспейтін тапсырманы қайтадан орындауыңызға болады. Сондай-ақ, барлық жүйелерден дұрыс шығу керек екенін ескеріңіз. Ең алдымен, бұл AWS Management Console-іне қатысты. Әрі қарай, келесі зертханалық жұмысты ашуда болашақта ешқандай қиындықтар туындамас үшін зертханалық жұмысты аяқтау керек. Осымен зертханалық жұмысқа шолу сессиясы аяқталады. Назарларыңызға рахмет. Келесі белсенділіктерде кездескенше.