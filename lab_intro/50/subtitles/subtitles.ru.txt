Добрый день, уважаемые студенты! Рад вас видеть на очередной сессии «Введение в лабораторную работу».
Тема лабораторной работы – это создание статического веб-сайта для нашего бизнес-кейса, а именно кафе.
Итак, давайте начнем.
Начинаем мы с вами лабораторную работу с основной страницы курса Cloud Architecting в AWS Academy.
Здесь нам необходимо воспользоваться навигационным меню слева и перейти во вкладку Modules.
Как только мы это сделаем, необходимо спозиционироваться на третьем модуле, а именно Adding a Storage Layer.
Если вы раскроете список активностей, то в самом конце вы увидите модуль 3 «Challenge Lab – Creating a static website for the cafe».
Давайте на него нажмем, чтобы перейти на основную страницу лабораторной работы.
Здесь рекомендуется отключить окно Terminal, необходимо убрать галочку, и окно README будет отображено на всю страницу.
Согласно сценарию, у нас есть основные герои – это Франк и Марта.
Они муж с женой, пенсионеры.
У них была давняя мечта создать небольшой бизнес – кафе с пекарней, на котором они сами работают, сами пекут хлебную продукцию.
Также им в этом помогает дочка София, которая учится в университете, и работник Нихил, который работает на полставки и также учится в университете.
На текущий момент определенной маркетинговой стратегии у главных героев нет, поэтому про это заведение знают только знакомые, друзья, родственники, а также жители этого района.
Поэтому София предлагает родителям - Франку и Марте потратить некоторое время на разработку веб-сайта.
В веб-сайте они могли бы расположить меню, график работы, адрес заведения и другую полезную информацию для того, чтобы новые посетители могли находить их любимое заведение.
В этой лабораторной работе мы поможем Софии создать веб-сайт так, чтобы оно хостилось на облаке AWS.
В рамках лабораторной работы мы будем выполнять четыре задания.
Первое задание - это настроить хостинг нашего статического веб-сайта в сервисе Amazon S3.
Второе - необходимо обеспечить безопасность наших данных.
Третье - необходимо настроить Data Lifecycle Strategy для того, чтобы хранить наши данные оптимально в S3 бакете.
И самое последнее - необходимо настроить Disaster Recovery Strategy (DR), что означает наша архитектура готова к проблемам в целом регионе AWS.
В случае возникновения подобных ситуаций мы не потеряем наши данные.
Вы видите на слайде архитектуру, которая будет по завершению нашей лабораторной работы.
Всего задействовано один сервис - это Amazon S3.
Задействовано два региона.
Первый регион - это основной, на котором будет хоститься наш веб-сайт.
На бакет во втором регионе будет реплицироваться весь контент, который будет добавляться на основной S3 бакет.
Также напоминаю, что это Challenge Lab и это означает, что деталей по выполнению простейших действий не будет предоставлено, дается общее описание задач, которые необходимо выполнить.
Далее используя знания, полученные на лекционных занятиях, а также на предыдущей лабораторной работе, мы должны выполнить это задание.
Всего рекомендуется завершить эту лабораторную работу в течении 60 минут.
Я вам напоминаю, что если вам нужно больше времени, вы не завершая лабораторную работу, можете нажать на кнопку Start Lab и счетчик вернется в изначальное состояние.
Обнуление счетчика не влияет на вашу оценку, поэтому периодически поглядывайте на оставшееся время и при необходимости ее увеличивайте.
В рамках выполнения этой лабораторной работы мы будем использовать специально временно созданный AWS Account.
На нем будут определенные ограничения на сервисы AWS, но на сервисы, на тот функционал, задействованный в лабораторной работе, у нас гарантированно будет необходимый доступ.
Для выполнения лабораторной работы нам необходимо добраться до AWS Management Console.
Для того чтобы это сделать, нам необходимо нажать на кнопку Start Lab.
Как только нажмете, начнется процесс создания временного AWS Account, выйдет сообщение.
Как только в всплывающем окне увидите текст Lab Status: Ready, вы можете закрывать это окно.
Далее необходимо нажать на кнопку AWS, чтобы перейти на временно созданный AWS Account.
Мы начинаем самое первое задание.
Первым делом нам необходимо перейти по ссылке в тексте задания лабораторной работы и скачать .zip архив.
В этом архиве содержится все необходимое содержание нашего статического веб-сайта, а именно есть файл index.html.
Есть две папки, первая - это CSS стили, а также папка с картинками.
Как только мы ее скачали, разархивировали и подготовили к загрузке, нам необходимо вернуться в AWS Management Console и создать S3 Bucket.
Этот S3 Bucket должен хранить данные в регионе North Virginia.
Как подсказка нам говорится о том, что необходимо отключить Block All Public Access опцию, также активировать static website hosting и index.html использовать как основной документ.
Как только мы создали S3 Bucket необходимо загрузить все наши файлы в S3 Bucket.
Мы это неоднократно проделывали, поэтому здесь проблем возникнуть не должно.
Как только все это проделали, давайте попробуем открыть наш веб-сайт и что же вы увидите.
Во время выполнения Challenge Lab нам необходимо ответить на некоторые тестовые вопросы.
Для того, чтобы до них добраться необходимо нажать на кнопку Details и в выпадающем меню нажать на кнопку Show.
После чего выбрать Access the multiple choice questions, нажатием которой откроется отдельная вкладка в браузере и вы увидите все вопросы в рамках этой лабораторной работы.
Сейчас нам необходимо ответить на первый вопрос, который звучит следующим образом.
Как только вы завершили задачу 3, смогли ли вы увидеть ваш веб-сайт в браузере? Необходимо отметить, отправить запрос на сохранение вашего ответа.
Рекомендуется не закрывать эту страницу с вопросами, так как мы к ней еще вернемся.
Дальше мы переходим к четвертому заданию.
Здесь нам необходимо выдать публичный доступ к содержанию нашего S3 Bucket.
Франк попросил Софию обновить некоторые детали в веб-сайте, после чего София поняла, что эти действия необходимо производить постоянно.
Более того необходимо вручную после загрузки обновлять Access Control Lists для каждого из этих объектов.
Ей не хотелось проделывать эти действия постоянно, поэтому она решила создать Bucket Policy, которая открывает публичный доступ ко всем объектам, которые попадают на этот S3 Bucket.
Таким образом, нам необходимо добавить Bucket Policy в наш S3 Bucket, который предоставляет публичный доступ к чтению ко всем пользователям интернета.
Если возникли проблемы в этом месте с написанием этого Policy, вы можете перейти на AWS Documentation и посмотреть, как же правильно ее написать.
После того, как написали и сохранили, необходимо проверить, что ваш веб-сайт публично доступен.
Если вы видите основную страницу вашего веб-сайта, мои поздравления, вы все действия сделали правильно.
На этом мы завершаем первую часть и переходим ко второй части нашей лабораторной работы.
Во второй части нам необходимо защитить наши данные в веб-сайте.
Как только София успешно создала вместе с нами веб-сайт, возник следующий момент.
Оливия, которая является AWS Solutions Architect и постоянно посещает кафе, посоветовала имплементировать некоторые дополнительные опции для того, чтобы обезопасить веб-сайт.
Для того, чтобы обезопасить наш веб-сайт от случайного удаления ее элементов либо перезаписи, нам рекомендуется использовать функционал versioning.
Первым делом нам необходимо его активировать.
Далее, как только мы его активируем, нам необходимо протестировать, действительно ли он работает.
Для того, чтобы это проверить, нам необходимо локально открыть любой текстовый редактор и там открыть index.html файл.
Мы будем вносить некоторые изменения.
Первое изменение - необходимо найти вхождение bgcolor="aquamarine" и заменить его следующим значением bgcolor="gainsboro".
Далее, найти вхождение bgcolor="orange" и заменить его на bgcolor="cornsilk".
Третье изменение - необходимо найти второе вхождение bgcolor="aquamarine" и заменить ее на bgcolor="gainsboro".
Сохранить изменения, загрузить на S3 bucket и обновить страницу нашего веб-сайта.
Вы увидите, что у нас произошли некоторые изменения.
Теперь необходимо проверить, что у нас несколько версий для index.html и при необходимости мы можем с легкостью вернуться на предыдущую версию.
Если это действительно так, то отлично, мы успешно активировали versioning для S3 bucket и можем двигаться дальше.
Следующим шагом нам необходимо открыть страницу с вопросами и ответить на вопрос номер 2.
Текст вопроса звучит следующим образом.
Выберите еще один возможный вариант предоставления дополнительной безопасности и исключения возможности случайного удаления объекта в вашем S3 bucket.
Если вы затрудняетесь ответить, то рекомендуется перейти по ссылке и ознакомиться с документацией.
Двигаемся дальше.
Есть небольшая секция с best practice, в которой говорится о наличии достаточного количества функционала, в том числе для сервиса Amazon S3, которая позволяет нам защитить наши данные и сохранить наш бизнес.
У нас есть вариант включить versioning.
Он нам помогает с легкостью восстанавливать предыдущие версии объектов в S3 bucket, также защищает нас от случайного удаления.
Далее, есть опция шифрования, которая позволяет нам защищаться от неавторизованного доступа к нашим данным.
Мы двигаемся к третьей части нашей лабораторной работы.
Здесь необходимо предпринять меры для снижения расходов на сервис Amazon S3.
Рекомендуется использовать lifecycle policy для того, чтобы редко используемые объекты переносить на другой класс хранения и через какое-то время полностью удалять.
Если говорить подробнее, то нужно создать в S3 bucket lifecycle configuration секции два рула.
Первый рул будет переносить все предыдущие версии объектов в класс хранения Standard Infrequent Access после 30 дней.
Далее необходимо создать второй рул, который будет предыдущие версии объектов удалять после 365 дней.
Я надеюсь, у вас получилось создать необходимые рулы.
Если не получилось, вы можете обратиться к документации.
Также нам говорится о том, что согласно Well-Architected Framework нам необходимо настраивать lifecycle strategy.
Это очень важно, так как мы должны управлять жизненным циклом наших данных, в нужный момент их сохранять, далее в нужный момент их переносить в другие классы хранения и в результате их удалять.
Мы с вами добрались до последней четвертой части нашей лабораторной работы.
Здесь мы будем увеличивать надежность нашего сайта и в целом нашей архитектуры.
Идея в том, что нам необходимо создать дополнительный S3 bucket в другом регионе и настроить в S3 bucket на основном регионе Cross-region replication.
Когда вы ее будете создавать необходимо также убедиться, что мы реплицируем весь bucket.
Также нам необходимо как IAM role для выполнения этой репликации указать CafeRole.
Она уже предварительно была для нас создана.
Здесь также приводится policy привязанной к этой роли.
Мы видим, что она предоставляет ряд Action, в том числе ReplicateObject, ReplicateDelete, ReplicateTags.
Как Resource указана звездочка и как Effect: allow.
Обратите внимание, что при работе с production средой, в policy вместо звездочки необходимо указывать конкретные названия buckets, чтобы оно было по принципу least privilege.
Как только вы настроили Cross-region replication нам необходимо открыть страницу с вопросами и ответить на третий вопрос.
Текст третьего вопроса звучит следующим образом.
Видим ли мы объекты из основного бакета в бакете куда происходит репликация? Отлично, после того как мы ответили переходим к следующему шагу.
Нам необходимо открыть index.html, внести некоторые минимальные изменения и загрузить эту новую версию на основной S3 bucket.
Далее необходимо убедиться, что в основном S3 bucket для index.html сейчас у нас три версии, после чего перепроверить, что на бакете в которую происходит репликация появилась версия index.html.
При необходимости вы можете обновить страницу и убедиться, что этот файл находится там.
Теперь нам нужно на основном S3 bucket удалить последнюю версию index.html и после чего ответить на четвертый вопрос теста.
Вопрос звучит следующим образом.
Как только мы удалили последнюю версию index.html в основном S3 bucket, что произошло на втором S3 bucket, на который происходит репликация? Она удалилась там или осталась такой же? Вам необходимо ответить на вопрос, сохранить его и я бы хотел разобрать следующую секцию, в которой рассматривается best practice.
А именно то, что при построении архитектуры в облаке нам необходимо учитывать различные действия для сохранения наших данных, нагрузок.
При возникновении проблем с целым регионом желательно построить избыточную архитектуру так, чтобы нагрузки перенаправлялись на другой регион.
Тем самым вы не теряли бы своих пользователей и ваше приложение продолжало бы работать.
С DR все не так просто, это достаточно дорогостоящее решение.
Вам необходимо в зависимости от вашего бизнес-кейса, в зависимости от того готовы ли вы выделять дополнительные средства на поддержание этой возможности и если ответ утвердителен, то да, необходимо ее разрабатывать.
На стороне облака AWS предоставляется широкий набор сервисов и функционала, которые позволяют вам настроить DR.
На этом мы выполнили все задания лабораторной работы.
Теперь нам необходимо запустить скрипт для автооценивания.
Для этого необходимо нажать на кнопку Submit.
Далее дать некоторое время отработать скрипту, может занять до 10 секунд.
После того как скрипт отработает, отобразится окно с вашими набранными баллами и баллами отдельно за каждое задание.
Если вы получили не максимальный балл и хотите ее улучшить, то вам необходимо пересмотреть задание и сделать соответствующие изменения в временном AWS аккаунте.
После того как вы внесете необходимые изменения, вам необходимо еще раз нажать на кнопку Submit для того чтобы автооценивание запустило скрипт еще раз.
Я надеюсь вы таким образом набрали максимальные баллы.
Необходимо со всех систем выйти корректно.
В первую очередь это относится к AWS аккаунту.
Необходимо в верхней правой части нажать на имя пользователя и в выпадающем списке нажать на кнопку Log out.
То же самое необходимо выполнить в лабораторной работе.
Необходимо ее остановить, для этого нажать на кнопку End lab, подтвердить что вы останавливаете лабораторную работу, после чего дождаться сообщения о том, что процесс удаления созданного AWS аккаунта запустился и вы можете закрывать это всплывающее окно.
На этом мы завершили введение в лабораторную работу, разобрали задание.
Я надеюсь, оно стало более понятным для вас, если будут вопросы, пишите.
Спасибо за внимание, увидимся с вами на следующих наших активностях.
