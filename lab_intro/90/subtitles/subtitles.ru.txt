Добрый день, уважаемые студенты! Рад вас видеть на очередной сессии «Введение в лабораторную работу». Тема сегодняшней лабораторной работы – это создание инстанса баз данных Amazon RDS. Итак, давайте начнем. Начинаем с основной страницы курса AWS Academy Cloud Architecting. Здесь необходимо использовать левое навигационное меню, чтобы перейти к нашим модулям. Далее необходимо спозиционироваться на пятом модуле, связанном с базами данных. Здесь есть активность Module 5 Guided Lab - Creating an Amazon RDS Database. Необходимо нажать на нее, чтобы перейти на главную страницу лабораторной работы. Здесь необходимо убрать галочку с окна Terminal, чтобы полноценно видеть задание лабораторной работы. В рамках лабораторной работы мы будем создавать инстанс базы данных, используя сервис Amazon RDS. Также в рамках лабораторной работы мы сконфигурируем веб-приложение таким образом, чтобы оно подключалось к нашей базе данных. Это приложение уже заранее было подготовлено и мы будем использовать готовое приложение и произведем настройки только в тех местах, которые относятся к AWS. В конце лабораторной работы у нас будет следующая архитектура. Есть VPC, Lab VPC. Оно находится в двух availability зонах, в одной availability зоне есть EC2 instance с приложением, находится в public subnet и мы создадим RDS instance в private subnet и настроим связь между ними. На выполнение этой лабораторной работы рекомендуется использовать 20 минут. Напоминаю, если вам необходимо больше времени, вы всегда можете, не завершая лабораторную работу, нажать на кнопку Start lab и счетчик перейдет в исходное состояние и отсчет начнется сначала. Также напоминаю, что мы будем работать в специальном временном AWS аккаунте и там будут доступны только те сервисы и функционалы тех сервисов, которые мы проходим в рамках лабораторной работы. Все остальные сервисы могут быть недоступны, но вы помните, что при создании AWS аккаунта для вас все сервисы и весь функционал будет доступен сразу. Для того, чтобы добраться до AWS Management Console, нам необходимо нажать на кнопку Start lab и дождаться, чтобы Lab status из состояния In progress перешел в состояние Ready, после чего мы можем закрыть всплывающее окно и после нажатия на кнопку AWS мы перейдем на основную страницу AWS Management Console. Мы начинаем первое задание и нам необходимо создать инстанс базы данных Amazon RDS. Необходимо в строке поиска сервисов начать вводить RDS и в выдаче увидите необходимую нам ссылку. На основной странице сервиса Amazon RDS необходимо нажать на кнопку Create Database, вас направят на отдельную страницу, где вы можете ввести входные данные для нашей будущей базы данных. Здесь нам необходимо следовать инструкциям, так как в рамках лабораторной работы будет автоматическое оценивание и в случае несоответствия вы недополучите баллы. Поэтому строго следуем инструкциям, как Engine options выбираем MySQL, здесь обращает внимание, что есть опция Amazon Aurora. Мы с вами помним, что Amazon Aurora это отдельный сервис и тем не менее он добавлен сюда, чтобы мотивировать пользователей использовать этот сервис. В нашем случае мы в рамках лабораторной работы продолжим со стандартным движком MySQL. Далее в секции Templates нам необходимо выбрать Dev/Test, там где Availability and Durability необходимо выбрать опцию Single DB Instance. Есть другие опции, называется Multi-AZ Deployment, о чем мы говорили с вами на лекции. Это тот случай, когда создается Standby Instance нашей базы данных. Естественно мы будем оплачивать в два раза больше, но это дает свои преимущества. Наша база данных становится highly available и если что-то происходит с базой данных либо в целом с основной availability зоной, то база данных на второй availability зоне становится основной. Ссылка на базу данных не меняется, таким образом приложение сможет прозрачно продолжать работать дальше и не увидит изменения на стороне баз данных. Далее в секции Settings необходимо ввести как DB instance identifier - inventory-db, как Username - admin, как Password - lab-password, необходимо пароль повторить. Далее, в секции DB Instance Class мы выбираем Burstable classes, это семейство t и выбрать необходимую опцию t3.micro. Далее, в секции Connectivity необходимо будет нажать на кнопку Edit и выбрать как VPC - lab-VPC и как Security group необходимо выбрать существующую DB-SG и необходимо будет удалить выбранную Default security group. В секции Additional configuration необходимо раскрыть и Initial database name ввести inventory. Необходимо, чтобы это имя было точно таким же, так как заранее написанное для нас приложение будет обращаться к базе данных с названием inventory. Далее ниже мы увидим опцию Enable enhanced monitoring, здесь необходимо будет галочку убрать. Это необходимо, чтобы быстрее создалась база данных, поэтому в нашем случае мы ее отключаем. Далее нам необходимо прокрутить в самый низ страницы и нажать на кнопку Create database. Обратите внимание, что вы можете получить ошибку, связанную с ролью rds-monitoring-role. В этом случае убедитесь, что вы отключили, то есть убрали галочку с опции Enhanced monitoring. Как только вы это сделаете необходимо нажать на кнопку Create database еще раз и оно должно инвицировать создание баз данных. Мы с вами переходим ко второй части нашей лабораторной работы и здесь мы будем настраивать наше приложение и подключать ее к базе данных. Первым делом необходимо перейти к сервису EC2, для этого в строке поиска сервисов начнем вводить EC2, в выдаче увидим первую ссылку, это та ссылка, которая нам нужна, давайте на нее нажмем. Далее в открывшейся странице, в левом навигационном меню необходимо выбрать опцию Instances. Как только откроется список с существующими EC2 инстансами вы увидите инстанс с названием App Server, это тот инстанс, который нам нужен. Давайте ее выберем для того, чтобы отобразились метаданные этого инстанса. В папке Details необходимо будет скопировать Public IPv4 адрес. Как только скопировали, можете открыть ее в новой странице браузера, откроется приложение. В приложении необходимо перейти на страницу Settings и ввести данные нашей базы данных. Не закрывайте страницу с приложением, нам необходимо вернуться в AWS Management Console для того, чтобы скопировать некоторые данные. Эти данные относятся к нашей базе данных, поэтому необходимо в строке поиска сервисов начать вводить RDS, по нужной ссылке перейти. Далее, как только вы окажетесь на главной странице сервиса Amazon RDS, в левом навигационном меню необходимо выбрать опцию Databases. Откроется страница со списком баз данных, в нашем случае будет одна единственная база данных, которая называется inventory-db. Давайте ее выберем и необходимо прокрутить чуть ниже и выбрать вкладку Connectivity and security. Здесь как вы помните есть Endpoint базы данных, нам необходимо ее скопировать. Если вы не можете найти, обратите внимание на 24 шаге указан пример Endpoint. У вас он будет аналогичный, лишь только будет отличаться ID RDS. Мы переходим обратно к нашему приложению, нам необходимо будет в поле Endpoint вести значение, которое мы скопировали. Далее, как Database указать inventory, Username будет admin, password будет lab-password, после чего необходимо нажать на кнопку Save. Все данные сохранятся, приложение должно успешно подключиться к базе данных и вы сможете начать вводить некоторые данные. Вы уже видите, что есть предзаполненные записи, нам необходимо создать один или два новых записей. Давайте это сделаем. Как только вы это сделали вы можете переходить к автоматическому оцениванию. Еще один момент, это то, что данные, которые мы ввели в наше приложение также доступны в сервисе Systems manager, а именно в под сервисе Parameter store. Вы можете самостоятельно попробовать открыть и посмотреть какие значения там сохранены. А мы с вами завершаем нашу сессию введения в лабораторную работу. Нам необходимо будет по завершению всех задач нажать на кнопку Submit, подтвердить, что мы хотим запустить автооценивание и через некоторое время вы увидите ваши оценки. Не забудьте правильно завершить работу страницы с лабораторной работой, а также правильно разлогиниться с AWS Management Console. На этом мы завершаем нашу сессию. Спасибо за внимание. Увидимся на следующих активностях.