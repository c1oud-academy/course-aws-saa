 Добрый день, уважаемые студенты! Я рад вас всех видеть на очередной сессии «Введение в лабораторную работу». Тема лабораторной работы – это хостинг статического веб-сайта на базе сервиса Amazon S3. Окей, давайте начнем. Начинаем мы введение в лабораторную работу с основной страницы курса «Cloud Architecting» в платформе AWS Academy. Здесь нам необходимо в левом навигационном меню нажать на вкладку «Modules». Далее необходимо спозиционироваться на третьем модуле «Adding a storage layer», раскрыть его, и вы увидите «Guided Lab» модуля 3 – «Hosting static website». Давайте на нее нажмем, чтобы перейти на основную страницу лабораторной работы. Возможно, в случае открытия первый раз лабораторной работы откроется страница, это разовая страница, отображается только в первый раз. Это «Terms and Conditions» – условия использования сервиса. Необходимо прокрутить в самый низ и нажать на кнопку «Agree». Эта страница не ограничена по времени, поэтому при необходимости вы можете не спеша с ней ознакомиться, перед тем как нажимать на кнопку «I Agree». Как только мы нажимаем на эту кнопку, нас направляет на основную страницу лабораторной работы. Здесь я бы хотел обратить внимание, что у нас будут два вида лабораторных работ. Первый – это «Guided Lab», второй – это «Challenge Lab». Отличается тем, что в «Guided Lab» мы увидим абстрактную задачу, в которой будут прописаны все детали, все ваши действия, которые необходимо проделать. В случае с «Challenge Lab», оно обернуто в некоторый бизнес-кейс, то есть есть практическая задача, которую нужно выполнить, и вы, используя знания, полученные на лекциях и на «Guided Lab», будете эти знания применять в «Challenge Lab». В «Challenge Lab» задания прописаны менее детально, поэтому некоторые простейшие моменты вам необходимо проделывать самостоятельно. Мы продолжаем наш «Guided Lab». Для начала рекомендуется убрать галочку из опции «Терминал», чтобы окно терминала скрылось, и останется только «Readme» окно для удобства ознакомления с заданием лабораторной работы. В этой лабораторной работе мы будем изучать функционал хостинга статических веб-сайтов в сервисе Amazon S3. Мы с вами знаем, что статические веб-сайты – это некоторый набор файлов, HTML-файлов, файлов стилей CSS, картинок и так далее, других медиа-файлов, которые вы загружаете на ваш веб-сервер, и при обращении по определенному адресу все ваши пользователи смогут видеть этот контент. Если вы хотите видеть некоторую динамику, то здесь можно подключать также язык JavaScript, специальные JS-файлы, которые придают некоторую динамику. Таким образом, фактически вы хостите статические JS-файлы, но тем не менее сайт у вас динамический. Все, что было выше сказано, оно поддерживается Amazon S3. Есть специальный функционал, который активирует режим хостинга статических веб-сайтов. Про него мы сегодня будем говорить. И если говорить про задачи, которые мы сегодня проделаем, мы создадим Amazon S3 Bucket, далее загрузим туда пример заранее для нас подготовленного веб-сайта, то есть контент веб-сайта, после чего активируем необходимый нам функционал и проверим, что наш сайт действительно корректно отображается и хостится на S3 Bucket. Всего на выполнение этой лаборторной работы рекомендуется использовать порядка 20 минут. Я вам напоминаю, что если вам необходимо больше времени, вы всегда можете это время увеличить, сбросить счетчик и закончить лаборторную работу со своей скоростью. Также напоминаю, что мы работаем в песочнице, специально созданном AWS аккаунте для нашей сессии лаборторной работы, поэтому некоторые сервисы могут быть недоступны, но гарантированно будут доступны те сервисы и тот функционал, который предназначен в рамках выполнения лаборторной работы. Самым первым делом нам необходимо добраться до AWS Management Console. Для этого вам необходимо на главной странице лаборторной работы нажать на кнопку Start Lab. Отобразится всплывающее окно, на котором иницируется процесс создания временного AWS аккаунта для нашей сессии лаборторной работы. Как только вы увидите сообщение Lab Status Ready, вы можете закрывать это всплывающее окно, после чего вам необходимо нажать на кнопку AWS. После того, как вы нажмете на кнопку AWS, вас направят на AWS Management Console. Самое первое задание нам необходимо создать S3 Bucket. Для этого на основной странице AWS Management Console нам необходимо в выпадающем меню сервиса найти сервис S3, либо в строке поиска сервисов ввести S3 и в выдаче вы увидите самым первым необходимый нам сервис. Давайте на него нажмем, чтобы перейти на главную страницу сервиса Amazon S3. Там вы увидите, что список бакетов пустой, это ожидаемо, возможно будут некоторые системные бакеты, нам они не нужны в рамках лаборторной работы. Нам необходимо нажать на кнопку Create Bucket, мы создаем новый бакет. Мы с вами помним, что название бакета должно быть уникальным по всему миру в разрезе всех регионов, всех AWS аккаунтов. Поэтому могут быть проблемы с подбором названия бакета и в рамках этой лаборторной работы рекомендуется назвать следующим образом. Как префикс будет website-dash и далее необходимо указать рандомную последовательность цифр. Как только вы подобрали имя бакета, нам необходимо выбрать регион, в котором будут фактически храниться наши данные. Здесь необходимо выбрать US East One, но в будущем, когда вы будете работать с AWS аккаунтом, вы можете выбирать регион, который более предпочтительен для вашей компании. Если прокрутим чуть ниже, есть секция Object Ownership, здесь необходимо выбрать опцию ACLS Enabled. Она не рекомендуется, так как является предшественником опции IAM Policy, но в рамках лаборторной работы мы ее будем использовать, поэтому выбирайте ее. И в появившемся под секции необходимо удостовериться, что выбрана опция Bucket Owner Preferred. Следующая секция это блок All Public Access, здесь необходимо галочку с этой опции убрать и в самом низу отобразится еще новая под секция с текстом что говорит о том, что вы подтверждаете и знаете, что после отключения этой опции ваш бакет может быть публично доступен. Это то, что мы и собираемся сделать, поэтому ставим здесь галочку и подтверждаем. Необходимо прокрутить до самого низа страницы и нажать на кнопку Create Bucket. Мы увидим список бакетов на нашем AWS аккаунте, также увидим созданный нами бакет. Давайте нажмем на ее имя, чтобы перейти на главную страницу S3 Bucket. Вы увидите несколько вкладок, нам необходимо выбрать Properties, прокрутить до секции Tags, чтобы добавить новую пару ключ-значения. Для этого необходимо нажать на кнопку Edit и в новой открывшейся вкладке нажать на кнопку Add Tag. Появится два новых поля, как Key давайте введем Department, как Value введем Marketing, после чего необходимо нажать на кнопку Save Changes. Мы остаемся в той же вкладке Properties нашего S3 Bucket и необходимо проскролить чуть ниже, чтобы активировать функционал Static Website Hosting. Для этого на этой секции необходимо нажать на кнопку Edit, откроется отдельное окно и как Static Web Hosting необходимо выбрать опцию Enable. Далее как Hosting Type необходимо выбрать опцию Host Static Website, как Index Document, то есть документ, который обслуживает и перенаправляет пользователей при вводе основного домена написать индекс HTML, то есть это страница входа. Далее для Error Document вписать Error.html и в самом низу страницы нажать на кнопку Save Changes. Как только вы на нее нажмете, нас перенаправит обратно на вкладку Properties и вы увидите, что опция Static Website Hosting она включена и появилась ссылка это Bucket Website Endpoint. Нам необходимо ее скопировать и открыть в отдельной вкладке в браузере. Как только вы ее откройте, вы увидите ошибку 403 Forbidden, это нормально и ожидаемо. Вам необходимо эту вкладку оставить открытой, так как мы на следующих заданиях вернемся к этой странице. Мы с вами переходим ко второму заданию и здесь нам необходимо загрузить контент нашего веб-сайта на наш S3 Bucket. Контент был предварительно подготовлен для нас в рамках этой лабораторной работы. Нам лишь достаточно по ниже приведенным ссылкам скачать эти файлы, это index.html, script.js и style.css, нажать правой кнопкой и выбрать опцию сохранить как. Далее необходимо вернуться на основную страницу нашего S3 Bucket и нажать на кнопку Upload. Это направит вас на отдельную страницу, там необходимо нажать на кнопку Add Files, выбрать все наши файлы и нажать на кнопку Upload. Возможно выйдет сообщение о том, что действительно ли вы подтверждаете, что эти файлы будут загружены и в случае наличия таких же файлов они будут перезаписаны. Да, вам необходимо в этом случае подтвердить, поставить галочку и нажать на кнопку Upload. Как только вы это сделаете, вас направят на страницу статуса загрузки всех ваших файлов. Файлов не так много, поэтому процесс загрузки занимает несколько секунд и вы сразу увидите зеленые сообщения о том, что загрузка прошла успешно. Здесь нам необходимо нажать на кнопку Close вверху справа для того, чтобы вернуться на основную страницу нашего S3 Bucket. На этом мы загрузили все необходимые файлы, вы можете проверить отображается ли сейчас наш сайт, вы увидите там всю ту же ошибку. Это связано с тем, что мы публичный доступ все еще не предоставили и этим мы займемся на следующем задании. Мы с вами добрались до третьей части нашей лаборатурной работы. Здесь нам необходимо активировать публичный доступ для нашего веб-сайта. Мы с вами помним, что по умолчанию доступ приватный и если вам нужен публичный доступ, это нужно делать дополнительно. Сейчас мы видим ошибку 403 на нашем сайте, это ожидаемо. Что необходимо сделать? У нас есть два варианта. Первый вариант это предоставить публичный доступ для всего Bucket. Для этого используется Public Policy. Это менее безопасно, намного безопаснее выдать индивидуально для каждого объекта публичный доступ. Это делается через Access Control Листы ACL. Это тот вариант, который мы выбрали в самом начале и давайте продолжать вместе с ним. Поэтому мы будем индивидуально для наших объектов выдавать публичный доступ. Для того, чтобы это сделать необходимо вернуться на основную страницу Bucket. Далее в списке объектов выбрать все наши три объекта, нажать на кнопку Actions и в выпадающем меню выбрать опцию Make Public via ACL. Отобразится всплывающее окно, на котором необходимо подтвердить то, что мы выдаем публичный доступ и нажать на кнопку Make Public. Как только вы это сделаете, наши выбранные файлы станут публично доступными и мы это можем проверить, вернувшись обратно на страницу нашего веб-сайта и обновить страницу. Сейчас вы должны увидеть наш статический веб-сайт, специально подготовленный для нашей лаборторной работы. Мы с вами добрались до последнего задания в рамках лаборторной работы и попробуем обновить содержание нашего веб-сайта. Для этого локально в любом текстовом редакторе необходимо открыть индекс HTML, там найти поиском Text Server from Amazon S3 и заменить ее любым другим текстом. Вы можете написать Created By и ваше имя. Необходимо сохранить файл и загрузить обратно на S3 bucket. Обратите внимание, что после того как вы загружаете этот файл, настройки публичного доступа, они возвращаются обратно в значение по умолчанию и этот файл становится недоступным. Поэтому вам необходимо выбрать индекс HTML, нажать на кнопку Actions, выбрать опцию Make Public via ACL и подтвердить то, что вы выдаете публичный доступ этому файлу. Далее, если вы откройте веб-сайт и обновите страницу, вы увидите введенный вами новый текст. Отлично, я вас поздравляю, вы создали статический веб-сайт с использованием сервиса Amazon S3. При этом также хотел бы обратить внимание, что вам не пришлось для этого поднимать и настраивать отдельный веб-сервер. Ваш веб-сайт по умолчанию высоко доступен, легко масштабируется, это все делает AWS и вам для этого дополнительных действий проделывать не нужно. Более того, вы оплачиваете только за те файлы, которые находятся в вашем S3 bucket. Следующий вопрос, который у вас может возникнуть, представим, что у вас есть кастомный домен mysite.kz и вы хотите, чтобы он открывал веб-сайт, созданный нами сейчас в рамках лабораторной работы. Это также можно проделать, в рамках этой лабораторной работы мы это проделывать не будем, но я бы хотел выделить какие действия необходимо предпринять. Это все проделывается в сервисе Amazon Route 53, необходимо в начале привязаться к домену, а далее уже этот домен привязать к нашему S3 bucket, после чего переходя на ваш кастомный домен будет открываться веб-сайт, который хостится на S3 bucket. На этом мы завершили нашу лабораторную работу, теперь пару слов о том, как сдать свою работу, чтобы система могла ее оценить. Для этого вам необходимо после завершения всех задач и действий нажать на кнопку submit на главной странице лабораторной работы VWS Academy. Как только вы ее нажмете, вам необходимо подтвердить о том, что вы хотите запустить скрипт для оценки, нажимаете есть и через какое-то время происходит автоматическое оценивание, проверяя временный WS account, все ли необходимые изменения там содержатся. Через какое-то время отобразятся оценки, если этого не произошло вы можете нажать на кнопку grades и откроется соответствующая страница. В случае, если вы набрали недостаточное количество баллов и хотите получить максимум, вы всегда можете посмотреть, где не хватает баллов, на каком задании, проделать это задание снова не выключая, не завершая лабораторную работу, прям там же менять в WS account, после того как закончите ваши изменения обратно вернуться на главную страницу лабораторной работы и еще раз нажать на кнопку submit, после чего произойдет повторное оценивание и вы должны получить обновленную оценку. Если вы получили максимум оценку, я вас с этим поздравляю, отлично. Вы также можете посмотреть детали о том, что было оценено, вы можете нажать на кнопку details, выбрать опцию view submission report, после чего отобразятся все детали оценивания. На этом мы завершаем нашу лабораторную работу, нам необходимо корректно завершить работу всех систем, необходимо разлагиниться с AWS аккаунта, также на странице лабораторной работы необходимо нажать на кнопку end lab, подтвердить, что мы завершаем лабораторную работу и дождаться сообщения о том, что процесс удаления ресурсов инициирован и вы можете закрывать это окно. После этого вы можете выходить с AWS Academy. На этом мы подошли к концу нашей сегодняшней сессии, введение в лабораторную работу. Я думаю, у вас сложилось впечатление, что необходимо сделать, что можно делать с использованием сервисов AWS. Если будут какие-то вопросы, вы пишите нам, обязательно отвечим. На этом завершаем нашу сессию. Спасибо за внимание, увидимся с вами на следующих наших активностях.
