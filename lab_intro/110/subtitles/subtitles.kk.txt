Қайырлы күн, құрметті студенттер! Сізді келесі зертханалық жұмысқа шолуда көргеніме қуаныштымын. Бүгінгі зертханалық жұмыстың тақырыбы - Virtual Private Cloud, яғни VPC құру. Ендеше, бастайық. Зертханалық жұмысты AWS Academy-дегі Cloud Architecting курсы парақшасынан бастаймыз. Мұнда Modules бөліміне өтіп, Networking тақырыбына арналған алтыншы модульді ашуымыз керек. Осы модульдегі барлық әрекеттерді қарастырғаннан кейін, алтыншы Guided lab табу керек. Зертханалық жұмыстың негізгі парақшасына өту үшін оны басайық. Мұнда қажет зертханалық жұмысты ашқанымызға көз жеткізуіміз керек. Шолуды бастау үшін Terminal терезесінен белгіні алып тастаймыз, өйткені ол қазір қажет емес. Бүгінгі зертханалық жұмыстың аясында VPC және оның құрамдас бөліктерін жасаймыз. Желілер өте күрделі тақырып екенін білеміз. Бұлттық технологиялардың арқасында желі құрамдастары мен аппараттық құралдарға қатысты жұмыстардың барлығы бізден жасырылады. Бұл жұмыстың барлығы біз үшін AWS дата-центрлерінде орындалып қойған, дайын. Түрлі сервистерді және осы сервистердің функционалдығын пайдалана отырып, AWS Management Console-де тінтуірді бірнеше рет басу арқылы қашықтан бұлттарда желілер құра аламыз. Бүгінгі зертханалық жұмыс аясында VPC, Internet gateway жасаймыз, оны VPC-ге байланыстырамыз. Осы VPC ішінде екі subnet жасаймыз, біреуі public, екіншісі private болады. Сондай-ақ, public subnet-те Application server орнатамыз және біз үшін бұрыннан жазылған қосымшаларды сынақтан өткіземіз. Зертханалық жұмысты орындауға 30 минут уақыт бөлу ұсынылады. Бұл уақыт жеткіліксіз болса, есептегішті әрқашан басына келтіруге болады, AWS аккаунтыңыздағы прогресс сақталады. Ол үшін End lab батырмасын баспай-ақ, Start lab батырмасын басып, зертханалық жұмысты бастағыңыз келетінін растаңыз. Бұл жағдайда, біраз уақыттан кейін есептегіштің ең басынан бастап санай бастағанын көресіз. Біз құмсалғышта жұмыс істеп жатқанымыз туралы шағын хабарламаны көреміз. Бұл - зертханалық жұмыстың бөлігі ретінде арнайы жасалған уақытша AWS аккаунты. Оның белгілі бір шектеулері бар. Бұл - сервистердің барлық сервистері мен функционалдығы қолжетімді емес, бірақ зертханалық жұмыстың аясында өтетін сервистер мен функционалдылықтың қолжетімді болуына кепілдік беріледі. Зертханалық жұмыста берілген тапсырмаларды орындасаңыз, қиындықтар болмауы керек. Бұл слайдта зертханалық жұмыстың бөлігі ретінде жасайтын AWS бұлтындағы IT инфрақұрылымын көресіз. Көріп отырғанымыздай, бір AWS аккаунтында бір VPC жасалады, бұл Lab VPC. Біз бір availability zone-мен жұмыс істейміз және екі subnet те осы availability zone-да орналасады. Сондай-ақ, VPC-ге қосылған Internet gateway болады. Application server public subnet-те орналасады және оның Интернетке кіру мүмкіндігі, сонымен қатар Интернеттен осы application server-ге кіру мүмкіндігі болады. Зертханалық тапсырмамен танысқаннан кейін Start lab батырмасын басуымыз керек, және AWS аккаунты дайын екенін көргеннен кейін AWS Management Console өту үшін AWS батырмасын басуға болады. Зертханалық жұмыстың бірінші тапсырмасын бастаймыз, мұнда VPC жасаймыз. AWS Management Console іздеу жолағын пайдаланып, Amazon VPC сервисіне өту керек. Amazon VPC сервисінің парақшасы ашылғаннан кейін сол жақ шарлау мәзірінен Your VPCs опциясын таңдауыңыз керек. AWS аккаунтындағы бар VPC тізімі ашылады. Біз бар VPC қолданбаймыз, жаңасын жасаймыз. Ол үшін Create VPC батырмасын басыңыз. Ашылған парақшадатек VPC жасап жатқанымызды көрсетеміз, басқа компоненттерді жасаудың қажеті жоқ. Name ретінде Lab VPC мәнін енгіземіз, ал IPv4 CIDR блогы ретінде келесі мәнді енгіземіз. Содан кейін Create VPC батырмасын басу керек. Tags бөлімінде Name кілті және Lab VPC мәні бар тег толтырылғанын ескеріңіз. VPC жасағаннан кейін бір мәнді қосу керек, Enable DNS Hostname. Бұл- VPC ішінде жасалған барлық ресурстар үшін белгілі DNS Hostname байланыстыратын жалауша. Бірегей немесе теңшелетін DNS Hostname байланыстырғыңыз келсе, Amazon Route 53 сервисін пайдалануыңыз керек. Мұны зертханалық жұмыстың аясында жасамаймыз, бірақ қосымша ақпарат ретінде бар. VPC тізімі бар парақшада біз жасаған VPC таңдауымыз керек, содан кейін Actions батырмасын басып, Edit VPC settings опциясын таңдаңыз. VPC сипаттамалары тізімінде Enable DNS Hostname опциясын тауып, өзгертулерді сақтау керек. Екінші тапсырмада subnets жасаймыз. Нәтижесінде AWS бұлтында келесі IТ архитектура болады. Біз VPC құрдық, енді subnets құруға көшеміз. Ең алдымен, public subnet құрайық. Ол үшін сол жақтағы шарлау мәзірінде Subnets опциясын таңдап, subnets тізімі көрсетілгенде Create subnet батырмасын басу керек. Кіріс деректерді енгізу парақшасында Lab VPC таңдау керек, Subnet name ретінде Public subnet көрсету керек, Availability zone ретінде тізімдегі бірінші availability zone таңдауыңыз керек, бұл us-east-1a, содан кейін CIDR блогы ретінде келесі мәнді көрсетіңіз және парақшаның төменгі жағындағы Create Subnet батырмасын басыңыз. CIDR блогының өлшемі 24 екенін ескеріңіз, бұл осы CIDR блогына 256 IP мекенжайы бөлінетінін білдіреді. Есіңізде болсын, AWS өзі сақтайтын 5 IP мекенжайы бар, сондықтан 256-5, яғни 251 IP мекенжай болады. Бұл ауқымдағы бірінші IP мекенжайы 10.0.0.0 болады, ол үлкен VPC-дің CIDR блогына кіреді. Жақсы. Енді Public subnet жасағаннан кейін мәнді қосуымыз керек, Enable auto-assign Public IPv4 Address қосу. Идея мынада: осы subnet-те ресурстарды жасау кезінде жалпыға ортақ IP мекенжайы автоматты түрде тағайындалады. Оны қосу үшін тізімнен Public subnet таңдау керек, содан кейін Actions батырмасын басып, ашылмалы мәзірден Edit subnet settings опциясын таңдаңыз. Онда сәйкес мәнді қосып, осы өзгерістерді сақтау керек. Енді private subnet құруға көшеміз, алдындағы мәндерді енгіземіз, бірақ шамалы өзгерістермен. VPC ретінде Lab VPC, Subnet name ретінде Private Subnet енгіземіз, Availability zone ретінде тура сол availability zone таңдаймыз, us-east-1a және CIDR блогы ретінде келесі мәнді көрсетеміз. Мұнда CIDR блогының өлшемі 23 екеніне ерекше назар аударыңыз, бұл қате емес, бұл әдейі жасалған. Ал формула бойынша есептейтін болсақ, бұл CIDR блогында 512 IP мекенжайы бар. AWS біз үшін 5 IP мекенжайын сақтайтындықтан, бұл диапазонда шын мәнінде бізге қол жетімді 507 IP мекенжайы бар. Бұл әдейі жасалды, өйткені VPC ішінде жасалған ресурстардың көпшілігі жалпыға қолжетімді емес. Әдетте олардың барлығы қауіпсіздік мақсатында private subnet-те орналасады. Тиісінше, бұл subnet, IP мекенжайларын бөлуде проблемалар болмауы үшін, Private subnet өлшемі үлкенірек жасалады, ал Public subnet өлшемі кішірек жасалады. Үшінші тапсырмаға да жеттік. Ол өте қарапайым. Мұнда Internet gateway жасап, оны Lab VPC-ге байланыстыруымыз керек. Ең алдымен, сол жақ шарлау мәзірін пайдаланып, Internet gateways опциясын таңдауымыз керек. Осы AWS аккаунтындағы барлық Internet gateways бар парақшаға бағытталамыз. Бізге жаңасын жасау керек болады. Ол үшін Create Internet gateway батырмасын басыңыз. Ашылған парақшада Internet gateway атын енгізу жеткілікті. Lab IGW деп енгізейік, ол Internet Gateway сөзінің қысқартылған түрі. Және парақшаның төменгі жағындағы Create Internet gateway батырмасын басыңыз. Мұны басқаннан кейін ресурстың негізгі парақшасына бағытталамыз. Мұнда Actions батырмасын басып, ашылмалы тізімнен Attach to VPC опциясын таңдау керек. Деректерді енгізу парақшасына бағытталамыз және мұнда VPC, атап айтқанда Lab VPC таңдауымыз керек. Содан кейін Attach Internet gateway батырмасын басыңыз. Сіз Internet gateway негізгі парақшасына ораласыз және күйдің Attached екенін және VPC өрісінде Lab VPC де көрсетілгенін көресіз. Осымен үшінші тапсырманы орындап, төртінші тапсырмаға көшеміз. Мұнда route tables баптауымыз керек. Біз VPC жасаған кезде әдепкі route table де жасалды. Біз оны пайдаланып, private route table-ге түрлендіреміз. Оны табу үшін сол жақ шарлау мәзірін пайдаланып, Route tables опциясын таңдау керек. Мұнда бірнеше route tables бар тізімін көресіз. VPC сілтемесі бар бағанды тауып, Lab VPC-ге сілтеме жасайтын route table таңдау керек. Енді Name бағанында жаңа мән енгізуге болады. Private route table енгізіп, сақтаймыз. Route table таңдалғанда, экранның төменгі жағында метадеректер көрсетіледі. Routes қойындысы бар. VPC ішінде ақпарат пен ресурстармен алмасуға көмектесетін бір ғана стандарты routing rule бар екенін ескеріңіз. Мұнда жаңа routing rules қоспаймыз, өйткені оны зертханалық жұмыстың аясында жасаудың қажеті жоқ. Енді жаңа route table құруға көшеміз, оны кейін Public subnet-ке байланыстырамыз. Ол үшін Create route table батырмасын басу керек. Кіріс деректерінде Name өрісіне Public route table енгізу керек және VPC ретінде Lab VPC таңдау қажет. Осыдан кейін Create route table батырмасын басамыз. Route table жасалғаннан кейін метадеректерге, атап айтқанда Routes қойындысына қарайық. Мұнда бір routing rule бар, Интернетке қол жеткізуді баптау үшін екіншісін жасауымыз керек. Ол үшін Edit routes батырмасын басыңыз. Сәйкес парақша ашылады. Add route батырмасын басу керек. Жаңа жол қосылады. Бұл жолда Destination ретінде Интернет белгілеуін көрсетуіңіз керек. Бұл барлық нөлдерден кейін қиғаш сызық 0 болатын IP мекенжайы. Target ретінде LabIGW деп аталатын біз жасаған Internet gateway көрсету керек, содан кейін параметрлерді сақтау керек. Мұны жасағаннан кейін келесі Subnet associations қойындысына өтуіміз керек және бұл жерде public subnet-ке тіркеу керек. Мұны істеу үшін Edit subnet associations батырмасын басыңыз және барлық subnets тізімінен public subnet табыңыз, оны таңдап, Save associations батырмасын басыңыз. Осылайша, subnet шын мәнінде public болуы үшін барлық қажетті қадамдарды орындадық. Атап айтқанда, Internet gateway жасап, оны VPC-ге байланыстырдық. Содан кейін route table құрдық. Бұл route table-де интернет-трафикті біздің Internet gateway-ге бағыттайтын қосымша routing rule жасадық. Және соңғы қадам, бұлroute table-ді subnet-пен байланыстырдық, содан кейін ол шын мәнінде public subnet болды. Бесінші тапсырмаға көшеміз және осы жерде қосымшамыз үшін security group жасаймыз. Ол үшін сол жақ шарлау мәзірін пайдаланып, Security group тармағын таңдаңыз. Көрсетілген security groups тізімінде Create security group батырмасын басып, келесі кіріс деректерін енгізу керек. Security group name ретінде App-SG және Description ретінде Allow HTTP traffic енгізу керек, VPC ретінде әдепкі таңдауды өшіріп, Lab VPC деп аталатын VPC таңдау керек. Содан кейін парақшаның ең төменгі жағына жылжып, Create security group батырмасын басыңыз. Сіз ресурстың, атап айтқанда, security group-тың негізгі парақшасына бағытталасыз. Мұнда Inbound rules қойындысына назар аударыңыз, ол бос. Бізге жаңа rule қосу керек. Ол үшін Edit inbound rules батырмасын басыңыз және ашылатын парақшада Add rule батырмасын басыңыз. Жаңа жол қосылады және бұл жолға келесі мәндерді енгіземіз. Type ретінде HTTP енгізейік. Source type ретінде Anywhere-IPv4 енгіземіз. Description ретінде Allow web access енгіземіз. Және парақшаның ең төменгі жағында Save rules батырмасын басыңыз. Жақсы. Бұл security group келесі тапсырмада қажет болады. Біз алтыншы тапсырмаға көшеміз және осы жерде public subnet-те біз үшін алдын ала дайындалған қосымшасы бар EC2 инстансын іске қосамыз. Мұны істеу үшін сервисті іздеу жолағын пайдаланып, EC2 сервисіне өту керек. EC2 сервисінің негізгі парақшасында Launch instance батырмасын тауып, оны басу керек. Одан кейін кіріс деректерін енгізу үшін бөлек парақшаға бағытталасыз. Келесі мәндерді енгізейік. Name ретінде App Server енгізу керек. Операциялық жүйе ретінде Amazon Linux таңдаймыз. Келесі өрісте Amazon Linux 2 AMI (HVM) мәнін таңдаңыз. Одан кейін Instance type ретінде t2.micro таңдаңыз. Егер t2 буыны болмаса, t3 буынын таңдауға болады. Және инстанстың сондай өлшемін таңдаңыз, яғни t3.micro. Әрі қарай, кілтті енгізу бөлімінде ашылмалы тізімнен vockey таңдау керек. Желі параметрлері бар бөлімге жеткенде, Edit батырмасын басып, өзгертулер енгіземіз. Network ретінде Lab VPC таңдау керек. Subnet ретінде – Public Subnet. Келесі, төменде Security group параметрлері болады. Select an existing security group опциясын таңдап, ашылмалы тізімнен App-SG деп аталатын бұрын жасалған security group таңдауыңыз керек. Мұнда қажетті деректерді енгізуді аяқтадық. Парақшаның ең төменгі жағына жылжып, Advanced details бөлімін кеңейтуіміз керек. Мұнда алдын ала дайындалған IAM Role-ді EC2 инстансына байланыстыруымыз керек. Сондықтан, IAM Instance Profile өрісінде ашылмалы тізімнен Inventory-App-Role опциясын таңдаңыз. Осы бөлімнің ең төменгі жағына қарай жылжып, User Data өрісін табайық. Бұл - инстансты жасау кезінде бір рет орындалатын командалар жиынтығы. Командаларды көшіріп, осы мәнді сәйкес өріске қою керек. Бұл командалар қажетті бағдарламалық жасақтаманы, атап айтқанда MySQL дерекқорын, PHP-ді орнатады. Зертханалық жұмыстың аясында алдын ала дайындалған қосымшасы бар zip мұрағатын жүктеп алады, осы қосымшаны орнатады және веб-серверді іске қосады. Барлық қажетті мәндерді енгізгеннен кейін парақшаның оң жағындағы Launch instance батырмасын басуымыз керек. Біз инстанстар тізімі бар парақшаға бағытталамыз. Мұнда жаңадан жасалған EC2 инстансы күйінің екінің екеуіне өзгеруін күтуіміз керек. Осыдан кейін келесі тапсырмаға көшуге болады. Күйді тексеруден өткеннен кейін осы EC2 инстансын таңдап, көрсетілетін метадеректердегі жалпы IPv4 мекенжайын көшіруіміз керек. Оны көшіріп алғаннан кейін, веб-браузерде жаңа қойындыны ашып, осы веб-мекенжайға өтуіңіз керек. «Please configure settings to connect to database» деп жазылған қосымшаны көрсеңіз, барлығын дұрыс орындадыңыз және қосымша сәтті іске қосылды дегенді білдіреді. Бұл зертханалық жұмыстың аясында дерекқор қосылымдарын орнатпаймыз. Мұны келесі зертханалық жұмыста орындаймыз. Жақсы, осымен бүгінгі зертханалық жұмысты аяқтадық. Зертханалық жұмыс парақшасына өтіп, Submit батырмасын басып, зертханалық жұмысты аяқтағымыз келетінін растауыңыз керек. Біраз уақыттан кейін автоматты бағалау скрипті аяқталады және экранның оң жағында бағаңызды көресіз. Егер максималды ұпай жинай алмасаңыз, онда әрқашан қай тапсырмада ұпай жетіспейтінін қарап, оны қайталап орындай аласыз. Сондай-ақ, келесі зертханалық жұмысты ашуда қиындықтар болмас үшін AWS Management Console жүйесінен дұрыс шығып, зертхананы аяқтауды ұмытпаңыз. Осымен біздің зертханалық жұмысқа шолу сессиямыз аяқталды. Назарларыңызға рахмет. Келесі белсенділіктерде кездескенше.