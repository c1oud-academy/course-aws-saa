Қайырлы күн, құрметті студенттер! Зертханалық жұмысты талдау сессиясында көргеніме қуаныштымын. Зертханалық жұмыстың тақырыбы - Amazon Elastic File System сервисіне кіріспе, қысқаша Amazon EFS. Ендеше, бастайық. Біз AWS Academy зертханалық жұмыстың негізгі парақшасынан бастаймыз. Ол үшін Start Lab батырмасын басыңыз. Қалқымалы терезеде зертханалық жұмыстың күйін көресіз және басында ол In Creation күйінде болады. Ready күйіне өткеннен кейін, қалқымалы терезені жауып, AWS Management Console өтуге болады. Ол үшін Start Lab батырмасының жанындағы AWS батырмасын басу керек. AWS Management Console негізгі парақшасына өткеннен кейін, тапсырмаларымызды орындауды бастай аламыз. Бірінші тапсырма - Security group құру. Ол үшін сервис іздеу жолағында EC2 деп теруді бастау керек. Іздеу жолағында қажет сервисті таңдап, EC2 сервисінің негізгі парақшасында сол жақ шарлау мәзірінде Security Groups қойындысын басыңыз. Оны басқаннан кейін, осы AWS аккаунтында бар Security Groups тізімін көресіз. EFS Client деп аталатын Security Group таңдайық. Оның Security Group ID көшірейік, ол қажет болады және Create Security Group батырмасын басыңыз. Оны басқаннан кейін Security Group құру парақшасына өтеміз. Мұнда кейбір деректерді енгізу қажет болады. Бірінші - Security Group Name. Тапсырмаға сәйкес EFS Mount Target жазайық. Description ретінде Inbound NFC access from EFS Clients деп жазайық. Ал VPC ретінде Lab VPC таңдаймыз. Төмендегі Inbound Rules бөлімінде Add Rule батырмасын басу керек. Өріс пайда болады, Type ретінде NFC таңдау керек. TCP протоколы автоматты түрде енгізіледі, Port Range 2049, бұл бізге қажеті. Ал Source ретінде Custom таңдау керек. Мұны орындағаннан кейін келесі өріс белсендіріледі. Онда Security Group ID енгізу қажет. Не ашылмалы тізімнен EFS Client атауы бар Security Group табыңыз. Мұны жасағаннан кейін парақшаның төменгі жағына өтіп, Create Security Group батырмасын басуымыз керек. Енді біз EFS файлдық жүйесін жасауға дайынбыз. Ол үшін осы сервиске өту керек. Сервистерді іздеу жолағына EFS деп теруді бастайық және сол сервиске өтейік. Amazon EFS сервисінің негізгі парақшасына өтеміз. Бұл AWS аккаунтында жасалған файлдық жүйелер жоқ болғандықтан, сіз осы сервис туралы шағын ақпарат беретін бейне материалы бар парақшаны көресіз. Сондай-ақ, Create File System батырмасы болады. Оны басайық. Келесі парақшаны көресіз. Мұнда файлдық жүйені құрудың кеңейтілген параметрлерін ашу үшін Customize батырмасын басу керек. Ол төрт қадамнан тұрады. Бірінші қадамда Enable Automatic Backups өрісінен құсбелгіні алып тастауымыз керек. Lifecycle Management үшін None опциясын таңдап, парақшаның төменгі жағына өтіңіз. Name тегінің кілті ретінде My First EFS File System мәнін көрсетіп, Next батырмасын басу керек. Енді екінші парақшаға көшеміз. Мұнда VPC ретінде Lab VPC таңдау керек. Әрбір Availability zone үшін Mount Target жасалғанын көресіз. Lab VPC-де екі Availability zone бар. Яғни us-east-1a және us-east-1b көреміз. Сондай-ақ, әдепкі Security Group байланыстырылғанын көресіз. Бізге олар қажет емес, сондықтан Security Group әрқайсысы үшін X батырмасын басуымыз керек. Содан кейін әрбір Availability zone үшін бұрын жасаған Security Group таңдаңыз. Ол EFS Mount Target деп аталады. Оны таңдағаннан кейін Next батырмасын басу керек. Үшінші парақшада ештеңені өзгертпейміз. Бәрін әдепкі ретінде қалдырамыз. Next батырмасын қайтадан басыңыз. Төртінші парақшада біз енгізген барлық деректерді көреміз. Парақшаның ең төменгі жағына өтіп, Create батырмасын басуыңыз керек. Мұны орындағаннан кейін EFS файлдық жүйесін жасау процесі басталады. Процесс біраз уақытты алады. Орташа есеппен 2-3 минут. Сондықтан тиісті батырманы пайдаланып парақшаны мезгіл-мезгіл жаңартуымыз керек, немесе F5 түймесін пайдаланып бүкіл парақшаны жаңартсаңыз болады, кімге қалай ыңғайлы. EFS жасалғаннан кейін жасыл хабарландыру көресіз. Сондай-ақ, EFS файлдық жүйесінің күйі Available күйіне өзгергенін көресіз. Келесі тапсырмаға көшеміз. Енді EC2 инстансына SSH арқылы қосылуымыз керек. Ол үшін зертханалық жұмыстың негізгі парақшасында Details батырмасын басу керек. Қалқымалы тізімде Show батырмасын басыңыз. Бөлек қалқымалы терезе пайда болады. Мұнда Windows операциялық жүйесімен жұмыс істесеңіз, PPK жеке кілтін жүктеп алуымыз керек. Ал Mac OS не Linux OS пайдалансаңыз, PEM жеке кілтін жүктеп алуыңыз керек. Жүктеп алғаннан кейін PuTTY бағдарламасын ашуымыз керек. Егер ол сізде жоқ болса, оны зертханалық жұмыстағы сілтемеден жүктеп алуыңыз керек. Оны іздеу жүйесі арқылы тауып, бағдарламаны жүктеп алуға болады. Оны орнатудың қажеті жоқ. Оны іске қосқаннан кейін бірден пайдалануға болады. Мұнда бағдарламадағы сол жақ шарлау мәзіріндегі Credentials қойындысына өтуіміз керек. Ол негізгі Connection қойындысында, содан кейін SSH, содан кейін Auth. Және Credentials деп аталатын ең төменгі деңгейде қойындыны көресіз. Оны басайық. Үш өрісті көресіз. Бірінші - бізге қажет өріс, Private Key file for authentication. Browse... батырмасын басып, осы файлға жолды көрсету керек. Сол жақ шарлау мәзіріндегі Session қойындысын басыңыз. Жеке кілтке жолды үнемі көрсетудің қажеті болмас үшін осы қосылымды сақтау ұсынылады. Ол үшін Saved Sessions өрісінде жаңа қосылымның атын көрсету қажет. Мен aws-academy деп жаздым және Save батырмасын бастым. Әрі қарай, инстанстың жалпыға ортақ IP мекенжайын табуымыз керек. Сіз оны жеке кілт, IP EC2 инстансын жүктеп алған терезеде де көрдіңіз. Егер ол жерде көрсетілмесе, оны AWS Management Console табуға болады. Ол үшін EC2 сервисіне өтіп, сол жақ шарлау мәзіріндегі Instances қойындысын басыңыз. EFS Client деп аталатын бір инстансты көресіз. Оны таңдайық және осы инстанстың метадеректерінде жалпыға ортақ IP адресін көресіз. Оны сақтап, PuTTY программасында енгізу керек. Сондай-ақ, PuTTY программасын ашқан кезде сізге бар сессиялар тізімі ұсынылатынын көруге болады. Және бұл жағдайда aws-academy таңдап, Load батырмасын басу керек. Осыдан кейін барлық параметрлер, соның ішінде Жеке кілтке жол жүктеледі. Load батырмасын басып, сервердің IP мекенжайы бар өрісті толтырып, Open батырмасын басыңыз. Егер бұл бірінші қосылым болса, бұл қосылым қауіпті болуы мүмкін екенін көрсететін сәйкес хабарландыру пайда болады. Ал біз қай жерде қосылып жатқанымызды білеміз, сондықтан Accept батырмасын баса береміз. Әрі қарай өтеміз, қосылып жатқан пайдаланушы аты сұралады. EC2 ішіндегі Linux операциялық жүйелері үшін стандартты пайдаланушы ec2-user болып табылады. Оны енгізіп, Enter басайық. Мұны істегеннен кейін Welcome хабарын көресіз және командаларыңызды енгізуге болатын Prompt көресіз. Келесі тапсырмадан командаларды енгізуді бастайық. Бізге EFS папкасын жасау керек, ол үшін sudo mkdir efs деп енгіземіз. Папка жасалады. AWS Management Console оралып, EFS сервисіне ауысайық. Оны қалай жасау керектігін білесіз. Amazon EFS сервисінің негізгі парақшасына өткеннен кейін бір файлдық жүйені көресіз, оны таңдап, сол файлдық жүйенің мәліметтерін ашуыңыз керек. Сәйкесінше осы файлдық жүйенің парақшасы ашылады, қажет болуы мүмкін барлық метадеректер, ағымдағы күй, сонымен қатар жоғарғы оң жақта Attach батырмасын көресіз. Оны басайық, осы файлдық жүйені EC2 Instance-та орнату үшін әртүрлі команда опциялары бар қалқымалы терезені көресіз. Ол EFS үшін жеке толтырылған, оны көшіру қажет. Біз NFS Client үшін команданы пайдаланып жатырмыз, оны SSH сессиясына енгізуіміз керек. Енді sudo df командасын енгізып, файлдық жүйеге қосылу шынымен сәтті болғанын тексеруге болады. Барлық файлдық жүйелердің тізімі көрсетіледі, efs.us-east-1.amazonaws.com жолы бар екенін көресіз. Сондай-ақ, оның біздің папкада орнатылғанын көруге болады, ол /home/ec2-user/efs пайдаланушы және EFS папкасында орналасқан. Жақсы. Енді EFS жұмыс істеп тұрғанын тексеру үшін бірнеше команда енгізейік. Зертханалық жұмысты талдау сессиясында айтылған fio құралын қолданайық. Оған кіргеннен кейін процесс басталады, біздің EFS-де 10 гигабайт өлшемі бар файлды жасау үшін біраз уақыт қажет, шамамен 10 минут. Команда іске қосылғаннан кейін сынақты орындаудың егжей-тегжейлерін көресіз, бізді WRITE деп басталатын жол қызықтырады, io = 10240МБ екенін көреміз, яғни өлшемі 10 гигабайт файлды жасадық. Содан кейін agrb көреміз, бұл секундына жазған байттардың орташа саны, біздің жағдайда секундына 103 мегабайт. Сондай-ақ, minb және maxb үшін шамамен бірдей мәндерді көреміз, бұл сынақтарымызда байқалған минималды және максималды жазу жылдамдығы. Жақсы. Енді AWS Management Console-інен шынымен де осы жылдамдықта тасымалданғанымызды тексеру үшін CloudWatch сервисін қолданайық. Ол үшін сервис іздеу жолағына CloudWatch деп енгізуді бастаңыз, сонымен қатар осы атаудағы кез келген әріптер тізбегін енгізуге болады. Екі сөзден тұратын сервистер үшін мен әдетте екінші сөзден теруді бастаймын, бұл жағдайда бүкіл сөзді енгізудің қажеті жоқ болу ықтималдығы жоғары. Сондықтан wat деп жазсаңыз, қалаған сілтемені көресіз. Енді соған көшейік. CloudWatch сервисінің негізгі парақшасына өткеннен кейін, сол жақ шарлау мәзірінде Metrics таңдау керек, содан кейін All metrics қойындысын таңдау керек. Сәйкес парақшаға өтесіз, мұнда EFS-пен байланысты көрсеткіштерді таңдау керек, содан кейін File system metrics таңдаңыз және біздің файлдық жүйемізбен байланысты 8 түрлі көрсеткішті көресіз. PermittedThroughput метрикасын таңдайық, бұл мегабайттардың саны, біз EFS-ге қандай жылдамдықпен жазғанымызды көрсетеді. Оны таңдаған бойда график көрсетіледі, егер ол көрсетілмесе, 2-3 минут күтіңіз, содан кейін парақшаны жаңартыңыз. Сондай-ақ, тінтуірді диаграммадағы белгілі бір уақыт аралығын бөлектеу үшін пайдалануға болады және ол оны үлкейтеді. Біз графиктің тегіс екенін көреміз, жылдамдық өзгермеген, егер кез келген нүктені белгілесек, 104800 көреміз, бұл жазу жылдамдығы шамамен 105 мегабайт болғанын білдіреді. Егер көрсеткіштер тізіміне оралсақ және басқа көрсеткішті таңдасақ, біздің жағдайда DataWriteIOBytes және алдыңғысының құсбелгісін алып тастасақ, басқа график көрсетіледі. Graphed Metrics қойындысына өтіп, Statistic бағанына Sum, Period үшін 1 minute таңдап, парақшаның жоғарғы жағындағы бір сағатты таңдау керек, яғни соңғы сағаттың көрсеткіштерін көреміз. Сіз қандай да бір графикті көріп тұрсыз, ең жоғары мәнді таңдап көрейік, менде екі шың мәні бар, олар сәйкес келеді, мен кез келгенін таңдаймын және келесі мәнді көремін, бұл 6300000. Ол нені білдіреді? Бұл ең жоғары уақытта біз осынша килобайтты немесе 6 300 000 байтты бір минутта жазғанымызды білдіреді. Осы мақсатта Statistic ретінде Sum және Period - 1 minute, яғни байттағы кіріс-шығыс операцияларының санына қатысты барлық көрсеткіштер бір минутқа біріктіріледі, осы мәндердің барлығы жинақталады. Енді не істеуіміз керек? Жылдамдық секундына қандай болғанын көру үшін бұл мәнді 60-қа бөлуге болады. Нәтижесінде сіз SSH сессиясында сынақтар көрсеткендей 105 мегабайт аласыз. Жақсы, құттықтаймыз, зертханалық жұмыстағы барлық тапсырмаларды орындадық, енді бағалау процесін бастайық. Ол үшін Submit батырмасын басу керек, содан кейін бұл процесті шынымен бастағымыз келетінін сұрайтын хабарлама пайда болады, Yes батырмасын басыңыз және біраз уақыттан кейін барлық сынақтар орындалған кезде өз нәтижелерімізді көреміз. Менің жағдайымда 15 ұпайдан 15 ұпай жинадым, барлық тапсырмалар дұрыс орындалды, бағаланған үш тапсырманы көреміз. Естеріңізге саламын, егер максималды балл жинай алмасаңыз, қай тапсырмада қате болғанын қарап, оны қайта орындап, бағалау процесін қайта бастауға болады. Ешқандай айыппұл ұпайлары берілмейді, сондықтан қайтадан өтсеңіз, жаңартылған ұпайды көресіз. Бұл жағдайда зертханалық жұмыстарды тоқтатудың қажеті жоқ. Осымен зертханалық жұмысымызды аяқтаймыз, барлық жүйелерден дұрыс шығуымыз керек. AWS Management Console бастайық, жоғарғы оң жақта пайдаланушы атын басамыз, содан кейін ашылмалы тізімде Sign out батырмасын басып, AWS Management Console шығыңыз. Содан кейін зертханалық жұмыс парақшасына ораламыз, мұнда да осы зертханалық жұмысты сәтті аяқтау керек, сондықтан End lab батырмасын басу керек. Зертханалық жұмысты аяқтағымыз келетінін растаймыз және бұл парақшаны жабуға болатындығы туралы хабарды көргенде, ресурстарды жою процесі басталған кезде, осы парақшаны және зертханалық жұмыстың бүкіл парақшасын жабуға болады. Осымен сіз EFS сервисін жақсырақ түсіндіңіз деп үміттенемін. Сұрақтарыңыз болса, сұраңыз. Назарларыңызға рахмет, келесі белсенділіктерде кездескенше!