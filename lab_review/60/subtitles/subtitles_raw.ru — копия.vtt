WEBVTT

00:00:00.000 --> 00:00:07.000
Добрый день, уважаемые студенты! Я рад вас видеть на очередной сессии разбора лабораторной работы.

00:00:07.000 --> 00:00:15.000
Тема лабораторной работы – это знакомство с сервисом Amazon Elastic File System или вкратце Amazon EFS.

00:00:15.000 --> 00:00:17.000
Итак, давайте начнем.

00:00:19.000 --> 00:00:25.000
Начинаем мы с вами лабораторную работу с основной страницы лабораторной работы VWS Academy.

00:00:25.000 --> 00:00:38.000
Для этого необходимо нажать на кнопку Start Lab. В всплывающем окне вы увидите состояние лабораторной работы и в начале он будет в состоянии In Creation.

00:00:38.000 --> 00:00:46.000
Как только она перейдет в состояние Ready, вы можете закрывать это всплывающее окно и переходить в AWS Management Console.

00:00:46.000 --> 00:00:51.000
Для этого необходимо там же возле кнопки Start Lab нажать на кнопку AWS.

00:00:51.000 --> 00:00:59.000
Как только мы перешли на главную страницу AWS Management Console, мы можем начать выполнение наших заданий.

00:00:59.000 --> 00:01:03.000
Первое задание необходимо создать Security группу.

00:01:03.000 --> 00:01:08.000
Для этого необходимо в строке поиска сервисов начать вводить EC2.

00:01:08.000 --> 00:01:22.000
В строке выдачи выбрать нужный нам сервис и на главной странице сервиса EC2 в левом навигационном меню нажать на вкладку Security Groups.

00:01:22.000 --> 00:01:29.000
Как только вы на нее нажмете, вы увидите список существующих Security Group в этом AWS аккаунте.

00:01:29.000 --> 00:01:35.000
Давайте выберем Security группу с названием EFS Client.

00:01:35.000 --> 00:01:44.000
Скопируем ее Security Group ID, она нам понадобится и нажмем на кнопку Create Security Group.

00:01:44.000 --> 00:01:53.000
Как только мы ее нажмем, мы перейдем на страницу создания Security группы.

00:01:53.000 --> 00:01:55.000
Здесь необходимо будет вести некоторые данные.

00:01:55.000 --> 00:01:59.000
Первым делом необходимо указать Security группный.

00:01:59.000 --> 00:02:03.000
Давайте сюда напишем EFS Mount Target согласно заданию.

00:02:03.000 --> 00:02:08.000
Как description напишем Inbound NFC access from EFS Clients.

00:02:08.000 --> 00:02:13.000
И как VPC выберем Lab VPC.

00:02:13.000 --> 00:02:19.000
Ниже в секции Inbound Rules необходимо будет нажать на кнопку Add Rule.

00:02:19.000 --> 00:02:24.000
Появится строчка, здесь необходимо будет как Type выбрать NFC.

00:02:24.000 --> 00:02:29.000
Автоматически вставится протокол TCP, Port Range 2049, то что нам нужно.

00:02:29.000 --> 00:02:32.000
И как Source необходимо выбрать Custom.

00:02:32.000 --> 00:02:36.000
Как только вы это сделаете, активируется следующее поле.

00:02:36.000 --> 00:02:43.000
И там необходимо будет вставить ID Security группы.

00:02:43.000 --> 00:02:51.000
Либо прокрутить в выпадающем списке и найти нужную нам Security группы с именем EFS Client.

00:02:51.000 --> 00:03:00.000
Как только мы это сделаем, необходимо прокрутить до конца страницы и нажать на кнопку Create Security Group.

00:03:00.000 --> 00:03:04.000
Мы готовы к созданию EFS файловой системы.

00:03:04.000 --> 00:03:07.000
Для этого необходимо перейти на этот сервис.

00:03:07.000 --> 00:03:15.000
Давайте начнем вводить EFS в строку поиска сервисов и перейдем на этот сервис.

00:03:15.000 --> 00:03:21.000
Мы окажемся на основной странице сервиса EFS.

00:03:21.000 --> 00:03:27.000
Так как в этом AWS аккаунте не имеется созданных файловых систем.

00:03:27.000 --> 00:03:36.000
Вы увидите страницу с видеоматериалом, с небольшой информацией об этом сервисе.

00:03:36.000 --> 00:03:38.000
Также будет кнопка Create File System.

00:03:38.000 --> 00:03:40.000
Давайте на нее нажмем.

00:03:40.000 --> 00:03:43.000
Увидите следующую страницу.

00:03:43.000 --> 00:03:51.000
Здесь нам необходимо будет нажать на кнопку Customize, чтобы открыть расширенные настройки создания файловой системы.

00:03:51.000 --> 00:03:53.000
Она состоит из четырех шагов.

00:03:53.000 --> 00:04:01.000
В первом шаге нам необходимо будет для поля Enable Automatic Backups галочку убрать.

00:04:01.000 --> 00:04:08.000
Для Lifecycle Management нужно будет выбрать опцию None и прокрутить вниз страницы.

00:04:08.000 --> 00:04:19.000
Здесь как ключ тега Name необходимо будет указать значение My First EFS File System и нажать на кнопку Next.

00:04:19.000 --> 00:04:23.000
Мы окажемся на второй странице.

00:04:23.000 --> 00:04:27.000
Здесь необходимо будет как VPC выбрать Lab VPC.

00:04:27.000 --> 00:04:34.000
Вы увидите, что создается Mount Target для каждой Availability зоны.

00:04:34.000 --> 00:04:37.000
Так как в Lab VPC у нас две Availability зоны.

00:04:37.000 --> 00:04:42.000
Мы увидим US East 1A и US East 1B.

00:04:42.000 --> 00:04:46.000
Также вы увидите, что привязаны Security группы дефолтные.

00:04:46.000 --> 00:04:52.000
Они нам не нужны, поэтому необходимо будет нажать на кнопку X для каждой из Security группы.

00:04:52.000 --> 00:05:00.000
И после чего для каждой Availability зоны выбрать Security группу, созданную нами ранее.

00:05:00.000 --> 00:05:03.000
Она называется EFS Mount Target.

00:05:03.000 --> 00:05:08.000
Как только вы ее выбрали, необходимо будет нажать на кнопку Next.

00:05:08.000 --> 00:05:11.000
На третьей странице мы ничего менять не будем.

00:05:11.000 --> 00:05:13.000
Оставляем все по умолчанию.

00:05:13.000 --> 00:05:15.000
Еще раз нажимаем на кнопку Next.

00:05:15.000 --> 00:05:20.000
На четвертой странице мы видим все введенные нами входные данные.

00:05:20.000 --> 00:05:26.000
Необходимо будет прокрутить саму нисть страницы и нажать на кнопку Create.

00:05:26.000 --> 00:05:32.000
Как только вы это сделали, начнется процесс создания EFS файловой системы.

00:05:32.000 --> 00:05:34.000
Она занимает некоторое время.

00:05:34.000 --> 00:05:36.000
В среднем это 2-3 минуты.

00:05:36.000 --> 00:05:42.000
Поэтому нам необходимо будет периодически обновлять страницу, используя соответствующую кнопку.

00:05:42.000 --> 00:05:46.000
Либо обновлять всю страницу, используя кнопку F5.

00:05:46.000 --> 00:05:47.000
Кому как удобнее.

00:05:51.000 --> 00:05:58.000
Как только EFS создастся, вы увидите соответствующее сообщение в зеленом уведомлении.

00:05:58.000 --> 00:06:07.000
А также увидите, что состояние статус EFS файловой системы сменился на Available.

00:06:09.000 --> 00:06:11.000
Мы с вами переходим к следующему заданию.

00:06:11.000 --> 00:06:16.000
Теперь нам нужно подключиться к EC2 инстанцию через SSH.

00:06:16.000 --> 00:06:22.000
Для этого на основной странице лаборатурной работы необходимо будет нажать на кнопку Details.

00:06:22.000 --> 00:06:25.000
В всплывающем списке нажать на кнопку Show.

00:06:25.000 --> 00:06:28.000
Отобразится отдельное всплывающее окно.

00:06:28.000 --> 00:06:35.000
И здесь нам необходимо будет скачать PPK Private Key.

00:06:35.000 --> 00:06:40.000
Если вы работаете с Windows операционной системой.

00:06:40.000 --> 00:06:46.000
Если же вы используете MacOS либо Linux операционную систему.

00:06:46.000 --> 00:06:53.000
В вашем случае нужно будет скачать PEM Private Key, который находится рядом.

00:06:54.000 --> 00:06:59.000
Как только мы скачали, нам необходимо будет открыть программу PuTTY.

00:06:59.000 --> 00:07:05.000
Если ее у вас нет, вам нужно будет ее скачать по ссылке в лаборатурной работе.

00:07:05.000 --> 00:07:10.000
Вы можете найти через поисковик и скачать эту программу.

00:07:10.000 --> 00:07:12.000
Устанавливать ее не нужно.

00:07:12.000 --> 00:07:16.000
Как только вы ее запускаете, она сразу доступна к работе.

00:07:17.000 --> 00:07:24.000
Здесь нам необходимо будет в программе в левом навигационном меню добраться до вкладки Credentials.

00:07:24.000 --> 00:07:30.000
Она находится в основной вкладке Connection, далее SSH, дальше ALF.

00:07:30.000 --> 00:07:35.000
После этого вы увидите вкладку в самом нижнем уровне Credentials.

00:07:35.000 --> 00:07:38.000
Давайте на нее нажмем. Вы увидите три поля.

00:07:38.000 --> 00:07:40.000
Первое поле, это то поле, которое нас интересует.

00:07:40.000 --> 00:07:43.000
Private Key, File for Authentication.

00:07:43.000 --> 00:07:49.000
Необходимо будет нажать на браузер и далее указать путь до этого файла.

00:07:49.000 --> 00:07:54.000
И нажать на вкладку Session в левом навигационном меню.

00:07:54.000 --> 00:08:07.000
Как только вы окажете здесь, рекомендуется сохранить это подключение, чтобы постоянно не указывать путь до Private Key.

00:08:07.000 --> 00:08:15.000
Для этого в поле Saved Sessions необходимо будет задать название нового подключения.

00:08:15.000 --> 00:08:25.000
Я написал AWS Academy и нажал на кнопку Save.

00:08:25.000 --> 00:08:31.000
Далее нам необходимо будет найти Public IP-адрес нашего инстанца.

00:08:31.000 --> 00:08:40.000
Вы также ее видели в окне, где вы скачивали Private Key, IP и ситу инстанца.

00:08:40.000 --> 00:08:45.000
Если она там не отображается, вы можете ее найти в AWS Management Console.

00:08:45.000 --> 00:08:52.000
Для этого необходимо перейти в сервис EC2, в левом навигационном меню нажать на вкладку Instances.

00:08:52.000 --> 00:08:56.000
И вы увидите один единственный инстанс, называется EFS Client.

00:08:56.000 --> 00:09:04.000
Давайте ее выберем и в метаданных этого инстанца вы увидите Public IP-адрес.

00:09:04.000 --> 00:09:12.000
Необходимо будет ее сохранить и дальше уже ввести в PUTTI.

00:09:12.000 --> 00:09:22.000
Здесь также вы видите, что при открытии программы PUTTI у вас отображается список существующих сессий.

00:09:22.000 --> 00:09:27.000
И в этом случае необходимо будет выбрать AWS Academy и нажать на кнопку Load.

00:09:27.000 --> 00:09:33.000
После этого загрузятся все настройки, в том числе и путь до Private Key.

00:09:33.000 --> 00:09:45.000
Как только вы нажали на кнопку Load, вам необходимо будет заполнить поле с IP-адресом сервера и далее нажать на кнопку Open.

00:09:45.000 --> 00:09:54.000
Как только вы ее нажмете, если это первое подключение, то выйдет соответствующее уведомление о том, что это подключение может быть небезопасным.

00:09:54.000 --> 00:09:59.000
В нашем случае мы знаем, куда мы подключаемся, поэтому нажимаем на кнопку Accept.

00:09:59.000 --> 00:10:08.000
Нас пускает дальше и у вас запросит имя пользователя, под которым вы подключаетесь.

00:10:08.000 --> 00:10:15.000
Для Linux операционных систем внутри EC2 стандартным пользователем является EC2 Dash User.

00:10:15.000 --> 00:10:17.000
Давайте ее введем, нажмем Enter.

00:10:17.000 --> 00:10:25.000
Как только вы это сделаете, вы увидите Welcome сообщение и увидите Prompt, где вы уже можете вводить ваши команды.

00:10:25.000 --> 00:10:30.000
Давайте начнем вводить команды из следующего задания.

00:10:30.000 --> 00:10:35.000
Нам необходимо создать папку EFS, для этого введем sudo mkdir efs.

00:10:35.000 --> 00:10:36.000
Папка создается.

00:10:36.000 --> 00:10:43.000
Далее нам необходимо будет вернуться в AWS Management консоль, перейти на сервис EFS.

00:10:43.000 --> 00:10:45.000
Как это сделать вы уже знаете.

00:10:45.000 --> 00:11:03.000
Как только вы перейдете на основную страницу сервиса Amazon EFS, вы увидите одну единственную файловую систему, необходимо будет ее выбрать и провалиться в детали этой файловой системы.

00:11:03.000 --> 00:11:14.000
Откроется соответственно страница этой файловой системы, все метаданные, которые нам могут понадобиться, текущее состояние, а также вверху справа вы увидите кнопку Attach.

00:11:14.000 --> 00:11:28.000
Давайте на нее нажмем, вы увидите всплывающее окно с различными вариантами команд для монтирования этой файловой системы в EC2 Instance.

00:11:28.000 --> 00:11:33.000
Оно персонально уже заполнено для вашего EFS, вам достаточно скопировать ее.

00:11:33.000 --> 00:11:43.000
В нашем случае мы используем команду для NFS клиента и необходимо будет ее ввести в наши SSH сессии.

00:11:43.000 --> 00:11:58.000
Как только вы это сделаете, можно будет проверить, действительно ли подключение к файловой системе прошло успешно путем ввода команды sudo df.

00:11:58.000 --> 00:12:14.000
Как только вы это сделаете, отобразится список всех файловых систем, вы увидите, что есть строчка, которая содержит EFS.useastone.amazon.aws.com

00:12:14.000 --> 00:12:29.000
Также вы видите, что он примонтирован к нашей папке, она находится по пути home, EC2 User наш пользователь и папка EFS.

00:12:29.000 --> 00:12:30.000
Отлично.

00:12:30.000 --> 00:12:42.000
Давайте теперь введем несколько команд для того, чтобы проверить работоспособность EFS.

00:12:42.000 --> 00:12:50.000
Воспользуемся инструментом FIO, про который мы говорили в обзоре лабораторной работы.

00:12:50.000 --> 00:13:02.000
И мы ее введем, начнется процесс, она займет некоторое время, порядка 10 минут, для того, чтобы создать файл размером 10 гигабайтов в нашем EFS.

00:13:02.000 --> 00:13:20.000
Как только отработает команда, вы увидите детали запуска этого теста, нас интересует строчка, которая начинается на write, мы видим, что IE равно 10240 мегабайтов, то есть мы создали файл размером 10 гигабайтов.

00:13:20.000 --> 00:13:36.000
Далее мы видим agrb, это среднее количество байтов, которые мы записывали в секунду, в нашем случае это 103 мегабайта в секунду.

00:13:36.000 --> 00:13:50.000
Примерно те же значения мы видим для minb и maxb, это минимальная и максимальная скорость записи, которая была во время наших тестов.

00:13:50.000 --> 00:13:51.000
Отлично.

00:13:51.000 --> 00:14:02.000
Давайте теперь воспользуемся сервисом CloudWatch для того, чтобы проверить, действительно ли мы с такой скоростью передавали, что мы можем увидеть из AWS Management Console.

00:14:02.000 --> 00:14:12.000
Для этого в строке поиска сервисов начнем вводить CloudWatch, можете также вводить любую последовательность букв в рамках этого названия.

00:14:12.000 --> 00:14:23.000
Я обычно для сервисов состоящих из двух слов начинаю вводить со второго слова, в этом случае большая вероятность того, что не придется вводить целиком все слово.

00:14:23.000 --> 00:14:27.000
Поэтому если написать what, вы увидите нужную ссылку.

00:14:27.000 --> 00:14:29.000
Давайте на нее перейдем.

00:14:29.000 --> 00:14:39.000
Как только вы окажетесь на основной странице CloudWatch, в левом навигационном меню нужно будет выбрать metrics и дальше выбрать вкладку all metrics.

00:14:39.000 --> 00:14:54.000
Перейдете на соответствующую страницу, здесь необходимо будет выбрать метрики, связанные с EFS, далее выбрать file system metrics и вы увидите 8 различных метрик, связанных с нашей файловой системой.

00:14:54.000 --> 00:15:06.000
Давайте выберем метрику permitted throughput, это какое количество мегабайтов, с какой скоростью мы записывали на наш EFS.

00:15:06.000 --> 00:15:13.000
Как только вы ее выберете отобразится график, если он не отобразился, подождите 2-3 минуты, после этого обновите страницу.

00:15:13.000 --> 00:15:20.000
Вы можете также мышкой выделить определенный период времени на графике и он ее приблизит.

00:15:20.000 --> 00:15:46.000
Как только мы это сделаем, мы видим, что график ровный, скорость она не менялась, если навести на любую точку, мы видим она нам показывает 104800, это значит примерно 105 мегабайтов была скорость записи.

00:15:46.000 --> 00:16:05.000
Если мы перейдем обратно на список metrics и выберем уже другую метрику, в нашем случае data right iobytes, и уберем галочку с предыдущей, то отобразится другой график.

00:16:05.000 --> 00:16:22.000
Здесь нам необходимо будет перейти на вкладку Graphs Metrics, для столца статистик выбрать сумм, для период выбрать минут, и в верхней части страницы выбрать один час, то есть мы увидим метрики за последний час.

00:16:22.000 --> 00:16:38.000
Вы видите некоторый график, давайте попробуем выбрать пиковое значение, у меня два пиковых значения не совпадают, выбираю любую и вижу следующее значение, это 6300000.

00:16:38.000 --> 00:16:54.000
Что оно значит? Оно значит, что в пиковое время мы записали такое количество килобайтов или 6300000 байтов за одну минуту.

00:16:54.000 --> 00:17:15.000
Для этого как раз таки мы как статистик выбирали сумм и как период минут, то есть все те метрики, которые пришли связанные с количеством input output операции в байтах, они агрегируются до одной минуты и все эти значения они суммируются.

00:17:15.000 --> 00:17:25.000
Теперь что нам необходимо сделать? Мы это значение можем поделить на 60 для того, чтобы посмотреть какая скорость была в секунду.

00:17:25.000 --> 00:17:38.000
Если вы это сделаете, то вы получите значение те же 105 мегабайтов, которые показали наши тесты в SSH сессии.

00:17:38.000 --> 00:17:49.000
Отлично, я вас поздравляю, мы завершили все задания в рамках лабораторной работы, теперь попробуем запустить процесс оценивания.

00:17:49.000 --> 00:18:06.000
Для этого необходимо нажать на кнопку submit, далее выйдет сообщение о том, что действительно ли мы хотим запустить этот процесс, нажимаем yes и через какое-то время, когда отработают все тесты, мы увидим наши результаты.

00:18:06.000 --> 00:18:14.000
В моем случае я набрал 15 баллов из 15, все задания были выполнены корректно, мы видим три задания, которые оценивались.

00:18:14.000 --> 00:18:28.000
Я напоминаю, что если вы набрали не максимальный балл, вы можете посмотреть в каком задании была ошибка, ее выполнить еще раз и запустить процесс оценивания еще раз.

00:18:28.000 --> 00:18:36.000
Никаких штрафных баллов не выдается, поэтому в случае успешного выполнения вы увидите обновленную оценку.

00:18:36.000 --> 00:18:42.000
Останавливать лабораторную работу в этом случае нет необходимости.

00:18:42.000 --> 00:19:01.000
Отлично, на этом мы завершаем, нам необходимо выйти правильно со всех систем, начнем с AWS Management Console, в верхней правой части нажмем на название пользователя, дальше в выпадающем списке нажмем на кнопку sign out и выйдем с AWS Management Console.

00:19:01.000 --> 00:19:12.000
Дальше возвращаемся на страницу лабораторной работы, здесь необходимо также успешно завершить эту лабораторную работу, поэтому необходимо нажать на кнопку end lab.

00:19:12.000 --> 00:19:30.000
Мы подтверждаем, что мы хотим завершить лабораторную работу и как только вы увидите сообщение о том, что мы можем закрывать эту страницу, что процесс удаления ресурсов инициирован, вы можете закрыть эту страницу и закрыть всю страницу с лабораторной работы.

00:19:30.000 --> 00:19:46.000
На этом я очень надеюсь, что вы получили более полное представление о сервисе EFS. Если будут вопросы, вы эти вопросы задавайте. Спасибо за внимание, увидимся с вами на следующих наших активностях.