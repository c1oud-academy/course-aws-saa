Добрый день, уважаемые студенты! Рад вас видеть на очередной сессии разбора лабораторной работы. Тема сегодняшней лабораторной работы – создание VPC Peering Connection. Итак, давайте начнем. Начинаем мы с вами разбор лабораторной работы с главной страницы AWS Management Console. Здесь в рамках первого задания нам необходимо перейти в сервис VPC. Для этого мы можем воспользоваться строкой поиска сервисов и начать вводить VPC. Нужная ссылка будет первая в выдаче. Как только мы перейдем на сервис VPC, здесь необходимо воспользоваться навигационным меню слева и выбрать опцию Peering Connections. Здесь мы не увидим созданные Peering Connections, нам необходимо создать новый. Для этого вверху справа необходимо нажать на кнопку Create Peering Connection. Как только мы на нее нажмем, нас направят на страницу ввода входных данных. Здесь необходимо будет как Name указать Lab-Peer. Далее, как VPC ID Requester необходимо будет указать Lab VPC. Далее необходимо будет прокрутить страницу чуть ниже. И как VPC ID Accepter необходимо выбрать Shared VPC. После чего в нижней части страницы необходимо будет нажать на кнопку Create Peering Connections. Нас направят на основную страницу ресурса Peering Connections и здесь мы с вами увидим, что необходимо подтвердить создание Peering Connections в соответствующем сообщении. Давайте это проделаем. Необходимо нажать на кнопку Actions, далее выбрать опцию Accept Request. Мы находимся в одном и том же аккаунте. Вы видите, аккаунт ID для Requester и Accepter совпадают. Также вы видите, что Requester ID у нас Lab VPC, а Accepter у нас Shared VPC. Все верно, мы можем принимать предложение. Поэтому нажимаем на кнопку Accept Request. Как только мы на нее нажмем, нас направят на страницу со списком Peering Connections, мы увидим Lab-Peer и также увидим, что статус Active. Мы переходим ко второй части нашей лабораторной работы и здесь необходимо настроить Route Table. Для этого в навигационном меню слева необходимо выбрать опцию Route Tables. Нас направят на соответствующую страницу. Здесь необходимо будет найти Lab Public Route Table. Необходимо его выбрать. В нижней части страницы отобразятся метаданные в нескольких разных вкладках. Нас интересует вкладка Routes. Мы видим, что у нас есть два routes. Необходимо создать дополнительный для Peering Connections. Для этого нажимаем на кнопку Edit Routes. Здесь отображаются все существующие Route Tables. Первый дефолтовый, второй для выхода в интернет через Internet Gateway. И для третьего необходимо нажать на кнопку Add Route. Далее ввести CIDR блок Shared VPC и как Target указать Peering Connections ID. После чего мы можем сохранить изменения. Все те же изменения необходимо произвести для Shared VPC Route Table. Необходимо его выбрать. На странице с деталями необходимо выбрать вкладку Routes и нажать на кнопку Edit Routes. Мы видим, что для этого Route Table есть только дефолтовый route. Здесь необходимо будет нажать на кнопку Add Route. Для Destination необходимо будет указать Lab VPC CIDR блок и как Target указываем все тот же Peering Connections ID. И сохраняем изменения. После чего мы завершаем настройку Route Tables и можем переходить к третьему заданию. Мы с вами переходим к третьему заданию и здесь будем проверять Peering Connections. Переходим в сервис EC2, можем воспользоваться строкой поиска сервисов и начать вводить EC2. В выдаче первая ссылка - это та ссылка, которая нам нужна. Как только мы оказались на основной странице сервиса EC2, нам необходимо воспользоваться навигационным меню слева и выбрать пункт Instances. Здесь вы увидите один единственный инстанс. Необходимо будет его выбрать и в метаданных найти его публичный IP адрес. Давайте его скопируем и откроем в новой вкладке в браузере. Мы видим, что выходит сообщение, что необходимо сконфигурировать подключение к базе данных. Давайте это проделаем и нажмем на кнопку Settings. Здесь нам необходим будет Endpoint базы данных. Для этого возвращаемся в AWS Management Console и переходим в сервис Amazon RDS. Как вы видите, здесь у нас один единственный инстанс, который нас интересует. Давайте откроем основную страницу этого ресурса и в первой вкладке Connectivity and Security мы можем найти Endpoint этой базы данных. Давайте его скопируем и вставим в поле Endpoint. Также необходимо заполнить поля Database, Username и Password. После чего необходимо нажать на кнопку Save. Как только мы на нее нажмем, отобразятся записи из базы данных. Если вы увидели эти записи, поздравляю, мы все настроили корректно и увидели данные с базы данных. А эта база данных находится в абсолютно другом VPC. Как вы помните, у Shared VPC не настроен выход в интернет. В Route Table не было Route Table, который выходит в интернет через Internet Gateway. Поэтому единственная возможность добраться до данных в базе данных - это через Peering Connection. Мы завершили все задания. Теперь нам необходимо запустить скрипты автооценивания. Для этого возвращаемся на основную страницу лабораторной работы и нажимаем на кнопку Submit. Нам необходимо подтвердить, что мы хотим запустить эти скрипты и через некоторое время мы увидим наши набранные баллы. Если вы набрали максимальный балл из возможных, отлично, поздравляю, вы выполнили все корректно. Если же балл не максимальный, вы можете в нижней части в списке посмотреть, в каком задании у вас не хватает баллов и попробовать выполнить его еще раз. После того, как вы завершили лабораторную работу, необходимо корректно выйти со всех систем. В первую очередь это относится к AWS Management Console. Для этого необходимо в верхней правой части нажать на имя пользователя и в выпадающем списке нажать на кнопку Sign Out. Также нам необходимо корректно завершить лабораторную работу, чтобы не было проблем с запуском следующей лабораторной работы. Для этого необходимо на странице лабораторной работы нажать на кнопку End Lab, чтобы увидеть, что мы завершаем лабораторную работу и увидеть сообщение, что мы можем закрывать эту вкладку. На этом мы завершаем разбор лабораторной работы. Если будут вопросы, обращайтесь. Спасибо за внимание. Увидимся с вами на следующих наших активностях.