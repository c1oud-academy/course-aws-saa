 Добрый день, уважаемые студенты! Я рад вас всех видеть на очередной сессии разбора лабораторной работы. Тема сегодняшней лабораторной работы – создание VPC Peering Connection. Итак, давайте начнем. Начинаем мы с вами разбор лабораторной работы с главной страницы AWS Management Console. Здесь в рамках первого задания нам необходимо перейти в сервис VPC. Для этого мы можем воспользоваться строкой поиска сервисов и начать вводить VPC. Нужная ссылка будет первая в выдаче. Как только мы перейдем на сервис VPC, здесь необходимо воспользоваться навигационным меню слева и выбрать опцию Peering Connections. Здесь мы не увидим созданные Peering Connections, нам необходимо создать новый. Для этого вверху справа необходимо нажать на кнопку Create Peering Connection. Как только мы на нее нажмем, нас направят на страницу ввода входных данных. Здесь необходимо будет как name указать lab.peer. Далее как VPC ID Requester необходимо будет указать lab.vpc. Далее необходимо будет прокрутить страницу чуть ниже. И как VPC ID Acceptor необходимо выбрать shared VPC. После чего в нижней части страницы необходимо будет нажать на кнопку Create Peering Connections. Нас направят на основную страницу ресурса Peering Connections и здесь мы с вами увидим, что необходимо подтвердить создание Peering Connections в соответствующем сообщении. Давайте это проделаем. Для этого необходимо нажать на кнопку Actions, далее выбрать опцию Accept Request. Мы находимся в одном и том же аккаунте. Вы видите, аккаунт ID для Requestor и Acceptor совпадают. Также вы видите, что Requestor ID у нас lab.vpc, а Acceptor у нас shared VPC. Все верно, мы можем принимать предложение. Поэтому нажимаем на кнопку Accept Request. Как только мы на нее нажмем, нас направят на страницу со списком Peering Connections, мы увидим lab.peer и также увидим, что статус Active. Мы с вами переходим ко второй части нашей лабораторной работы и здесь необходимо настроить Root Table. Для этого в навигационном меню слева необходимо выбрать опцию Root Tables. Нас направят на соответствующую страницу. Здесь необходимо будет найти Lab Public Root Table. Необходимо его выбрать. В нижней части страницы отобразятся метаданные в нескольких разных вкладках. Нас интересует вкладка Roots. Мы видим, что у нас есть два роута. Необходимо создать дополнительный для Peering Connections. Для этого нажимаем на кнопку Edit Roots. Здесь отображаются все существующие Root Tables. Первый дефолтовый, второй для выхода в интернет через интернет Gateway. И для третьего необходимо нажать на кнопку Add Root. Далее ввести CIDR блок shared VPC и как таргет указать Peering Connections ID. После чего мы можем сохранить изменения. Все те же изменения необходимо произвести для shared VPC Root Table. Необходимо его выбрать. На странице с деталями необходимо выбрать вкладку Roots и нажать на кнопку Edit Roots. Мы видим, что для этого Root Table есть только дефолтовый роут. Здесь необходимо будет нажать на кнопку Add Root. Для destination необходимо будет указать Lab VPC CIDR Блок и как таргет указываем все тот же Peering Connections ID. И сохраняем изменения. После чего мы завершаем настройку Root Tables и можем переходить к третьему заданию. Мы с вами переходим к третьему заданию и здесь будем проверять Peering Connections. Для этого переходим в сервис EC2, можем воспользоваться строкой поиска сервисов и начать вводить EC2. К выдаче первая ссылка это та ссылка, которая нам нужна. Как только мы оказались на основной странице сервиса EC2, нам необходимо воспользоваться навигационным меню слева и выбрать пункт Instances. Здесь вы увидите один единственный Инстанс. Необходимо будет его выбрать и в метаданных найти его публичный IP-адрес. Давайте его скопируем и откроем в новой вкладке в браузере. Мы видим, что выходит сообщение, что необходимо сконфигурировать подключение к базе данных. Давайте это проделаем и нажмем на кнопку Settings. Здесь нам необходим будет Endpoint базы данных. Для этого возвращаемся в AWS Management Console и переходим в сервис RDS. Как вы видите, здесь у нас один единственный Инстанс. Он нас интересует. Давайте откроем основную страницу этого ресурса и в первой вкладке Connectivity and Security мы можем найти Endpoint этой базы данных. Давайте его скопируем и ставим в поле Endpoint. Также необходимо заполнить поля Database, Username и Password. После чего необходимо нажать на кнопку Save. Как только мы на нее нажмем, нам отобразятся записи из базы данных. Если вы увидели эти записи, я вас поздравляю, мы все настроили корректно и увидели данные с базы данных. А эта база данных находится в абсолютно другом VPC. Как вы помните, у Share-VPC не настроен выход в интернет. В Root Table не было Root Table, который выходит в интернет через интернет Gateway. Поэтому единственная возможность добраться до данных в базе данных это через Peering Connection. Мы завершили все задания. Теперь нам необходимо запустить скрипты автооценивания. Для этого возвращаемся на основную страницу лабораторной работы и нажимаем на кнопку Submit. Нам необходимо подтвердить, что мы хотим запустить эти скрипты и через некоторое время мы увидим наши набранные баллы. Если вы набрали максимальный балл из возможных, отлично, я вас поздравляю, вы выполнили все корректно. Если же балл не максимальный, вы можете в нижней части в списке посмотреть, в каком задании у вас не хватает баллов и попробовать выполнить его еще раз. После того, как вы завершили лабораторную работу, необходимо корректно выйти со всех систем. В первую очередь это относится к AWS Management Console. Для этого необходимо в верхней правой части нажать на имя пользователя и в выпадающем списке нажать на кнопку Sign Out. Также нам необходимо корректно завершить лабораторную работу, чтобы не было проблем с запуском следующей лабораторной работы. Для этого необходимо на странице с лабораторной работы нажать на кнопку End Lab, чтобы увидеть, что мы завершаем лабораторную работу и увидеть сообщение, что мы можем закрывать эту вкладку. На этом мы завершаем разбор лабораторной работы. Если будут вопросы, обращайтесь. Спасибо за внимание. Увидимся с вами на следующих наших активностях.
