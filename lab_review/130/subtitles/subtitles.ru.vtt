WEBVTT

00:00:00.000 --> 00:00:06.000
Добрый день, уважаемые студенты! Рад вас видеть
на очередной сессии разбора лабораторной работы.

00:00:06.000 --> 00:00:13.000
Тема сегодняшней лабораторной работы – создание
VPC Peering Connection. Итак, давайте начнем.

00:00:13.000 --> 00:00:20.000
Начинаем мы с вами разбор лабораторной работы 
с главной страницы AWS Management Console.

00:00:20.000 --> 00:00:25.000
Здесь в рамках первого задания
нам необходимо перейти в сервис VPC.

00:00:25.000 --> 00:00:28.488
Для этого мы можем воспользоваться
строкой поиска сервисов

00:00:28.512 --> 00:00:32.000
и начать вводить VPC.
Нужная ссылка будет первая в выдаче.

00:00:32.000 --> 00:00:37.215
Как только мы перейдем на сервис
VPC, здесь необходимо воспользоваться

00:00:37.239 --> 00:00:42.000
навигационным меню слева и
выбрать опцию Peering Connections.

00:00:42.000 --> 00:00:46.988
Здесь мы не увидим созданные Peering
Connections, нам необходимо создать новый.

00:00:47.012 --> 00:00:52.000
Для этого вверху справа необходимо
нажать на кнопку Create Peering Connection.

00:00:52.000 --> 00:00:56.164
Как только мы на нее нажмем,
нас направят на страницу ввода

00:00:56.188 --> 00:01:01.000
входных данных. Здесь необходимо
 будет как Name указать Lab-Peer.

00:01:01.000 --> 00:01:06.488
Далее, как VPC ID Requester
необходимо будет указать Lab VPC.

00:01:06.512 --> 00:01:12.000
Далее необходимо будет
прокрутить страницу чуть ниже.

00:01:12.000 --> 00:01:17.230
И как VPC ID Accepter необходимо выбрать 
Shared VPC. После чего в нижней

00:01:17.254 --> 00:01:23.000
части страницы необходимо будет
нажать на кнопку Create Peering Connections.

00:01:23.000 --> 00:01:32.988
Нас направят на основную страницу ресурса
Peering Connections и здесь мы с вами увидим,

00:01:33.012 --> 00:01:43.000
что необходимо подтвердить создание Peering
Connections в соответствующем сообщении.

00:01:43.000 --> 00:01:49.000
Давайте это проделаем. Необходимо нажать на
кнопку Actions, далее выбрать опцию Accept Request.

00:01:49.000 --> 00:01:55.988
Мы находимся в одном и том же аккаунте.
Вы видите, аккаунт ID для Requester и Accepter

00:01:56.012 --> 00:02:03.000
совпадают. Также вы видите, что Requester
ID у нас Lab VPC, а Accepter у нас Shared VPC.

00:02:03.000 --> 00:02:09.000
Все верно, мы можем принимать предложение.
Поэтому нажимаем на кнопку Accept Request.

00:02:09.000 --> 00:02:16.139
Как только мы на нее нажмем, нас
направят на страницу со списком Peering

00:02:16.163 --> 00:02:23.000
Connections, мы увидим Lab-Peer
и также увидим, что статус Active.

00:02:23.000 --> 00:02:29.000
Мы переходим ко второй части нашей лабораторной
работы и здесь необходимо настроить Route Table.

00:02:29.000 --> 00:02:34.617
Для этого в навигационном меню слева необходимо
 выбрать опцию Route Tables. Нас направят

00:02:34.641 --> 00:02:40.000
на соответствующую страницу. Здесь 
необходимо будет найти Lab Public Route Table.

00:02:40.000 --> 00:02:49.000
Необходимо его выбрать. В нижней части страницы
отобразятся метаданные в нескольких разных вкладках.

00:02:49.000 --> 00:02:54.048
Нас интересует вкладка Routes. Мы видим,
что у нас есть два routes. Необходимо создать

00:02:54.072 --> 00:02:59.000
дополнительный для Peering Connections.
Для этого нажимаем на кнопку Edit Routes.

00:02:59.000 --> 00:03:02.170
Здесь отображаются все
существующие Route Tables.

00:03:02.194 --> 00:03:06.000
Первый дефолтовый, второй для 
выхода в интернет через Internet Gateway.

00:03:06.000 --> 00:03:10.988
И для третьего необходимо нажать 
на кнопку Add Route. Далее ввести

00:03:11.012 --> 00:03:16.000
CIDR блок Shared VPC и как
Target указать Peering Connections ID.

00:03:16.000 --> 00:03:21.212
После чего мы можем сохранить изменения.
Все те же изменения необходимо

00:03:21.236 --> 00:03:26.000
произвести для Shared VPC Route Table.
Необходимо его выбрать.

00:03:26.000 --> 00:03:33.000
На странице с деталями необходимо выбрать
вкладку Routes и нажать на кнопку Edit Routes.

00:03:33.000 --> 00:03:37.988
Мы видим, что для этого Route
Table есть только дефолтовый route.

00:03:38.012 --> 00:03:43.000
Здесь необходимо будет
нажать на кнопку Add Route.

00:03:43.000 --> 00:03:47.988
Для Destination необходимо
будет указать Lab VPC CIDR блок

00:03:48.012 --> 00:03:53.000
и как Target указываем все
тот же Peering Connections ID.

00:03:53.000 --> 00:03:58.081
И сохраняем изменения.
После чего мы завершаем настройку

00:03:58.105 --> 00:04:03.000
Route Tables и можем
переходить к третьему заданию.

00:04:03.000 --> 00:04:08.000
Мы с вами переходим к третьему заданию и
здесь будем проверять Peering Connections.

00:04:08.000 --> 00:04:14.000
Переходим в сервис EC2, можем воспользоваться
строкой поиска сервисов и начать вводить EC2.

00:04:14.000 --> 00:04:18.000
В выдаче первая ссылка - это
та ссылка, которая нам нужна.

00:04:18.000 --> 00:04:23.059
Как только мы оказались на основной
странице сервиса EC2, нам необходимо

00:04:23.083 --> 00:04:28.000
воспользоваться навигационным
меню слева и выбрать пункт Instances.

00:04:28.000 --> 00:04:32.022
Здесь вы увидите один единственный 
инстанс. Необходимо будет

00:04:32.046 --> 00:04:36.000
его выбрать и в метаданных
найти его публичный IP адрес.

00:04:36.000 --> 00:04:41.000
Давайте его скопируем и
откроем в новой вкладке в браузере.

00:04:41.000 --> 00:04:49.000
Мы видим, что выходит сообщение, что необходимо
сконфигурировать подключение к базе данных.

00:04:49.000 --> 00:04:54.000
Давайте это проделаем и
нажмем на кнопку Settings.

00:04:54.000 --> 00:04:58.363
Здесь нам необходим будет 
Endpoint базы данных. Для этого

00:04:58.387 --> 00:05:04.000
возвращаемся в AWS Management
Console и переходим в сервис Amazon RDS.

00:05:04.000 --> 00:05:09.000
Как вы видите, здесь у нас один
единственный инстанс, который нас интересует.

00:05:09.000 --> 00:05:14.488
Давайте откроем основную страницу
этого ресурса и в первой вкладке

00:05:14.512 --> 00:05:20.000
Connectivity and Security мы можем
найти Endpoint этой базы данных.

00:05:20.000 --> 00:05:23.000
Давайте его скопируем
и вставим в поле Endpoint.

00:05:23.000 --> 00:05:26.988
Также необходимо заполнить
поля Database, Username и

00:05:27.012 --> 00:05:31.000
Password. После чего необходимо 
нажать на кнопку Save.

00:05:31.000 --> 00:05:37.000
Как только мы на нее нажмем,
отобразятся записи из базы данных.

00:05:37.000 --> 00:05:44.000
Если вы увидели эти записи, поздравляю, мы все
настроили корректно и увидели данные с базы данных.

00:05:44.000 --> 00:05:47.000
А эта база данных находится
в абсолютно другом VPC.

00:05:47.000 --> 00:05:53.000
Как вы помните, у Shared VPC
не настроен выход в интернет.

00:05:53.000 --> 00:05:59.000
В Route Table не было Route Table, который
выходит в интернет через Internet Gateway.

00:05:59.000 --> 00:06:08.000
Поэтому единственная возможность добраться до
данных в базе данных - это через Peering Connection.

00:06:08.000 --> 00:06:14.000
Мы завершили все задания. Теперь нам
необходимо запустить скрипты автооценивания.

00:06:14.000 --> 00:06:19.000
Для этого возвращаемся на основную страницу
лабораторной работы и нажимаем на кнопку Submit.

00:06:19.000 --> 00:06:23.641
Нам необходимо подтвердить,
что мы хотим запустить эти скрипты

00:06:23.665 --> 00:06:28.000
и через некоторое время мы
увидим наши набранные баллы.

00:06:28.000 --> 00:06:34.000
Если вы набрали максимальный балл из возможных,
отлично, поздравляю, вы выполнили все корректно.

00:06:34.000 --> 00:06:39.488
Если же балл не максимальный, вы
можете в нижней части в списке посмотреть,

00:06:39.512 --> 00:06:45.000
в каком задании у вас не хватает баллов
и попробовать выполнить его еще раз.

00:06:45.000 --> 00:06:51.000
После того, как вы завершили лабораторную
работу, необходимо корректно выйти со всех систем.

00:06:51.000 --> 00:06:56.000
В первую очередь это относится
к AWS Management Console.

00:06:56.000 --> 00:06:59.282
Для этого необходимо в верхней
правой части нажать на имя

00:06:59.306 --> 00:07:03.000
пользователя и в выпадающем
списке нажать на кнопку Sign Out.

00:07:03.000 --> 00:07:07.488
Также нам необходимо корректно
завершить лабораторную работу,

00:07:07.512 --> 00:07:12.000
чтобы не было проблем с запуском
следующей лабораторной работы.

00:07:12.000 --> 00:07:19.488
Для этого необходимо на странице лабораторной
работы нажать на кнопку End Lab, чтобы увидеть,

00:07:19.512 --> 00:07:27.000
что мы завершаем лабораторную работу и увидеть
сообщение, что мы можем закрывать эту вкладку.

00:07:27.000 --> 00:07:33.000
На этом мы завершаем разбор лабораторной 
работы. Если будут вопросы, обращайтесь.

00:07:33.000 --> 00:07:37.000
Спасибо за внимание. Увидимся с вами 
на следующих наших активностях.