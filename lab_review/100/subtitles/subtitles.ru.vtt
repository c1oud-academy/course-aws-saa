WEBVTT

00:00:00.000 --> 00:00:08.200
Добрый день, уважаемые студенты! Я рад вас
всех видеть на сессии разбора лабораторной работы.

00:00:08.200 --> 00:00:16.200
Тема сегодняшней лабораторной работы – это
миграция базы данных в сервис баз данных Amazon RDS.

00:00:16.200 --> 00:00:17.280
Итак, давайте начнем.

00:00:17.280 --> 00:00:26.040
Начинаем мы разбор лабораторной работы с
главной страницы AWS Management Console.

00:00:26.040 --> 00:00:35.360
Переходим к первому заданию. Нам необходимо перейти в
сервис Amazon RDS, чтобы создать инстанс базы данных.

00:00:35.360 --> 00:00:41.540
На главной странице сервиса Amazon RDS,
необходимо нажать на кнопку Create database.

00:00:41.540 --> 00:00:46.640
Мы перейдем на специальную
страницу для ввода входных данных.

00:00:46.640 --> 00:00:50.840
Здесь нам необходимо выбрать
метод как Standard Create.

00:00:50.840 --> 00:01:00.480
Далее, как движок необходимо выбрать MariaDB.
Там где Templates, необходимо выбрать опцию Dev/Test.

00:01:00.480 --> 00:01:11.280
DB instance identifier будет CafeDatabase. Ниже
необходимо ввести данные о пользователе баз данных.

00:01:11.280 --> 00:01:22.880
Пользователь будет admin. Пароль копируем и
вставляем со страницы задания лабораторной работы.

00:01:22.880 --> 00:01:30.708
Как тип инстанса выбираем t3.micro. Здесь
хотел бы отметить, в рамках задания указано, что

00:01:30.732 --> 00:01:38.560
необходимо выбрать t2.micro, но это семейство
сейчас недоступно и оно считается устаревшим.

00:01:38.560 --> 00:01:52.080
Поэтому мы выбираем более свежее поколение,
это t3 и тот же самый размер инстанса micro.

00:01:52.080 --> 00:01:58.587
Следующая секция связана с хранилищем.
В нашем случае, это General

00:01:58.611 --> 00:02:05.720
Purpose SSD (gp2) и как размер
необходимо будет указать 20 гигабайтов.

00:02:05.720 --> 00:02:11.880
Следующее - Availability and durability. Необходимо
выбрать опцию Do not create a standby instance.

00:02:11.880 --> 00:02:20.520
Мы не будем включать опцию Multi-AZ deployment,
так как в рамках лабораторной работы это не нужно.

00:02:20.520 --> 00:02:25.400
Там где Connectivity необходимо
указать как VPC - LabVPC.

00:02:25.400 --> 00:02:30.588
Как Subnet group выбираем
lab-db-subnet-group, это private

00:02:30.612 --> 00:02:35.800
subnet group, где будет
располагаться инстанс базы данных.

00:02:35.800 --> 00:02:43.583
Как Security group выбираем созданную
security группу dbSG и здесь необходимо будет

00:02:43.607 --> 00:02:51.960
убрать галочку с дефолтовой security группы.
Как availability zone выбираем us-east-1a.

00:02:51.960 --> 00:02:58.400
Где дополнительная конфигурация ничего менять
не нужно, мы подключаемся по TCP порту 3306.

00:02:58.400 --> 00:03:05.186
В секции Monitoring необходимо будет убрать галочку
Enable enhanced monitoring, так как это не нужно в

00:03:05.210 --> 00:03:12.400
рамках лабораторной работы и когда мы убираем галочку
сама база данных будет создаваться намного быстрее.

00:03:12.400 --> 00:03:21.440
Отлично, мы прокручиваем до конца страницы, видим
примерную стоимость инстанса базы данных в месяц.

00:03:21.440 --> 00:03:29.000
Здесь идет разбивка, отдельно оплачивается инстанс
и отдельно оплачивается 20 гигабайтов хранилища.

00:03:29.000 --> 00:03:33.880
В итоге это все выходит в
месяц меньше 15 долларов.

00:03:33.880 --> 00:03:40.360
Ок, мы все ввели, нам необходимо
сейчас нажать на кнопку Create database.

00:03:40.360 --> 00:03:46.960
Нас направляет на страницу
со списком баз данных.

00:03:46.960 --> 00:03:53.960
Сейчас вы видите единственную базу данных, 
которую мы создали, Status - Creating.

00:03:53.960 --> 00:03:59.640
Нам нет необходимости ждать когда
она полностью создастся и будет активна.

00:03:59.640 --> 00:04:08.320
Переходим к следующему заданию. В рамках следующего
задания нам необходимо перейти на сервис Amazon EC2.

00:04:08.320 --> 00:04:12.560
Нам необходимо воспользоваться
строкой поиска сервисов, начать вводить EC2.

00:04:12.560 --> 00:04:20.148
Первая ссылка - это та, которая нам нужна. Далее,
уже на странице сервиса Amazon EC2 воспользуемся

00:04:20.172 --> 00:04:27.760
левым навигационным меню и выберем опцию Instances.
Нас направит на страницу со списком инстансов.

00:04:27.760 --> 00:04:35.848
Будет единственный инстанс с названием CafeServer.
Это тот EC2 сервер, на котором установлено

00:04:35.872 --> 00:04:43.960
приложение, веб-сервер и находится база данных,
которую мы будем переносить на отдельный сервис.

00:04:43.960 --> 00:04:51.294
Здесь нам необходимо скопировать публичный
IP адрес и в новой вкладке в веб-браузере

00:04:51.318 --> 00:04:59.360
ввести этот IP адрес /cafe, чтобы перейти на
веб-приложение. Откроется следующая страница.

00:04:59.360 --> 00:05:07.080
Необходимо проверить работоспособность приложения,
поэтому необходимо перейти на вкладку Menu.

00:05:07.080 --> 00:05:16.480
Необходимо выбрать для любой позиции количество
больше нуля и внизу нажать на кнопку Submit order.

00:05:16.480 --> 00:05:27.120
В нашем случае мы заказали 3 пончика по цене 
1 доллар и всего вышло 3 доллара. Все верно.

00:05:27.120 --> 00:05:35.360
Давайте теперь откроем страницу с историей заказов
 и мы должны увидеть наш заказ под номером 25.

00:05:35.360 --> 00:05:42.960
Он здесь также отображается. Это говорит о
том, что приложение сейчас корректно работает.

00:05:42.960 --> 00:05:48.640
Мы переходим к следующему заданию и здесь нам
необходимо подключиться к нашему EC2 инстансу.

00:05:48.640 --> 00:05:56.560
Для этого воспользуемся сервисом Session Manager.
Он находится в сервисе Systems Manager.

00:05:56.560 --> 00:06:00.892
Мы можем в строке поиска
сервисов начать вводить Systems

00:06:00.916 --> 00:06:05.248
Manager и дальше воспользоваться
навигационным меню слева,

00:06:05.272 --> 00:06:09.294
либо начать вводить имя
необходимого нам сервиса, это

00:06:09.318 --> 00:06:13.960
Sessions Manager, и он у нас
отобразится в секции Features.

00:06:13.960 --> 00:06:18.880
Давайте сделаем следующим образом
и перейдем по ссылке Session Manager.

00:06:18.880 --> 00:06:22.775
Здесь, когда мы перейдем
на главную страницу сервиса

00:06:22.799 --> 00:06:27.460
Session Manager, необходимо
нажать на кнопку Start Session.

00:06:27.460 --> 00:06:32.600
Мы увидим Target Instances, на текущий
момент это один-единственный вариант CafeServer.

00:06:32.600 --> 00:06:36.280
Необходимо его выбрать и
нажать на кнопку Start Session.

00:06:36.280 --> 00:06:44.000
Как только вы это нажимаете, открывается новая
вкладка в веб-браузере и вы видите окно Terminal.

00:06:44.000 --> 00:06:50.080
Здесь необходимо первой командой ввести
bash для того, чтобы открылся bash shell.

00:06:50.080 --> 00:07:01.640
Далее необходимо вбить команду sudo su, чтобы
начать вводить команды в роли root пользователя.

00:07:01.640 --> 00:07:08.240
Далее нам необходимо от root пользователя
уже перейти к пользователю EC2 User.

00:07:08.240 --> 00:07:16.400
Для этого вводим команду su
ec2-user и необходимо сделать проверку.

00:07:16.400 --> 00:07:22.680
Если мы введем команду whoami, в ответе увидим
 пользователя, под которым мы сейчас сидим.

00:07:22.680 --> 00:07:27.260
Если отображается EC2 User, 
значит все верно. Двигаемся дальше.

00:07:27.260 --> 00:07:32.240
Сейчас нам необходимо перейти на
домашнюю папку пользователя EC2 User.

00:07:32.240 --> 00:07:41.840
Для этого необходимо ввести команду cd, то
есть Change Directory, путь cd /home/ec2-user/.

00:07:41.840 --> 00:07:48.381
Если вы введете pwd, то
здесь отобразится текущая

00:07:48.405 --> 00:07:56.720
директория и вы увидите, что
вы находитесь по верному пути.

00:07:56.720 --> 00:08:03.040
Теперь нам необходимо проверить состояние
баз данных, установленной на EC2 машине.

00:08:03.040 --> 00:08:06.800
Для этого необходимо ввести
команду service mariadb status.

00:08:06.800 --> 00:08:13.401
Вы увидите большое сообщение и
в этом сообщении увидите зеленым

00:08:13.425 --> 00:08:20.880
active (running), что говорит о том,
что база данных сейчас активна.

00:08:20.880 --> 00:08:37.400
Если вы введете также команду mysql --version,
вы увидите, что MariaDB использует движок mysql.

00:08:37.400 --> 00:08:46.120
Теперь необходимо подключиться к базе данных.
Нужно добраться до пароля пользователя баз данных.

00:08:46.120 --> 00:08:52.967
Эти данные у нас хранятся в Parameter store.
Давайте в строке поиска сервисов в AWS Management

00:08:52.991 --> 00:09:00.280
Console введем Parameter store, в секции Features
увидим необходимую нам ссылку и перейдем по ней.

00:09:00.280 --> 00:09:09.000
Вы увидите 7 созданных параметров, каждый отвечает за
что-то определенное. Нас интересует /cafe/dbPassword.

00:09:09.000 --> 00:09:17.000
Давайте откроем этот параметр и в значении value
вы увидите пароль от root пользователя баз данных.

00:09:17.000 --> 00:09:27.040
Давайте ее скопируем и вернемся обратно 
к сессии подключения к EC2 инстансу.

00:09:27.040 --> 00:09:34.200
Здесь нам необходимо ввести команду
подключения к базе данных это mysql -u root -p.

00:09:34.200 --> 00:09:40.240
Как только вы нажмете Enter у вас запросит пароль.
Вам необходимо будет вставить скопированный пароль.

00:09:40.240 --> 00:09:45.607
Если вы все сделали верно,
откроется промпт баз данных MariaDB и

00:09:45.631 --> 00:09:51.680
здесь вы уже можете вводить команды.
Давайте введем следующие команды.

00:09:51.680 --> 00:09:57.148
Первым делом show databases вы
увидите список баз данных в этой базе

00:09:57.172 --> 00:10:02.640
данных и также внутри находится
интересующая нас база данных cafe_db.

00:10:02.640 --> 00:10:10.720
Далее, необходимо ввести команду use cafe_db, чтобы
мы могли работать с таблицами в этой базе данных.

00:10:10.720 --> 00:10:15.203
Как только мы выбрали нужную нам базу
данных, мы можем ввести команду show

00:10:15.227 --> 00:10:20.080
tables и увидим все таблицы, которые
есть в этой базе данных. У нас 4 таблицы.

00:10:20.080 --> 00:10:30.240
Давайте теперь введем команду select all from order.
Вы увидите все заказы, сделанные через приложение.

00:10:30.240 --> 00:10:35.240
Всего 25 заказов и самый последний это
тот заказ, который мы сделали вместе с вами.

00:10:35.240 --> 00:10:42.025
Также мы можем ввести запрос
select all from order item и вы увидите для

00:10:42.049 --> 00:10:49.600
каждого заказа какие товары в каком
количестве и на какую сумму были выбраны.

00:10:49.600 --> 00:10:57.120
Отлично, у нас база данных работает.
Все данные на месте.

00:10:57.120 --> 00:11:06.760
Теперь мы можем ввести команду
mysqldump, чтобы создать дамп базы данных.

00:11:06.760 --> 00:11:15.418
Все данные перенесутся в файл CafeDbDump.sql. Как
только нажмете на Enter, вас запросят ввести пароль

00:11:15.442 --> 00:11:24.100
и в случае если вы не увидите ошибки, это говорит
о том, что дамп базы данных был успешно создан.

00:11:24.100 --> 00:11:33.280
Давайте проверим, что файл действительно появился.
Введем команду ls и файл CafeDbDump.sql появится.

00:11:33.280 --> 00:11:42.236
Если мы посмотрим его содержание, то вы
увидите вначале запускаются команды создания

00:11:42.260 --> 00:11:52.080
таблиц соответствующей структуры и после
уже увидите запросы insert, где вводятся данные.

00:11:52.080 --> 00:12:00.120
Отлично, мы переходим
к следующему заданию.

00:12:00.120 --> 00:12:05.120
Здесь нам необходимо будет убедиться в
том, что база данных успешно создалась.

00:12:05.120 --> 00:12:12.468
Для этого переходим к сервису Amazon RDS. Необходимо
убедиться, что статус Available, если это так,

00:12:12.492 --> 00:12:19.840
мы переходим на страницу с лабораторной работой и
здесь необходимо добраться до страницы с вопросами.

00:12:19.840 --> 00:12:27.427
Для этого нажимаем на кнопку Details, в
выпадающем списке нажимаем на кнопку Show и в

00:12:27.451 --> 00:12:35.580
всплывающем окне необходимо будет нажать
на ссылку Access the multiple choice questions.

00:12:35.580 --> 00:12:42.280
На странице с вопросами вы всего увидите 4 вопроса,
на все из них нам необходимо сейчас ответить.

00:12:42.280 --> 00:12:50.400
Первый вопрос: где запущен
инстанс базы данных Amazon RDS?

00:12:50.400 --> 00:12:54.093
Следует обратить внимание, что
необходимо выбрать опции, которые

00:12:54.117 --> 00:12:58.280
являются верными и most specific,
то есть максимально детализированы.

00:12:58.280 --> 00:13:11.280
Например, вариант инстанс базы данных находится
в AWS верный, но недостаточно детализирован.

00:13:11.280 --> 00:13:14.040
Ок, давайте посмотрим
какие варианты ответов есть.

00:13:14.040 --> 00:13:17.280
Первый вариант утверждает, что
он находится на уровне региона.

00:13:17.280 --> 00:13:22.400
Другой вариант, что он на уровне availability
зоны, чуть точнее, но нужно проверить так ли это.

00:13:22.400 --> 00:13:29.400
Третий вариант говорит о том, что находится на edge
location и последний вариант - все варианты верны.

00:13:29.400 --> 00:13:35.783
Давайте теперь вернемся на страницу со
списком баз данных и посмотрим на столбец

00:13:35.807 --> 00:13:43.000
Region and AZ, мы видим, что наша база
данных относится к availability зоне us-east-1a.

00:13:43.000 --> 00:13:50.000
Это говорит о том, что правильный ответ второй,
так как он верный и максимально детализирован.

00:13:50.000 --> 00:14:02.000
Давайте теперь посмотрим на второй вопрос. Есть ли у
инстанса баз данных привязанный публичный IP адрес?

00:14:02.000 --> 00:14:08.480
Давайте вернемся на страницу с деталями баз
данных и посмотрим какая же информация здесь есть.

00:14:08.480 --> 00:14:11.960
Мы видим, что у нас есть
Endpoint и определенный порт.

00:14:11.960 --> 00:14:18.148
Endpoint не является публичным IP адресом
и наличие Endpoint не говорит о том, что из

00:14:18.172 --> 00:14:24.360
интернета можно к этой базе данных обратиться.
Поэтому мы отвечаем на этот вопрос No.

00:14:24.360 --> 00:14:36.240
Третий вопрос: укажите значение Name tag для
subnet-а, на котором расположен RDS инстанс.

00:14:36.240 --> 00:14:41.666
Следует обратить внимание, что
указано на странице с деталями

00:14:41.690 --> 00:14:47.840
базы данных, а также посмотреть
отдельно какие subnets есть у VPC.

00:14:47.840 --> 00:14:52.440
Как варианты ответов мы видим, есть
Public subnet, Private subnet 1 и Private subnet 2.

00:14:52.440 --> 00:15:02.760
Это все имеющиеся subnets в нашем VPC. Давайте
откроем страницу с деталями нашей базы данных.

00:15:02.760 --> 00:15:12.240
Мы видим, что она находится в availability zone
us-east-1a. Также указан список из двух subnets.

00:15:12.240 --> 00:15:19.600
Давайте попробуем эти subnets найти в списке 
subnets. Для этого необходимо открыть сервис VPC.

00:15:19.600 --> 00:15:28.640
В левом навигационном меню перейти на
ссылку Subnets и найти интересующие нас subnets.

00:15:28.640 --> 00:15:33.640
Мы видим, что name tag заполнен
как Private subnet 1 и Private subnet 2.

00:15:33.640 --> 00:15:40.680
Как нам понять в каком из subnets
находится наш инстанс базы данных?

00:15:40.680 --> 00:15:46.240
Ответ прост. Необходимо проверить в какой
availability zone находится каждый из subnets.

00:15:46.240 --> 00:15:54.648
Для этого необходимо прокрутить правее эту
таблицу и мы увидим, что Private subnet 1 находится

00:15:54.672 --> 00:16:03.080
в availability zone us-east-1a и Private
subnet 2 находится в availability zone us-east-1b.

00:16:03.080 --> 00:16:09.160
Таким образом правильным ответом
является второй Private subnet 1.

00:16:09.160 --> 00:16:19.080
Посмотрим на четвертый вопрос. Какое количество
security group rules привязано к RDS инстансу?

00:16:19.080 --> 00:16:26.968
Для этого обратно переходим на страницу с деталями
нашего RDS инстанса и необходимо прокрутить чуть

00:16:26.992 --> 00:16:34.880
ниже. Есть отдельная секция Security group rules.
Мы видим, что у нас есть один единственный rule.

00:16:34.880 --> 00:16:43.152
Он разрешает outbound трафик на 
весь интернет. Отлично. Таким образом

00:16:43.176 --> 00:16:50.960
мы отвечаем на этот вопрос.
Первый вариант ответа - значение 1.

00:16:50.960 --> 00:16:58.800
Переходим к следующему заданию, нам необходимо
подключиться от EC2 инстанса к RDS инстансу.

00:16:58.800 --> 00:17:04.757
Первым делом нам необходимо скопировать
endpoint нашего RDS инстанса и вернуться

00:17:04.781 --> 00:17:10.360
к странице с терминалом. Здесь необходимо 
ввести соответствующую команду.

00:17:10.360 --> 00:17:16.608
Обратите внимание, что пользователем является 
admin и пароль тот, который мы указывали в

00:17:16.632 --> 00:17:22.880
самом начале при создании RDS инстанса.
Как только нажмете Enter попросят ввести пароль.

00:17:22.880 --> 00:17:31.920
Вставьте скопированный пароль и посмотрите, что
случится. Команда долго будет стоять таким образом.

00:17:31.920 --> 00:17:39.181
Через некоторое время выйдет ошибка таймаута.
Это говорит о том, что есть некоторые

00:17:39.205 --> 00:17:46.200
проблемы и нам дается подсказка, что
проблема не в пользователе и не в пароле.

00:17:46.200 --> 00:17:50.160
Необходимо подумать, где
же может быть проблема.

00:17:50.160 --> 00:17:57.149
Первым, то что приходит на ум, это действительно 
ли есть доступ по сети от EC2 инстанса

00:17:57.173 --> 00:18:04.000
к RDS инстансу, с учетом того, что они
находятся в одном VPC, но в разных subnets.

00:18:04.000 --> 00:18:11.280
EC2 инстанс находится в public subnet,
а RDS инстанс находится в private subnet.

00:18:11.280 --> 00:18:19.840
Таким образом, давайте проверим
у RDS инстанса security группу.

00:18:19.840 --> 00:18:24.759
Вы можете найти ссылку на
security группу во вкладке Connectivity

00:18:24.783 --> 00:18:29.240
and security и соответствующее
поле VPC security groups.

00:18:29.240 --> 00:18:36.668
Как только мы на нее перейдем, во вкладке Inbound
rules мы увидим, что не задано ни одного правила,

00:18:36.692 --> 00:18:44.120
которое разрешало бы входящий трафик. Давайте
это исправим и нажмем на кнопку Edit inbound rules.

00:18:44.120 --> 00:18:53.532
Здесь необходимо нажать на кнопку
Add rule и в поле Type ввести MYSQL/Aurora

00:18:53.556 --> 00:19:02.340
протокол и порт вставится автоматически.
Как Source указываем Custom.

00:19:02.340 --> 00:19:09.200
Мы не можем указать весь интернет, так как это
небезопасно с точки зрения безопасности, некорректно.

00:19:09.200 --> 00:19:20.440
Поэтому мы можем предоставить доступ к security
группе, а security группа привязана к EC2 инстансу.

00:19:20.440 --> 00:19:26.628
Таким образом нам необходимо вернуться
к нашему EC2 инстансу, выбрать его

00:19:26.652 --> 00:19:32.840
и во вкладке Security мы увидим
security группу, к которой она привязана.

00:19:32.840 --> 00:19:41.200
Полностью ID запоминать не нужно, достаточно
запомнить последние два символа, это c5.

00:19:41.200 --> 00:19:46.695
Возвращаемся обратно на страницу
редактирования security группы базы данных и

00:19:46.719 --> 00:19:52.213
как только мы выбираем Source, активируется
следующее поле, начнем вводить SG и

00:19:52.237 --> 00:19:58.227
отобразится список security групп, доступных
на этом AWS аккаунте. Нам нужно выбрать

00:19:58.251 --> 00:20:04.240
ту, которая заканчивается на c5. В вашем 
случае будет другой ID, но идею вы поняли.

00:20:04.240 --> 00:20:08.961
Также является best practice и
рекомендация от меня лично, всегда

00:20:08.985 --> 00:20:13.485
заполнять опциональное поле
Description, так как вы создаёте

00:20:13.509 --> 00:20:18.083
эти записи один раз и когда вы
возвращаетесь через некоторое

00:20:18.107 --> 00:20:22.680
время практически нереально
вспомнить для чего вы это делали.

00:20:22.680 --> 00:20:28.368
А когда есть небольшой комментарий, вы
можете очень легко вспомнить, вы её писали или

00:20:28.392 --> 00:20:34.080
нет, более того можно по содержанию
этого текста понять для чего она была создана.

00:20:34.080 --> 00:20:40.960
Давайте введем EC2 SG, после
этого нажмем на кнопку Save rules.

00:20:40.960 --> 00:20:47.275
Отлично, давайте теперь вернёмся
обратно к окну терминала и попробуем

00:20:47.299 --> 00:20:53.520
ввести следующую команду nmap
-Pn и endpoint нашего RDS инстанса.

00:20:53.520 --> 00:20:59.548
Отработает проверка портов и
мы увидим в большом сообщении

00:20:59.572 --> 00:21:05.600
в самом конце, что порт 3306
TCP по протоколу TCP открыт.

00:21:05.600 --> 00:21:13.072
Это говорит о том, что мы по сети
предоставили необходимые права, теперь

00:21:13.096 --> 00:21:21.200
попробуем подключиться к нашему
инстансу RDS, используя предыдущую команду.

00:21:21.200 --> 00:21:26.450
Если мы все сделали правильно, мы сможем
подключиться. Давайте теперь посмотрим какие

00:21:26.474 --> 00:21:32.100
базы данных есть в этом инстансе RDS. Для этого 
необходимо ввести команду show databases.

00:21:32.100 --> 00:21:39.400
Вы видите здесь 5 баз данных и
здесь нет базы данных cafe_db.

00:21:39.400 --> 00:21:48.120
Все верно, так и должно быть, так как эта
база данных пустая, сейчас там ничего нет.

00:21:48.120 --> 00:21:59.760
Давайте теперь выйдем с этого промпта и с bash
shell введем команду для импорта дампа базы данных.

00:21:59.760 --> 00:22:05.684
Как только мы это сделаем, попросят ввести
пароль, мы ее введем и если мы не увидим

00:22:05.708 --> 00:22:11.560
ошибки, это говорит о том, что дамп был
успешно импортирован в наш RDS инстанс.

00:22:11.560 --> 00:22:17.780
Давайте теперь обратно попробуем подключиться к
нашему инстансу и введем команду show databases.

00:22:17.780 --> 00:22:23.735
Мы видим, что база данных нашего
приложения cafeDB появилась, давайте теперь ее

00:22:23.759 --> 00:22:30.480
выберем и посмотрим какие таблицы там есть.
Мы видим, что все необходимые таблицы есть.

00:22:30.480 --> 00:22:37.428
Также посмотрим содержание таблицы
Order, мы видим, что у нас есть 25 записей

00:22:37.452 --> 00:22:44.400
и последняя запись это тот заказ,
который мы с вами вместе сделали. Отлично.

00:22:44.400 --> 00:22:51.288
Теперь мы двигаемся к следующему заданию.
В этом задании нам необходимо произвести

00:22:51.312 --> 00:22:58.200
изменения в наших параметрах, так как
приложение работает, используя эти параметры.

00:22:58.200 --> 00:23:04.080
Здесь у нас есть параметры, связанные
с базой данных, это dbPassword и dbUrl.

00:23:04.080 --> 00:23:07.200
Давайте их обновим на
соответствующие значения.

00:23:07.200 --> 00:23:13.440
Первым делом сделаем изменения в
параметре dbPassword, необходимо ее открыть.

00:23:13.440 --> 00:23:17.800
Вверху справа нажать на кнопку
Edit и ввести новое значение.

00:23:17.800 --> 00:23:21.720
После чего внизу страницы необходимо
нажать на кнопку Save changes.

00:23:21.720 --> 00:23:26.408
Как только мы это сделаем, те же
самые действия необходимо произвести

00:23:26.432 --> 00:23:31.120
с параметром dbUrl и здесь
необходимо ввести endpoint инстанса RDS.

00:23:31.120 --> 00:23:36.880
Сохраняем изменения, возвращаемся
к терминалу с подключением к EC2

00:23:36.904 --> 00:23:43.640
инстансу и здесь для чистоты эксперимента
остановим локальную базу данных.

00:23:43.640 --> 00:23:48.080
Для этого введем следующую команду
и увидим соответствующий ответ.

00:23:48.080 --> 00:23:54.560
Теперь попробуем открыть приложение.
Ссылка остается той же, так как мы

00:23:54.584 --> 00:24:02.640
веб-приложение и веб-сервер не меняли.
Попробуем открыть вкладку Menu и увидим ошибку.

00:24:02.640 --> 00:24:11.420
Давайте подумаем, где же мы не
произвели необходимые изменения.

00:24:11.420 --> 00:24:16.040
Вы можете сейчас остановить
видео и попробовать ответить.

00:24:16.040 --> 00:24:22.320
Отлично, я надеюсь вы
смогли правильно ответить.

00:24:22.320 --> 00:24:28.080
Правильным ответом является то, что у нас есть еще
один параметр, связанный с базами данных, это dbUser.

00:24:28.080 --> 00:24:35.216
Если вы помните, в локальной базе
данных мастер пользователем является root,

00:24:35.240 --> 00:24:42.280
а для инстанса RDS мы создавали
мастер пользователя под названием admin.

00:24:42.280 --> 00:24:46.120
Поэтому нам необходимо ввести
сейчас соответствующие изменения.

00:24:46.120 --> 00:24:51.800
После того как мы это сделаем, возвращаемся обратно
на страницу с Menu и попробуем обновить страницу.

00:24:51.800 --> 00:24:59.820
Мы увидим список товаров и сейчас нам
необходимо проверить работу веб-приложения.

00:24:59.820 --> 00:25:05.200
Выберем горячий шоколад в одном
количестве и попробуем оставить заявку.

00:25:05.200 --> 00:25:12.200
Нас направят на страницу с
нашим заказом, это заказ номер 26.

00:25:12.200 --> 00:25:14.960
Все необходимые данные
корректно отобразились.

00:25:14.960 --> 00:25:19.260
Давайте теперь попробуем
открыть страницу с историей заказов.

00:25:19.260 --> 00:25:26.120
Мы увидим, что и 25 и 26 заказ, который мы с
вами вместе сделали, корректно отображаются.

00:25:26.120 --> 00:25:34.360
Отлично, на этом мы завершили все
задания в рамках лабораторной работы.

00:25:34.360 --> 00:25:40.560
Если вы добрались до этого места, я вас поздравляю.
Сейчас мы запустим автоматическое оценивание.

00:25:40.560 --> 00:25:47.120
Для этого необходимо вернуться обратно на страницу
лабораторной работы и нажать на кнопку Submit.

00:25:47.120 --> 00:25:54.255
Здесь нам необходимо подтвердить, что мы хотим
запустить автоматическое оценивание и через некоторое

00:25:54.279 --> 00:26:01.920
время, это может занять до двух минут, отработают все
скрипты и с правой стороны вы увидите свою оценку.

00:26:01.920 --> 00:26:07.540
Если вы набрали максимальное количество баллов, я
вас поздравляю, вы молодцы, все сделали корректно.

00:26:07.540 --> 00:26:13.518
Если же где-то не достает баллы,
посмотрите в каком задании у вас не хватает

00:26:13.542 --> 00:26:20.000
баллов, необходимо вернуться к этому
заданию и попробовать сделать его еще раз.

00:26:20.000 --> 00:26:28.960
Отлично, на этом мы завершаем лабораторную работу.
Очень важно корректно выйти со всех систем.

00:26:28.960 --> 00:26:33.000
В первую очередь это относится
к AWS Management Console.

00:26:33.000 --> 00:26:39.200
Необходимо в верхней правой части нажать на
имя пользователя и далее нажать на кнопку Sign out.

00:26:39.200 --> 00:26:42.422
Если мы говорим про
страницу с лабораторной работы,

00:26:42.446 --> 00:26:46.120
нам необходимо завершить
корректно лабораторную работу.

00:26:46.120 --> 00:26:53.309
Для этого нажимаем на кнопку End lab,
подтверждаем, что мы завершаем лабораторную работу

00:26:53.333 --> 00:27:00.440
и необходимо дождаться сообщения о том,
что мы можем закрывать страницу AWS Academy.

00:27:00.440 --> 00:27:06.000
Отлично, я вас поздравляю, мы с вами
завершили разбор лабораторной работы.

00:27:06.000 --> 00:27:12.640
Я очень надеюсь, что вы получили более
полное представление о сервисах AWS.

00:27:12.640 --> 00:27:17.200
Спасибо за внимание. Увидимся с вами 
на следующих наших активностях.