WEBVTT

00:00:00.000 --> 00:00:02.000
Добрый день, уважаемые студенты!

00:00:02.000 --> 00:00:06.000
Я рад вас всех видеть на очередной сессии разбора лабораторной работы.

00:00:06.000 --> 00:00:10.000
Тема сегодняшней лабораторной работы – это создание VPC.

00:00:10.000 --> 00:00:12.000
Итак, давайте начнем.

00:00:14.000 --> 00:00:19.000
Начинаем мы с вами разбор лабораторной работы с главной страницы AWS Management Console.

00:00:19.000 --> 00:00:22.000
Переходим к выполнению первого задания.

00:00:22.000 --> 00:00:25.000
Здесь нам необходимо перейти в сервис Amazon VPC.

00:00:25.000 --> 00:00:33.000
Далее, используя левое навигационное меню, перейти к списку VPC в AWS Account.

00:00:33.000 --> 00:00:37.000
Существующие VPC использовать не будем, а создадим новый.

00:00:37.000 --> 00:00:40.000
Для этого нажмем на кнопку Create VPC.

00:00:40.000 --> 00:00:44.000
Здесь нам необходимо выбрать опцию VPC only,

00:00:44.000 --> 00:00:48.000
так как мы будем создавать все необходимые компоненты по одному по отдельности.

00:00:48.000 --> 00:00:52.000
В будущем вы можете воспользоваться опцией VPC and more

00:00:52.000 --> 00:00:57.000
и указать все детали дополнительных компонентов.

00:00:57.000 --> 00:01:02.000
Тогда вы за одно действие создадите связку из нескольких сервисов.

00:01:04.000 --> 00:01:08.000
В поле Name необходимо ввести LabVPC.

00:01:08.000 --> 00:01:13.000
Как CIDR блок мы вводим то значение, которое дано в рамках лабораторной работы.

00:01:13.000 --> 00:01:23.000
Это 10.0.0.0.16.

00:01:23.000 --> 00:01:33.000
Обратите внимание, что в секции Text появилась пара с ключом Name

00:01:33.000 --> 00:01:38.000
и со значением LabVPC, которые мы ввели чуть выше.

00:01:38.000 --> 00:01:41.000
На этом мы ввели все необходимые значения.

00:01:41.000 --> 00:01:44.000
Теперь нажмем на кнопку Create VPC.

00:01:44.000 --> 00:01:47.000
Как только мы это нажмем, мы увидим соответствующее сообщение,

00:01:47.000 --> 00:01:50.000
что VPC была успешно создана.

00:01:50.000 --> 00:01:53.000
Также нас направят на основную страницу ресурса.

00:01:53.000 --> 00:01:56.000
Здесь нам необходимо сделать дополнительную настройку,

00:01:56.000 --> 00:01:59.000
а именно нажать на кнопку Actions в выпадающем меню

00:01:59.000 --> 00:02:02.000
выбрать опцию Edit VPC Settings

00:02:02.000 --> 00:02:06.000
и здесь активировать опцию Enable DNS Host Names.

00:02:06.000 --> 00:02:11.000
Это значит, что для всех ресурсов, создаваемых в рамках этого VPC,

00:02:11.000 --> 00:02:15.000
будет привязываться соответствующий DNS.

00:02:15.000 --> 00:02:19.000
Нужно поставить галочку и нажать на кнопку Save.

00:02:19.000 --> 00:02:23.000
Отлично, мы создали VPC, теперь можем переходить к созданию сабнетов.

00:02:23.000 --> 00:02:26.000
Для этого воспользуемся левым навигационным меню

00:02:26.000 --> 00:02:28.000
и выберем опцию Subnets.

00:02:28.000 --> 00:02:33.000
Как только вы перейдете на страницу со списком сабнетов,

00:02:33.000 --> 00:02:36.000
мы увидим, что у нас достаточно большое количество сабнетов

00:02:36.000 --> 00:02:39.000
в временном созданном AWS аккаунте,

00:02:39.000 --> 00:02:42.000
но тем не менее мы не будем их использовать.

00:02:42.000 --> 00:02:46.000
Нам необходимо создать сабнеты с нуля.

00:02:46.000 --> 00:02:49.000
Для этого нажмем на кнопку Create Subnet.

00:02:49.000 --> 00:02:54.000
Здесь обязательно нужно будет первым шагом выбрать VPC, это Lab VPC.

00:02:54.000 --> 00:03:00.000
Далее, в следующей секции необходимо будет ввести как имя Public Subnet,

00:03:00.000 --> 00:03:04.000
а для Availability Zone необходимо выбрать первую Availability Zone,

00:03:04.000 --> 00:03:07.000
в нашем случае это US East 1A,

00:03:07.000 --> 00:03:13.000
и как CedarBlock указать то значение, которое дано в задании лабораторной работы.

00:03:13.000 --> 00:03:18.000
Необходимо проскроллить до конца страницы и нажать на кнопку Create Subnet.

00:03:18.000 --> 00:03:21.000
Здесь есть один нюанс с Public Subnet.

00:03:21.000 --> 00:03:26.000
Мы хотим, чтобы для всех ресурсов, создаваемых в этом сабнете,

00:03:26.000 --> 00:03:29.000
автоматически присваивались публичные IP-адреса.

00:03:29.000 --> 00:03:35.000
Для этого необходимо выбрать наш сабнет, нажать на кнопку Actions

00:03:35.000 --> 00:03:38.000
и выбрать опцию Edit Subnet Settings.

00:03:38.000 --> 00:03:43.000
Здесь есть галочка Enable Auto Assign Public IPv4 Address.

00:03:43.000 --> 00:03:49.000
Необходимо поставить галочку и в нижней части страницы нажать на кнопку Save.

00:03:49.000 --> 00:03:56.000
Как только вы это сделаете, мы можем переходить к созданию второго сабнета.

00:03:56.000 --> 00:04:02.000
Для этого еще раз нажмем на кнопку Create Subnet и нас направить на страницу ввода входных данных.

00:04:02.000 --> 00:04:07.000
Здесь мы выбираем тот же Lab VPC, как Name указываем Private Subnet,

00:04:07.000 --> 00:04:14.000
как Availability Zone выбираем то же значение US East 1A и вводим соответствующий CedarBlock.

00:04:14.000 --> 00:04:20.000
Как только мы это все сделаем, необходимо будет прокрутить до конца страницы

00:04:20.000 --> 00:04:22.000
и нажать на кнопку Create Subnet.

00:04:22.000 --> 00:04:27.000
Отлично, мы создали все необходимые сабнеты и переходим к следующему заданию.

00:04:27.000 --> 00:04:31.000
На следующем задании нам необходимо будет создать интернет-гейтвей.

00:04:31.000 --> 00:04:38.000
Для этого также воспользуемся навигационным меню слева и выберем опцию Internet Gateways.

00:04:38.000 --> 00:04:45.000
На этой странице вы увидите список интернет-гейтвеев на этом AWS аккаунте.

00:04:45.000 --> 00:04:50.000
Нам необходимо создать новый, поэтому мы нажимаем на кнопку Create Internet Gateway.

00:04:50.000 --> 00:04:59.000
Здесь необходимо ввести только название Internet Gateway, в нашем случае Lab IJV, IJV от Internet Gateway.

00:04:59.000 --> 00:05:03.000
После этого необходимо нажать на кнопку Create Internet Gateway.

00:05:03.000 --> 00:05:10.000
Как только вы создадите интернет-гейтвей, вас направят на основную страницу ресурса

00:05:10.000 --> 00:05:15.000
и здесь вы увидите кнопку, что есть возможность сразу привязать ее к VPC.

00:05:15.000 --> 00:05:22.000
Если же по тем или иным причинам вы это сообщение не видите, вы также можете воспользоваться кнопкой Actions.

00:05:22.000 --> 00:05:26.000
И первый пункт это Attach to VPC.

00:05:26.000 --> 00:05:28.000
Давайте это сделаем.

00:05:28.000 --> 00:05:34.000
И после того, как мы нажмем на кнопку Attach to VPC, нас направят на соответствующую страницу.

00:05:34.000 --> 00:05:39.000
Здесь необходимо будет выбрать Lab VPC и сохранить изменения.

00:05:39.000 --> 00:05:49.000
Как только мы это сделаем, на основной странице интернет-гейтвея мы увидим state Attached, а также ссылку на наш Lab VPC в поле VPC ID.

00:05:49.000 --> 00:05:53.000
Отлично, мы на этом завершили это задание. Переходим к следующему.

00:05:53.000 --> 00:05:55.000
Сейчас будем настраивать наши road tables.

00:05:55.000 --> 00:06:01.000
Давайте перейдем на road tables, воспользовавшись левым навигационным меню.

00:06:01.000 --> 00:06:10.000
Как только откроется страница со списком road tables, мы увидим, что у нас уже есть дефолт в road tables.

00:06:10.000 --> 00:06:15.000
Он автоматически привязывается ко всем сабнетам в нашем VPC.

00:06:15.000 --> 00:06:22.000
И давайте найдем дефолт в road tables, относящийся к Lab VPC.

00:06:22.000 --> 00:06:27.000
Как только вы это сделаете, в столбце Name есть соответствующая кнопка.

00:06:27.000 --> 00:06:34.000
И используя эту кнопку, мы можем ввести значение для тега с ключом Name.

00:06:34.000 --> 00:06:36.000
Давайте введем private road table.

00:06:36.000 --> 00:06:42.000
Как только мы это сделаем, необходимо сохранить и выбрать наш road table.

00:06:42.000 --> 00:06:50.000
Далее необходимо открыть вкладку Roads, и вы увидите, что там есть routing rule по умолчанию,

00:06:50.000 --> 00:06:54.000
который дает возможность обмениваться информацией, ресурсами внутри VPC.

00:06:54.000 --> 00:06:59.000
Теперь нам необходимо создать public road table.

00:06:59.000 --> 00:07:04.000
Для этого необходимо в верхней правой части страницы нажать на кнопку Create road table.

00:07:04.000 --> 00:07:08.000
Нас направят на страницу для ввода входных данных.

00:07:08.000 --> 00:07:16.000
Здесь необходимо как Name ввести public road table, и выбрать в качестве VPC наш Lab VPC.

00:07:16.000 --> 00:07:19.000
И нажать на кнопку Create road table.

00:07:19.000 --> 00:07:27.000
Как только вы это сделаете, нам необходимо произвести некоторые изменения в public road table.

00:07:27.000 --> 00:07:33.000
Для этого необходимо перейти во вкладку Roads и нажать на кнопку Edit roads.

00:07:33.000 --> 00:07:43.000
Здесь мы будем добавлять routing rule, чтобы у этого subnet появился доступ к интернету.

00:07:43.000 --> 00:07:49.000
Для этого необходимо нажать на кнопку Add road и в новой строчке ввести следующие значения.

00:07:49.000 --> 00:07:57.000
Для subnet destination необходимо указать обозначение интернета, это IP-адрес со всеми нулями, слеш ноль.

00:07:57.000 --> 00:08:01.000
Как target необходимо указать интернет-гейтвей, который мы создали ранее.

00:08:01.000 --> 00:08:08.000
После чего необходимо нажать на кнопку Save changes.

00:08:08.000 --> 00:08:18.000
Как только мы это сделали, нам необходимо вспомнить и не забывать, что road table это отдельный независимый самостоятельный ресурс.

00:08:18.000 --> 00:08:24.000
И чтобы он начал действовать, нам необходимо его привязать к нашему subnet.

00:08:24.000 --> 00:08:32.000
Поэтому мы на основной странице public road table переходим во вкладку subnet associations.

00:08:32.000 --> 00:08:35.000
Видим, что этот road table ни с чем не привязан.

00:08:35.000 --> 00:08:39.000
Поэтому нажимаем на кнопку Edit subnet associations.

00:08:39.000 --> 00:08:43.000
Как только мы ее нажмем, вы увидите список всех существующих subnet.

00:08:43.000 --> 00:08:52.000
Для private subnet ничего делать не нужно, так как мы изменили дефолтовый road table и переименовали его в private road table.

00:08:52.000 --> 00:09:00.000
А здесь необходимо для кастомного road table, необходимо выбрать public subnet и сохранить изменения.

00:09:00.000 --> 00:09:10.000
Как только вы это сделаете, мы фактически превратим наш subnet в public subnet.

00:09:10.000 --> 00:09:14.000
И у всех ресурсов в этом subnet появится доступ в интернет.

00:09:14.000 --> 00:09:19.000
На этом мы завершаем это задание и переходим к следующему.

00:09:19.000 --> 00:09:25.000
В следующем задании нам необходимо будет настроить security группу для нашего приложения.

00:09:25.000 --> 00:09:33.000
Чтобы это сделать, нам необходимо в левом навигационном меню выбрать опцию security groups.

00:09:33.000 --> 00:09:39.000
Мы окажемся на странице со списком security group, созданных в этом AWS аккаунте.

00:09:39.000 --> 00:09:45.000
Нам необходимо создать новый, поэтому нажимаем на кнопку Create security group.

00:09:45.000 --> 00:09:53.000
Здесь необходимо ввести как security group name AppSg, как description необходимо ввести allow HTTP traffic

00:09:53.000 --> 00:09:56.000
и как VPC выбрать lab VPC.

00:09:56.000 --> 00:10:00.000
Давайте прокрутим чуть ниже и заполним секцию inbound rules.

00:10:00.000 --> 00:10:04.000
Для этого необходимо нажать на кнопку add rule, появится новая строчка.

00:10:04.000 --> 00:10:07.000
Здесь необходимо как тип выбрать HTTP.

00:10:07.000 --> 00:10:18.000
Следующие два поля заполнятся автоматически и для поля source необходимо будет выбрать опцию anywhere IPv4.

00:10:18.000 --> 00:10:26.000
В этом случае автоматически проставится обозначение интернета, это IP-адрес со всеми нулями, slash 0.

00:10:26.000 --> 00:10:31.000
Также рекомендуется заполнять поле description, хоть оно и опциональное.

00:10:31.000 --> 00:10:34.000
Давайте сюда введем allow web access.

00:10:34.000 --> 00:10:43.000
В этом случае при следующем обращении к security группе и просмотру существующих рулов вы точно поймете для чего

00:10:43.000 --> 00:10:47.000
и возможно даже кто создавал конкретный рул.

00:10:47.000 --> 00:10:54.000
Как только мы введем эти изменения, давайте нажмем на кнопку create security group в нижней части страницы,

00:10:54.000 --> 00:10:57.000
чтобы создать нашу security группу.

00:10:57.000 --> 00:11:04.000
Как только мы это сделаем, мы можем переходить к созданию application сервера.

00:11:04.000 --> 00:11:07.000
Для этого нам необходимо перейти в сервис EC2.

00:11:07.000 --> 00:11:12.000
Мы можем воспользоваться строкой поиска сервисов и начать вводить EC2.

00:11:12.000 --> 00:11:15.000
Первая ссылка это та ссылка, которая нам нужна.

00:11:15.000 --> 00:11:23.000
Как только мы оказались на главной странице сервиса EC2, нам необходимо нажать на кнопку launch instance

00:11:23.000 --> 00:11:27.000
и перейти на соответствующую страницу для ввода входных данных.

00:11:27.000 --> 00:11:34.000
Как name необходимо указать app server, далее как операционную систему указываем Amazon Linux

00:11:34.000 --> 00:11:39.000
и оставляем значение по умолчанию Amazon Linux 2 AMI-HVM.

00:11:39.000 --> 00:11:45.000
Прокрутим чуть ниже. Для секции instance type нам необходимо выбрать T2 micro,

00:11:45.000 --> 00:11:50.000
далее как TPR необходимо выбрать из выпадающего списка WOK.

00:11:50.000 --> 00:11:55.000
И нам определенно нужно будет вносить изменения в настройке сети,

00:11:55.000 --> 00:11:59.000
поэтому в секции network settings необходимо нажать на кнопку edit.

00:11:59.000 --> 00:12:03.000
Как только мы это сделаем, как VPC необходимо выбрать lab VPC,

00:12:03.000 --> 00:12:13.000
далее как subnet необходимо выбрать public subnet и в поле ниже необходимо для security группы

00:12:13.000 --> 00:12:16.000
выбрать опцию select existing security group.

00:12:16.000 --> 00:12:20.000
Как только мы это сделаем, в выпадающем меню у нас будет возможность выбрать

00:12:20.000 --> 00:12:25.000
security группу, которую мы создали на предыдущем шаге.

00:12:25.000 --> 00:12:28.000
Отлично, все остальные значения остаются по умолчанию,

00:12:28.000 --> 00:12:33.000
нам необходимо прокрутить в самой низ страницы и развернуть секцию advanced settings.

00:12:33.000 --> 00:12:40.000
Здесь необходимо привязать специально созданную IAM роль к нашему EC2 инстанцу,

00:12:40.000 --> 00:12:48.000
поэтому в поле IAM instance profile выберем из выпадающего списка значение inventory uproll.

00:12:48.000 --> 00:12:53.000
Прокрутим в самой низ страницы и здесь необходимо из лабораторного задания

00:12:53.000 --> 00:12:57.000
скопировать набор команд и вставить в поле user data,

00:12:57.000 --> 00:13:02.000
после чего мы можем нажать на кнопку launch instance в правой части экрана.

00:13:02.000 --> 00:13:08.000
Запустится процесс создания инстанца, появится на следующей странице ссылка на instance,

00:13:08.000 --> 00:13:11.000
давайте на нее нажмем.

00:13:11.000 --> 00:13:15.000
Как только сервер запустится, еще нужно подождать некоторое время,

00:13:15.000 --> 00:13:24.000
когда она пройдет системные проверки и status check столбец поменяет свое значение.

00:13:24.000 --> 00:13:32.000
Вы можете воспользоваться кнопкой для обновления, либо обновлять всю страницу кнопкой F5.

00:13:32.000 --> 00:13:41.000
Через менее чем две минуты столбец status check поменяет значение 2 из 2 и все проверки пройдены.

00:13:41.000 --> 00:13:48.000
После этого мы можем выбрать наш сервер и в метаданах скопировать публичный IPv4 адрес.

00:13:48.000 --> 00:13:57.000
Необходимо скопировать это значение и открыть эту веб-страницу в отдельной веб-странице в вашем браузере.

00:13:57.000 --> 00:14:00.000
Как только вы это сделаете, откроется приложение.

00:14:00.000 --> 00:14:06.000
Здесь будет сказано о том, что необходимо сконфигурировать настройки для подключения к базе данных.

00:14:06.000 --> 00:14:10.000
В рамках этой лабораторной работы мы не будем подключаться к базе данных

00:14:10.000 --> 00:14:18.000
и если вы увидели это сообщение, значит мы сделали все настройки корректно и приложение работает.

00:14:22.000 --> 00:14:28.000
На этом мы завершили все задания. Теперь нам нужно запустить скрипт для автопроверки.

00:14:28.000 --> 00:14:35.000
Поэтому мы возвращаемся на страницу лабораторной работы и здесь необходимо нажать на кнопку submit.

00:14:35.000 --> 00:14:40.000
Выйдет всплывающее окно, которое просит нас подтвердить это действие.

00:14:40.000 --> 00:14:46.000
Да, мы нажимаем на кнопку yes и необходимо подождать некоторое время и дождаться результатов проверки.

00:14:46.000 --> 00:14:53.000
Как только проверка закончится, с правой стороны экрана появится набранное количество баллов.

00:14:53.000 --> 00:14:58.000
Если вы набрали максимальное количество баллов, я вас поздравляю, вы все сделали верно.

00:14:58.000 --> 00:15:04.000
Если же нет, вы всегда можете посмотреть в нижней части, на каком из заданий не хватает баллов.

00:15:04.000 --> 00:15:09.000
Далее вернуться к этому заданию и попробовать ее выполнить еще раз.

00:15:09.000 --> 00:15:13.000
После чего вы можете запустить оценивание еще раз.

00:15:13.000 --> 00:15:18.000
За дополнительные запуски автооценивания баллы не отнимаются.

00:15:18.000 --> 00:15:23.000
Отлично, теперь нам необходимо выйти правильно со всех систем.

00:15:23.000 --> 00:15:30.000
Первым делом возвращаемся в AWS Management консоль, нажимаем на имя пользователя в верхней правой части

00:15:30.000 --> 00:15:34.000
и в выпадающем списке нажимаем на кнопку sign out.

00:15:34.000 --> 00:15:41.000
Далее возвращаемся на страницу с лабораторной работы и необходимо здесь нам завершить лабораторную работу.

00:15:41.000 --> 00:15:46.000
Для этого нажимаем на кнопку end lab и подтверждаем это действие.

00:15:46.000 --> 00:15:51.000
Как только мы это сделаем, появится всплывающее окно и вы должны увидеть сообщение о том,

00:15:51.000 --> 00:15:57.000
что вы можете закрывать это окно и страницу с лабораторной работы.

00:15:57.000 --> 00:16:01.000
Отлично, мы с вами завершили разбор лабораторной работы.

00:16:01.000 --> 00:16:09.000
Я надеюсь, вы получили более полное представление о сервисе VPC и связанных с ней сервисах и компонентах.

00:16:09.000 --> 00:16:28.000
Спасибо за внимание, увидимся с вами на следующих наших активностях.