WEBVTT

00:00:00.000 --> 00:00:06.000
Добрый день, уважаемые студенты! Рад вас видеть
на очередной сессии разбора лабораторной работы.

00:00:06.000 --> 00:00:12.000
Тема сегодняшней лабораторной работы
– это создание VPC. Итак, давайте начнем.

00:00:14.000 --> 00:00:19.000
Начинаем мы с вами разбор лабораторной работы
 с главной страницы AWS Management Console.

00:00:19.000 --> 00:00:25.000
Переходим к выполнению первого задания.
Здесь нам необходимо перейти в сервис Amazon VPC.

00:00:25.000 --> 00:00:33.000
Далее, используя левое навигационное
меню, перейти к списку VPC в AWS Account.

00:00:33.000 --> 00:00:40.000
Существующие VPC использовать не будем, а создадим
новый. Для этого нажмем на кнопку Create VPC.

00:00:40.000 --> 00:00:43.988
Здесь нам необходимо выбрать
опцию VPC only, так как мы будем

00:00:44.012 --> 00:00:48.000
создавать все необходимые
компоненты по одному по отдельности.

00:00:48.000 --> 00:00:57.000
В будущем вы можете воспользоваться опцией VPC and
more и указать все детали дополнительных компонентов.

00:00:57.000 --> 00:01:02.000
Тогда вы за одно действие создадите
связку из нескольких сервисов.

00:01:04.000 --> 00:01:08.000
В поле Name необходимо
ввести Lab VPC.

00:01:08.000 --> 00:01:23.000
Как CIDR блок мы вводим то значение, которое
дано в рамках лабораторной работы. Это 10.0.0.0.16.

00:01:23.000 --> 00:01:30.552
Обратите внимание, что в секции
Tags появилась пара с ключом

00:01:30.576 --> 00:01:38.000
Name и со значением Lab VPC,
которые мы ввели чуть выше.

00:01:38.000 --> 00:01:44.000
На этом мы ввели все необходимые значения.
Теперь нажмем на кнопку Create VPC.

00:01:44.000 --> 00:01:50.000
Как только мы это нажмем, мы увидим соответствующее
сообщение, что VPC была успешно создана.

00:01:50.000 --> 00:01:53.000
Также нас направят на
основную страницу ресурса.

00:01:53.000 --> 00:01:59.211
Здесь нам необходимо сделать дополнительную
настройку, а именно нажать на кнопку Actions, в

00:01:59.235 --> 00:02:06.000
выпадающем меню выбрать опцию Edit VPC Settings
и здесь активировать опцию Enable DNS Hostnames.

00:02:06.000 --> 00:02:10.530
Это значит, что для всех
ресурсов, создаваемых в рамках

00:02:10.554 --> 00:02:15.000
этого VPC, будет привязываться
соответствующий DNS.

00:02:15.000 --> 00:02:19.000
Нужно поставить галочку
и нажать на кнопку Save.

00:02:19.000 --> 00:02:23.000
Отлично, мы создали VPC, теперь
можем переходить к созданию subnets.

00:02:23.000 --> 00:02:28.000
Для этого воспользуемся левым
навигационным меню и выберем опцию Subnets.

00:02:28.000 --> 00:02:34.737
Как только вы перейдете на страницу со списком
subnets, мы увидим, что у нас достаточно большое

00:02:34.761 --> 00:02:42.000
количество subnets во временно созданном AWS
аккаунте, но мы не будем их использовать.

00:02:42.000 --> 00:02:49.000
Нам необходимо создать subnets с нуля.
Для этого нажмем на кнопку Create Subnet.

00:02:49.000 --> 00:02:54.000
Здесь обязательно нужно будет
первым шагом выбрать VPC, это Lab VPC.

00:02:54.000 --> 00:02:58.205
Далее, в следующей секции
необходимо будет ввести как имя

00:02:58.229 --> 00:03:03.111
Public Subnet, а для Availability
Zone необходимо выбрать первую

00:03:03.135 --> 00:03:08.056
Availability Zone, внашемслучае
это us-east-1a, и как CIDR Block

00:03:08.080 --> 00:03:13.000
указать то значение, которое дано
в задании лабораторной работы.

00:03:13.000 --> 00:03:18.000
Необходимо проскроллить до конца
страницы и нажать на кнопку Create Subnet.

00:03:18.000 --> 00:03:23.488
Здесь есть один нюанс с Public Subnet.
Мы хотим, чтобы для всех ресурсов,

00:03:23.512 --> 00:03:29.000
создаваемых в этом subnet, автоматически
присваивались публичные IP-адреса.

00:03:29.000 --> 00:03:38.000
Для этого необходимо выбрать наш subnet, нажать на
кнопку Actions и выбрать опцию Edit Subnet Settings.

00:03:38.000 --> 00:03:43.000
Здесь есть галочка Enable
Auto-Assign Public IPv4 Address.

00:03:43.000 --> 00:03:49.000
Необходимо поставить галочку и в нижней
части страницы нажать на кнопку Save.

00:03:49.000 --> 00:03:56.000
Как только вы это сделаете, мы можем
переходить к созданию второго subnet.

00:03:56.000 --> 00:04:02.000
Для этого еще раз нажмем на кнопку Create Subnet
и нас направить на страницу ввода входных данных.

00:04:02.000 --> 00:04:08.210
Здесь мы выбираем тот же Lab VPC, как
Name указываем Private Subnet, как Availability

00:04:08.234 --> 00:04:14.000
Zone выбираем то же значение us-east-1a
и вводим соответствующий CIDR Block.

00:04:14.000 --> 00:04:18.133
Как только мы это все сделаем,
необходимо будет прокрутить

00:04:18.157 --> 00:04:22.000
до конца страницы и нажать
на кнопку Create Subnet.

00:04:22.000 --> 00:04:27.000
Отлично, мы создали все необходимые
subnets и переходим к следующему заданию.

00:04:27.000 --> 00:04:31.000
На следующем задании нам необходимо 
будет создать Internet gateway.

00:04:31.000 --> 00:04:38.000
Для этого также воспользуемся навигационным
меню слева и выберем опцию Internet Gateways.

00:04:38.000 --> 00:04:45.000
На этой странице вы увидите список
Internet gateways на этом AWS аккаунте.

00:04:45.000 --> 00:04:50.000
Нам необходимо создать новый, поэтому мы
нажимаем на кнопку Create Internet Gateway.

00:04:50.000 --> 00:04:59.000
Здесь необходимо ввести только название Internet
Gateway, в нашем случае Lab IGW, Internet Gateway.

00:04:59.000 --> 00:05:03.000
После этого необходимо нажать
на кнопку Create Internet Gateway.

00:05:03.000 --> 00:05:08.644
Как только вы создадите Internet
gateway, вас направят на основную страницу

00:05:08.668 --> 00:05:15.000
ресурса и здесь вы увидите кнопку, что
есть возможность сразу привязать ее к VPC.

00:05:15.000 --> 00:05:18.263
Если же по тем или иным
причинам вы это сообщение не

00:05:18.287 --> 00:05:22.000
видите, вы также можете
воспользоваться кнопкой Actions.

00:05:22.000 --> 00:05:28.000
И первый пункт - это Attach to VPC.
Давайте это сделаем.

00:05:28.000 --> 00:05:34.000
И после того, как мы нажмем на кнопку Attach to
VPC, нас направят на соответствующую страницу.

00:05:34.000 --> 00:05:39.000
Здесь необходимо будет выбрать
Lab VPC и сохранить изменения.

00:05:39.000 --> 00:05:43.988
Как только мы это сделаем, на
основной странице Internet gateway мы

00:05:44.012 --> 00:05:49.000
увидим State Attached, а также
ссылку на наш Lab VPC в поле VPC ID.

00:05:49.000 --> 00:05:53.000
Отлично, мы на этом завершили это задание.
Переходим к следующему.

00:05:53.000 --> 00:05:55.000
Сейчас будем настраивать
наши route tables.

00:05:55.000 --> 00:06:01.000
Давайте перейдем на Route tables,
воспользовавшись левым навигационным меню.

00:06:01.000 --> 00:06:05.488
Как только откроется
страница со списком route tables,

00:06:05.512 --> 00:06:10.000
мы увидим, что у нас уже
есть дефолтовый route table.

00:06:10.000 --> 00:06:15.000
Он автоматически привязывается
ко всем subnets в нашем VPC.

00:06:15.000 --> 00:06:22.000
И давайте найдем дефолтовый
route table, относящийся к Lab VPC.

00:06:22.000 --> 00:06:27.000
Как только вы это сделаете, в столбце
Name есть соответствующая кнопка.

00:06:27.000 --> 00:06:34.000
И используя эту кнопку, мы можем
ввести значение для тега с ключом Name.

00:06:34.000 --> 00:06:42.000
Давайте введем Private route table. Далее 
необходимо сохранить и выбрать наш route table.

00:06:42.000 --> 00:06:47.988
Далее необходимо открыть вкладку Routes,
и вы увидите, что там есть routing rule по

00:06:48.012 --> 00:06:54.000
умолчанию, который дает возможность
обмениваться информацией, ресурсами внутри VPC.

00:06:54.000 --> 00:06:59.000
Теперь нам необходимо
создать public route table.

00:06:59.000 --> 00:07:04.000
Для этого необходимо в верхней правой части
страницы нажать на кнопку Create route table.

00:07:04.000 --> 00:07:08.000
Нас направят на страницу
для ввода входных данных.

00:07:08.000 --> 00:07:16.000
Здесь необходимо как Name ввести Public route 
table, и выбрать в качестве VPC наш Lab VPC.

00:07:16.000 --> 00:07:19.000
И нажать на кнопку
Create route table.

00:07:19.000 --> 00:07:27.000
Как только вы это сделаете, нам необходимо
произвести некоторые изменения в public route table.

00:07:27.000 --> 00:07:33.000
Для этого необходимо перейти во
вкладку Routes и нажать на кнопку Edit routes.

00:07:33.000 --> 00:07:43.000
Здесь мы будем добавлять routing rule, чтобы
у этого subnet появился доступ к интернету.

00:07:43.000 --> 00:07:49.000
Для этого необходимо нажать на кнопку Add
route и в новой строчке ввести следующие значения.

00:07:49.000 --> 00:07:57.000
Для столбца Destination указать обозначение
интернета, это IP-адрес со всеми нулями, слеш ноль.

00:07:57.000 --> 00:08:01.000
Как Target необходимо указать Internet
gateway, который мы создали ранее.

00:08:01.000 --> 00:08:08.000
После чего необходимо
нажать на кнопку Save changes.

00:08:08.000 --> 00:08:12.988
Как только мы это сделали, нам
необходимо вспомнить и не забывать,

00:08:13.012 --> 00:08:18.000
что route table это отдельный
независимый самостоятельный ресурс.

00:08:18.000 --> 00:08:24.000
И чтобы он начал действовать, нам
необходимо его привязать к нашему subnet.

00:08:24.000 --> 00:08:32.000
Поэтому мы на основной странице Public route
table переходим во вкладку Subnet associations.

00:08:32.000 --> 00:08:39.000
Видим, что этот route table ни с чем не привязан.
Поэтому нажимаем на кнопку Edit subnet associations.

00:08:39.000 --> 00:08:43.000
Как только мы ее нажмем, вы увидите
список всех существующих subnet.

00:08:43.000 --> 00:08:47.277
Для private subnet ничего делать
не нужно, так как мы изменили

00:08:47.301 --> 00:08:52.000
дефолтовый route table и
переименовали его в private route table.

00:08:52.000 --> 00:09:00.000
А здесь необходимо для кастомного route
table выбрать public subnet и сохранить изменения.

00:09:00.000 --> 00:09:10.000
Как только вы это сделаете, мы фактически
превратим наш subnet в public subnet.

00:09:10.000 --> 00:09:14.000
И у всех ресурсов в этом subnet
появится доступ в интернет.

00:09:14.000 --> 00:09:19.000
На этом мы завершаем это
задание и переходим к следующему.

00:09:19.000 --> 00:09:25.000
В следующем задании нам необходимо будет
настроить security группу для нашего приложения.

00:09:25.000 --> 00:09:33.000
Чтобы это сделать, нам необходимо в левом
навигационном меню выбрать опцию Security groups.

00:09:33.000 --> 00:09:39.000
Мы окажемся на странице со списком
security group, созданных в этом AWS аккаунте.

00:09:39.000 --> 00:09:45.000
Нам необходимо создать новый, поэтому
нажимаем на кнопку Create security group.

00:09:45.000 --> 00:09:50.692
Здесь необходимо ввести как Security
group name App-SG, как Description

00:09:50.716 --> 00:09:56.000
необходимо ввести Allow HTTP
traffic и как VPC выбрать Lab VPC.

00:09:56.000 --> 00:10:00.000
Давайте прокрутим чуть ниже и
заполним секцию Inbound rules.

00:10:00.000 --> 00:10:04.000
Для этого необходимо нажать на
кнопку Add rule, появится новая строчка.

00:10:04.000 --> 00:10:10.509
Здесь необходимо как Type выбрать HTTP.
Следующие два поля заполнятся

00:10:10.533 --> 00:10:18.000
автоматически и для поля Source
необходимо будет выбрать опцию Anywhere-IPv4.

00:10:18.000 --> 00:10:26.000
В этом случае автоматически проставится обозначение
интернета, это IP-адрес со всеми нулями, слэш 0.

00:10:26.000 --> 00:10:31.000
Также рекомендуется заполнять поле
Description, хоть оно и опциональное.

00:10:31.000 --> 00:10:34.000
Давайте сюда введем
Allow web access.

00:10:34.000 --> 00:10:40.529
В этом случае при следующем обращении
к security группе и просмотру существующих

00:10:40.553 --> 00:10:47.000
рулов вы точно поймете для чего и
возможно даже кто создавал конкретный рул.

00:10:47.000 --> 00:10:51.603
Как только мы введем эти изменения,
давайте нажмем на кнопку Create

00:10:51.627 --> 00:10:57.000
security group в нижней части страницы,
чтобы создать нашу security группу.

00:10:57.000 --> 00:11:04.000
Как только мы это сделаем, мы можем
переходить к созданию Application server.

00:11:04.000 --> 00:11:07.000
Для этого нам необходимо
перейти в сервис EC2.

00:11:07.000 --> 00:11:12.000
Мы можем воспользоваться строкой
поиска сервисов и начать вводить EC2.

00:11:12.000 --> 00:11:15.000
Первая ссылка это та
ссылка, которая нам нужна.

00:11:15.000 --> 00:11:20.702
Как только мы оказались на главной
странице сервиса EC2, нам необходимо нажать на

00:11:20.726 --> 00:11:27.000
кнопку Launch instance и перейти на
соответствующую страницу для ввода входных данных.

00:11:27.000 --> 00:11:33.184
Как Name необходимо указать App server,
далее как операционную систему указываем

00:11:33.208 --> 00:11:39.000
Amazon Linux и оставляем значение
по умолчанию Amazon Linux 2 AMI (HVM).

00:11:39.000 --> 00:11:44.597
Прокрутим чуть ниже. Для секции Instance
type нам необходимо выбрать t2.micro,

00:11:44.621 --> 00:11:50.000
далее как Key pair name необходимо
выбрать из выпадающего списка vockey.

00:11:50.000 --> 00:11:54.488
И нам определенно нужно будет
вносить изменения в настройке сети,

00:11:54.512 --> 00:11:59.000
поэтому в секции Network settings
необходимо нажать на кнопку Edit.

00:11:59.000 --> 00:12:07.265
Как только мы это сделаем, как VPC необходимо
выбрать Lab VPC, далее как Subnet выбрать Public

00:12:07.289 --> 00:12:16.000
subnet и в поле ниже необходимо для security
группы выбрать опцию Select existing security group.

00:12:16.000 --> 00:12:20.556
Как только мы это сделаем, в
выпадающем меню у нас будет возможность

00:12:20.580 --> 00:12:25.000
выбрать security группу, которую
мы создали на предыдущем шаге.

00:12:25.000 --> 00:12:28.988
Отлично, все остальные значения
остаются по умолчанию, нам необходимо

00:12:29.012 --> 00:12:33.000
прокрутить в самый низ страницы и
развернуть секцию Advanced settings.

00:12:33.000 --> 00:12:40.488
Здесь необходимо привязать специально
созданную IAM роль к нашему EC2 инстансу, поэтому

00:12:40.512 --> 00:12:48.000
в поле IAM Instance Profile выберем из
выпадающего списка значение Inventory-App-Role.

00:12:48.000 --> 00:12:54.988
Прокрутим в самый низ страницы и здесь необходимо
из лабораторного задания скопировать набор команд и

00:12:55.012 --> 00:13:02.000
вставить в поле Userdata, после чего мы можем нажать
на кнопку Launch instance в правой части экрана.

00:13:02.000 --> 00:13:06.733
Запустится процесс создания
инстанса, появится на следующей

00:13:06.757 --> 00:13:11.000
странице ссылка на инстанс,
давайте на нее нажмем.

00:13:11.000 --> 00:13:17.488
Как только сервер запустится, еще
нужно подождать некоторое время, когда она

00:13:17.512 --> 00:13:24.000
пройдет системные проверки и status
check столбец поменяет свое значение.

00:13:24.000 --> 00:13:32.000
Вы можете воспользоваться кнопкой для
обновления, либо обновлять всю страницу кнопкой F5.

00:13:32.000 --> 00:13:41.000
Через менее чем две минуты столбец status check
поменяет значение 2 из 2 и все проверки пройдены.

00:13:41.000 --> 00:13:48.000
После этого мы можем выбрать наш сервер и в
метаданных скопировать публичный IPv4 адрес.

00:13:48.000 --> 00:13:57.000
Необходимо скопировать это значение и открыть эту
веб-страницу в отдельной веб-странице в браузере.

00:13:57.000 --> 00:14:00.000
Как только вы это сделаете,
откроется приложение.

00:14:00.000 --> 00:14:06.000
Здесь будет сказано, что необходимо сконфигурировать
настройки для подключения к базе данных.

00:14:06.000 --> 00:14:11.706
В рамках этой лабораторной работы мы не
будем подключаться к базе данных и если вы

00:14:11.730 --> 00:14:18.000
увидели это сообщение, значит мы сделали
все настройки корректно и приложение работает.

00:14:22.000 --> 00:14:28.000
На этом мы завершили все задания. Теперь нам 
нужно запустить скрипт для автопроверки.

00:14:28.000 --> 00:14:35.000
Поэтому мы возвращаемся на страницу лабораторной
работы и здесь необходимо нажать на кнопку Submit.

00:14:35.000 --> 00:14:40.000
Выйдет всплывающее окно, которое
просит нас подтвердить это действие.

00:14:40.000 --> 00:14:46.000
Да, мы нажимаем на кнопку Yes и необходимо подождать
некоторое время и дождаться результатов проверки.

00:14:46.000 --> 00:14:53.000
Как только проверка закончится, с правой стороны
экрана появится набранное количество баллов.

00:14:53.000 --> 00:14:58.000
Если вы набрали максимальное количество
баллов, я вас поздравляю, вы все сделали верно.

00:14:58.000 --> 00:15:04.000
Если же нет, вы всегда можете посмотреть в нижней
 части, на каком из заданий не хватает баллов.

00:15:04.000 --> 00:15:09.000
Далее вернуться к этому заданию и
попробовать ее выполнить еще раз.

00:15:09.000 --> 00:15:13.000
После чего вы можете
запустить оценивание еще раз.

00:15:13.000 --> 00:15:18.000
За дополнительные запуски
автооценивания баллы не отнимаются.

00:15:18.000 --> 00:15:23.000
Отлично, теперь нам необходимо
выйти правильно со всех систем.

00:15:23.000 --> 00:15:28.631
Первым делом возвращаемся в AWS
Management Console, нажимаем на имя пользователя

00:15:28.655 --> 00:15:34.000
в верхней правой части и в выпадающем
списке нажимаем на кнопку Sign out.

00:15:34.000 --> 00:15:41.000
Далее возвращаемся на страницу лабораторной работы
и необходимо здесь нам завершить лабораторную работу.

00:15:41.000 --> 00:15:46.000
Для этого нажимаем на кнопку
End lab и подтверждаем это действие.

00:15:46.000 --> 00:15:51.700
Как только мы это сделаем, появится
всплывающее окно и вы должны увидеть сообщение

00:15:51.724 --> 00:15:57.000
о том, что вы можете закрывать это
окно и страницу с лабораторной работы.

00:15:57.000 --> 00:16:01.000
Отлично, мы с вами завершили
разбор лабораторной работы.

00:16:01.000 --> 00:16:09.000
Я надеюсь, вы получили более полное представление о
сервисе VPC и связанных с ней сервисах и компонентах.

00:16:09.000 --> 00:16:14.000
Спасибо за внимание, увидимся с
вами на следующих наших активностях.