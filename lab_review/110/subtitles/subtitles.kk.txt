Қайырлы күн, құрметті студенттер! Келесі зертханалық жұмысты талдау сессиясында көргеніме қуаныштымын. Бүгінгі зертханалық жұмыстың тақырыбы - VPC құру. Ендеше, бастайық. Зертханалық жұмысты талдауды AWS Management Console негізгі парақшасынан бастаймыз. Бірінші тапсырмаға көшейік. Мұнда Amazon VPC сервисіне бару керек. Содан кейін AWS аккаунтыңыздағы VPC тізіміне өту үшін сол жақ шарлау мәзірін пайдаланыңыз. Біз бар VPC қолданбаймыз, жаңасын жасаймыз. Ол үшін Create VPC батырмасын басыңыз. Мұнда VPC only таңдауымыз керек, өйткені біз барлық қажетті құрамдастарды жеке-жеке жасаймыз. Болашақта VPC and more опциясын пайдалануға және қосымша құрамдастардың барлық мәліметтерін көрсетуге болады. Сонда сіз бір әрекетте бірнеше сервистердің бумасын жасайсыз. Name өрісіне Lab VPC енгіземіз. CIDR блогы ретінде зертханалық жұмыстың аясында берілген мәнді енгіземіз. Бұл 10.0.0.0.16. Tags бөлімінде жоғарыда енгізген Name кілті мен Lab VPC мәні бар жұп пайда болғанын ескеріңіз. Осымен барлық қажетті мәндерді енгіздік. Енді Create VPC батырмасын басыңыз. Оны басқаннан кейін VPC сәтті жасалғаны туралы тиісті хабарламаны көреміз. Сондай-ақ, ресурстың негізгі парақшасына бағытталатын боламыз. Мұнда қосымша параметрлерді енгізуіміз керек, атап айтқанда Actions батырмасын басыңыз, ашылмалы мәзірде Edit VPC Settings опциясын таңдаңыз және осы жерде Enable DNS Hostnames опциясын белсендіріңіз. Бұл осы VPC ішінде жасалған барлық ресурстарға сәйкес DNS байланыстырылатынын білдіреді. Құсбелгіні қойып, Save батырмасын басуыңыз керек. Жақсы, VPC жасадық, енді subnets құруға көшуге болады. Ол үшін сол жақ шарлау мәзірін пайдаланып, Subnets опциясын таңдаңыз. Subnets тізімі бар парақшаға өткеннен кейін, бізде уақытша жасалған AWS аккаунтында subnet-тердің жеткілікті үлкен саны бар екенін көреміз, бірақ соған қарамастан біз оларды пайдаланбаймыз. Біз басынан бастап subnets жасауымыз керек. Ол үшін Create Subnet батырмасын басыңыз. Мұнда бірінші қадам міндетті түрде VPC таңдау керек, бұл Lab VPC. Әрі қарай, келесі бөлімде атау ретінде Public Subnet енгізу керек, ал Availability Zone үшін бірінші Availability Zone таңдау керек, біздің жағдайда ол us-east-1a, ал CIDR блогы ретінде зертханалық тапсырмада берілген мәнді көрсету керек. Парақшаның төменгі жағына жылжып, Create Subnet батырмасын басу керек. Public Subnet-ке қатысты бір ескерту бар. Біз осы subnet-те жасалған барлық ресурстарға автоматты түрде жалпы IP мекенжайлары тағайындалғанын қалаймыз. Ол үшін subnet таңдап, Actions батырмасын басып, Edit Subnet Settings опциясын таңдаңыз. Enable Auto-Assign Public IPv4 Address құсбелгісі бар. Құсбелгіні қойып, парақшаның төменгі жағындағы Save батырмасын басуыңыз керек. Мұны орындағаннан кейін екінші subnet құруға көшеміз. Ол үшін Create Subnet батырмасын қайтадан басыңыз және деректерді енгізу парақшасына бағытталамыз. Мұнда сол Lab VPC таңдаймыз, Name ретінде Private Subnet көрсетеміз, Availability Zone ретінде us-east-1a мәнін таңдаймыз және сәйкес CIDR блогын енгіземіз. Осының бәрін орындағаннан кейін парақшаның төменгі жағына жылжып, Create Subnet батырмасын басамыз. Жақсы, барлық қажетті subnets жасадық және келесі тапсырмаға көшеміз. Келесі тапсырмада Internet gateway жасауымыз керек. Ол үшін сол жақтағы шарлау мәзірін қолданамыз және Internet Gateways опциясын таңдаймыз. Бұл парақшада осы AWS аккаунтындағы Internet gateways тізімін көресіз. Бізге жаңасын жасау керек, сондықтан Create Internet Gateway батырмасын басамыз. Мұнда тек Internet Gateway атын енгізу керек, біздің жағдайда Lab IGW, Internet Gateway. Осыдан кейін Create Internet Gateway батырмасын басуыңыз керек. Internet gateway жасағаннан кейін ресурстың негізгі парақшасына бағытталасыз және мұнда оны VPC-ге дереу байланыстыруға мүмкіндік беретін батырманы көресіз. Егер қандай да бір себептермен бұл хабарды көрмесеңіз, Actions батырмасын пайдалануға болады. Ал бірінші пункт - Attach to VPC. Оны басайық. Attach to VPC батырмасын басқаннан кейін тиісті парақшаға бағытталамыз. Мұнда Lab VPC таңдап, өзгертулерді сақтау керек. Мұны жасағаннан кейін Internet gateway негізгі парақшасында State Attached, сондай-ақ VPC ID өрісінде Lab VPC сілтемесін көреміз. Жақсы, тапсырманы орындадық. Келесіге көшейік. Енді route tables баптаймыз. Сол жақ шарлау мәзірі арқылы Route tables өтейік. Route tables тізімі бар парақша ашылғаннан кейін бізде әдепкі route table бар екенін көреміз. Ол VPC ішіндегі барлық subnet-терге автоматты түрде қосылады. Және Lab VPC-ге қатысты әдепкі route table табайық. Мұны орындағаннан кейін Name бағанында сәйкес батырма болады. Осы батырманы басып, Name кілтімен тегтің мәнін енгізе аламыз. Private route table кірейік. Мұны істегеннен кейін route table сақтап, таңдауымыз керек. Содан кейін Routes қойындысын ашу керек, сонда VPC ішінде ақпарат пен ресурстармен алмасуға мүмкіндік беретін әдепкі routing rule бар екенін көресіз. Енді public route table жасауымыз керек. Ол үшін парақшаның жоғарғы оң жақ бөлігіндегі Create route table батырмасын басыңыз. Кіріс деректерді енгізетін парақшаға бағытталамыз. Мұнда Name ретінде Public route table енгізіп, VPC ретінде Lab VPC таңдаңыз. Және Create route table батырмасын басыңыз. Мұны істегеннен кейін, public route table-ге кейбір өзгерістер енгізуіміз керек. Ол үшін Routes қойындысына өтіп, Edit routes батырмасын басыңыз. Мұнда осы subnet Интернетке қол жеткізе алатындай етіп routing rule қосамыз. Ол үшін Add route батырмасын басып, келесі мәндерді жаңа жолға енгізіңіз. Destination бағанында Интернеттің белгілеуін көрсетуіңіз керек, бұл барлық нөлдер қиғаш сызық 0 бар IP мекенжайы. Target ретінде бұрын жасаған Internet gateway көрсетуіңіз керек. Содан кейін Save changes батырмасын басу керек. Оны жасағаннан кейін, route table жеке тәуелсіз ресурс екенін есте сақтау және ұмытпау керек. Ол жұмыс істей бастау үшін оны subnet-ке байланыстыру керек. Сондықтан, Public route table негізгі парақшасында Subnet associations қойындысына өтеміз. Бұл route table ештеңеге байланбағанын көріп отырмыз. Сондықтан Edit subnet associations батырмасын басыңыз. Оны басқаннан кейін барлық бар subnet тізімін көресіз. Private subnet үшін ештеңе істеудің қажеті жоқ, өйткені біз әдепкі route table өзгерттік және оның атын private route table деп өзгерттік. Енді реттелетін route table үшін public subnet таңдап, өзгертулерді сақтау керек. Мұны орындағаннан кейін subnet-ті public subnet-ке айналдырамыз. Және осы subnet-тегі барлық ресурстар Интернетке кіру мүмкіндігіне ие болады. Осымен бұл тапсырманы орындап, келесі тапсырмаға көшеміз. Келесі тапсырмада қолданбамыз үшін security groups баптауымыз керек. Ол үшін сол жақтағы шарлау мәзірінен Security groups опциясын таңдау керек. Осы AWS аккаунтында жасалған security group тізімі бар парақшаға бағытталамыз. Бізге жаңасын жасау керек, сондықтан Create security group батырмасын басыңыз. Мұнда Security group name ретінде App-SG енгізу керек, Description ретінде Allow HTTP traffic енгізу керек және VPC ретінде Lab VPC таңдау керек. Кішкене төмен айналдырып, Inbound rules бөлімін толтырайық. Ол үшін Add rule батырмасын басыңыз, жаңа жол пайда болады. Мұнда Type ретінде HTTP таңдау керек. Келесі екі өріс автоматты түрде толтырылады және Source өрісі үшін Anywhere-IPv4 опциясын таңдаймыз. Бұл жағдайда Интернет белгісі автоматты түрде енгізіледі, нөлдер қиғаш сызық 0 IP мекенжайы. Description өрісін толтыру ұсынылады, бірақ ол міндетті емес. Мұнда Allow web access деп енгізейік. Бұл жағдайда security group-қа келесі жолы кіргенде, бар ережелерді көргенде, нақты rule-ды не үшін және кім жасағанын білетін боласыз. Осы өзгерістерді енгізгеннен кейін, security group-ты құру үшін парақшаның төменгі жағындағы Create security group батырмасын басайық. Мұны орындағаннан кейін Application server құруға көшеміз. Ол үшін EC2 сервисіне ауысу керек. Сервистерді іздеу жолағын пайдаланып, EC2 деп теруді бастаймыз. Бірінші сілтеме - бізге қажет сілтеме. EC2 сервисінің негізгі парақшасына кіргеннен кейін, кіріс деректерін енгізу үшін Launch instance батырмасын басып, тиісті парақшаға өтуіміз керек. Name ретінде App server көрсету керек, содан кейін операционды жүйе ретінде Amazon Linux параметрін көрсетіп, Amazon Linux 2 AMI (HVM) әдепкі мәнін қалдыру керек. Кішкене төмен айналдырайық. Instance type бөлімі үшін t2.micro таңдау керек, содан кейін ашылмалы тізімнен Key pair name ретінде vockey таңдау керек. Және міндетті түрде желі параметрлеріне өзгертулер енгізуіміз керек, сондықтан Network settings бөлімінде Edit батырмасын басу керек. Кейін VPC ретінде Lab VPC таңдауыңыз керек, Subnet ретінде Public subnet таңдауыңыз керек және төмендегі өрісте security group үшін Select existing security group опциясын таңдауыңыз керек. Содан кейін ашылмалы мәзірде алдыңғы қадамда жасаған security group таңдау мүмкіндігі болады. Жақсы, барлық басқа мәндер әдепкі болып қалады, парақшаның ең төменгі жағына жылжып, Advanced settings бөлімін кеңейтуіміз керек. Мұнда арнайы жасалған IAM рөлін EC2 инстансына байланыстыруымыз керек, сондықтан IAM Instance Profile өрісінде ашылмалы тізімнен Inventory-App-Role мәнін таңдаңыз. Парақшаның ең төменгі жағына жылжып, зертханалық тапсырмадан командалар жинағын көшіріп, оны Userdata өрісіне қою керек, содан кейін экранның оң жағындағы Launch instance батырмасын басуға болады. Инстанс жасау процесі басталады, келесі парақшада инстансқа сілтеме пайда болады, оны басайық. Сервер іске қосылғаннан кейін ол жүйелік тексерулерден өткенше және status check бағаны оның мәнін өзгерткенше біраз уақыт күтуіңіз керек. Жаңарту батырмасын пайдалануға немесе F5 пәрмені арқылы бүкіл парақшаны жаңартуға болады. Екі минут ішінде status check бағаны 2/2-ге өзгереді және барлық тексерулер өтті деп есептелінеді. Осыдан кейін серверімізді таңдап, метадеректерде жалпыға қолжетімді IPv4 мекенжайын көшіре аламыз. Бұл мәнді көшіріп, осы веб-парақшаны браузеріңізде бөлек веб-парақшада ашуыңыз керек. Мұны жасағаннан кейін қосымша ашылады. Мұнда дерекқорға қосылу үшін параметрлерді баптау қажет екендігі айтылады. Осы зертхананың аясында біз дерекқорға қосылмаймыз және бұл хабарды көрсеңіз, бұл барлық параметрлерді дұрыс жасағанымызды және қосымша сәтті жұмыс істеп тұрғанын білдіреді. Осымен барлық тапсырмаларды орындадық. Енді автоматты тексеру скриптін іске қосуымыз керек. Сондықтан, зертханалық жұмыс парақшасына оралып, Submit батырмасын басамыз. Бұл әрекетті растауымызды сұрайтын қалқымалы терезе пайда болады. Иә, Yes батырмасын басамыз және біраз уақыт тексеру нәтижелерін күту керек. Тексеру аяқталғаннан кейін сіз жинаған ұпайлар саны экранның оң жағында пайда болады. Егер ең көп ұпай жинасаңыз, құттықтаймыз, сіз бәрін дұрыс жасадыңыз. Олай болмаса, қай тапсырмада ұпай жетіспейтінін төменгі жағында көре аласыз. Содан кейін сол тапсырмаға оралып, оны қайтадан орындап көріңіз. Содан кейін бағалауды қайта іске қосуға болады. Қосымша авто бағалау үшін ұпайлар шегерілмейді. Жақсы, енді барлық жүйелерден дұрыс шығуымыз керек. Ең алдымен, AWS Management Console-ге ораламыз, жоғарғы оң жақтағы пайдаланушы атын және ашылмалы тізімде Sign out батырмасын басыңыз. Әрі қарай зертханалық жұмыс парақшасына ораламыз және мұнда зертханалық жұмысты аяқтауымыз керек. Ол үшін End lab батырмасын басып, осы әрекетті растаңыз. Мұны істегеннен кейін қалқымалы терезе пайда болады және осы терезені және зертханалық жұмыстың парақшасын жабуға болатындығы туралы хабарды көресіз. Жақсы, зертханалық жұмысты талдауды аяқтадық. Сіз VPC сервисі мен онымен байланысты сервистер мен құрамдас бөліктерді жақсырақ түсіндіңіз деп үміттенемін. Назарларыңызға рахмет, келесі белсенділіктерде кездескенше.