Добрый день, уважаемые студенты! Мы с вами начинаем разбор вопроса Practice Test-а. Согласно вопросу, компания настроила свою инфраструктуру в VPC со следующим CIDR block. Она таким образом подключается к локальному дата-центру. У вас есть следующее требование. Есть Lambda функция, которая обрабатывает некоторый объем криптовалютных транзакций каждую минуту и сохраняет результаты в EFS. После того как вы все настроили, подключили Lambda функцию к VPC, Solutions Architect замечает, что в некоторые моменты времени в течение дня увеличивается количество ошибок на стороне Lambda с EC2 ошибкой, EC2ThrottledException и вам нужно выбрать два возможных варианта ответа, которые приводят к этой ошибке. На этом слайде вы видите все варианты ответов, также видите что 2 и 4 являются верными. Я бы хотел отметить, что этот вопрос является достаточно сложным, он требует понимания взаимодействия нескольких AWS сервисов и в этом случае мы попробуем применить некоторую хитрость. То есть, зная некоторые основные моменты связанные с AWS, мы можем исключить некоторые заведомо неверные варианты ответов. Таким образом оставить два либо три варианта ответов, которые могут быть верными и увеличить вероятность того, что мы правильно ответим на этот вопрос. Такой подход к ответу не запрещается, это нормально и вы как Solutions Architect должны уметь использовать все ваши знания для решения конкретной задачи. Давайте пройдемся по каждому из неверных вариантов и попробуем их с объяснением исключить. Первый вариант ответа говорит о том, что на стороне Security группы, подключенной к нашей Lambda функции, не достает некоторых rules, а именно outbound rules. Согласно вопросу мы видим, что Lambda успешно отрабатывает все запросы и успешно записывает результаты на EFS. Только в некоторые моменты в течение дня выходят ошибки. Это говорит о том, что в целом set up верный и мы упираемся в пиковые моменты, в некоторые другие ограничения, а с точки зрения выдачи доступов и прав все нормально. Таким образом первый вариант мы можем исключить. То же самое относится к пятому варианту, где рекомендуется посмотреть IAM role, подключенной к Lambda и удостовериться все ли необходимые права выданы. Так как Lambda функция работает успешно и только в некоторые моменты не работает, а роль наша она выдана и настроена в самом начале и в течение работы Lambda она не меняется. Таким образом этот вариант тоже мы можем исключить. Если мы говорим про третий вариант ответа, он утверждает, что у VPC нет NAT Gateway. NAT Gateway, вспомним, нужен для того, чтобы наши ресурсы в private subnet-е через public subnet могли подключаться к интернету. NAT Gateway либо NAT Instance они находятся в public subnet-е. Особенностью NAT Gateway является то, что ресурсы с private subnet-а могут обращаться к интернету, а из интернета к ресурсам из private subnet-а обратиться не могут, так как NAT Gateway это делать запрещает. Согласно вопросу, нам дают некоторый факт, что есть часть инфраструктуры, которая хостится на локальном дата-центре и дальше эта идея не развивается, ничего не упоминается о том, что в рамках выполнения задачи мы обращаемся в локальный дата-центр, поэтому это больше похоже как ложная информация, которая должна запутать нас. Зная, что мы с интернетом не работаем, внешних подключений не происходит, все происходит внутри нашего VPC, мы этот вариант также можем исключить. Остается второй и четвертый вариант, который является верными. Теперь давайте подробнее остановимся на верных вариантах ответа и почему они являются верными. Когда Lambda подключается к VPC и начинает работать с ресурсами внутри VPC, при настройке мы передаем некоторые данные для Lambda, в результате Lambda получает некоторый IP адрес. Мы с вами помним, что при настройке VPC, при настройке subnets мы всегда указываем CIDR блок. CIDR блок определяет какие IP адреса и какое количество IP адресов помещается внутри CIDR блока. Таким образом, зная, что Lambda в пиковые нагрузки может легко масштабироваться, а так как она масштабируется в рамках VPC ему нужны новые IP адреса. И если этих новых IP адресов не хватает, по тем или иным причинам Lambda не сможет отработать, не сможет масштабироваться. Таким образом, вариант, где утверждается, что не хватает ENIs, то есть IP адресов внутри subnet-а, является верным. Другой вариант является также верным, так как в нём говорится следующее: мы настроили Lambda функцию для работы с одной availability zone. Если бы мы настроили несколько availability zone, то при нехватке IP адресов в одной availability zone он бы попробовал создать инстанс Lambda в другом subnet-е, в котором достаточное количество свободных IP адресов. На следующих слайдах вы увидите более полное объяснение этого вопроса, с которым вы не спеша можете ознакомиться. На этом мы разобрали вопрос Practice Test-а. Спасибо за внимание.