 Добрый день, уважаемые студенты! Мы с вами начинаем разбор вопроса practice теста. Согласно вопросу, у компании во владении несколько AWS аккаунтов, они все подключены к AWS Organizations. Вам необходимо скопировать несколько S3 объектов в другой S3 bucket, который находится на другом AWS аккаунте. Оба аккаунта находятся в вашем владении. Вам как слоушенск архитектору было дано задание настроить все необходимые права доступа, чтобы выполнить это задание. Также вам необходимо обеспечить следующие скопированные объекты. Они должны быть доступны для пользователей в destination аккаунте, а для source аккаунта должны быть недоступны. Нам необходимо выбрать вариант ответа, который помогает нам эту задачу выполнить. На этом слайде вы видите варианты ответов, также видите, что первый вариант является верным. Я бы здесь хотел еще раз отметить, что с теми знаниями, которые у вас есть по AWS, вы с легкостью можете исключать один или несколько вариантов ответа заведомо ложных. Давайте попробуем поступить следующим образом, а потом, после разберем и верный вариант ответа. Если мы говорим про второй вариант, здесь предлагается использовать функционал Requester Pays для того, чтобы получить некоторые скидки и выплаты. Ни слова не говорится про permission. Сходя из этого, мы можем исключить этот вариант ответа. Если мы говорим про третий вариант ответа, здесь предлагается использовать сервис Amazon WorkDocs и далее произвести настройки до S3 bucket, сделать файлы общими и таким образом скопировать на destination bucket. Это не сработает по той простой причине, так как WorkDocs предоставляется по модели SaaS, software as a service. Идея в том, что это готовый сервис, где вы можете менять его минимально, только некоторые user based настройки. Производить интеграцию с S3 невозможно, поэтому этот вариант мы тоже можем исключить. Если мы говорим про четвертый вариант ответа, то здесь говорится про course. Я напомню, что course это термин не относящийся напрямую к AWS, не относящийся к облачным технологиям. Course пришел к нам из веб-разработки, там часто используется и здесь упоминается так, как у S3 есть возможность настраивать course policy. Что такое course policy? Вкратце напомню, это некоторый документ, который прописывается в первом веб-сайте для того, чтобы из второго веб-сайта можно было использовать данные из первого веб-сайта. То есть, course прописывает те веб-сайты, которые могут обращаться к вашему веб-сайту. Так как здесь идет больше речь про веб-сайты, а в вопросе у нас речь идет про S3-бакеты и передачу данных в рамках глобальной инфраструктуры AWS, при этом не выходя в интернет, то этот вариант мы тоже можем исключить. Остается первый вариант, который является верным. Давайте теперь остановимся на верном варианте ответа и почему оно таковым является. Здесь нам предлагается настроить для source-бакета policy. Оно разрешает второму аккаунту получать объекты из этого бакета. Далее нам необходимо на стороне второго аккаунта настроить пользователя Libreroll, у которого есть возможность получать данные из source-бакета и загружать файлы в destination-бакет, который находится в том же AWS-аккаунте, что и этот user или role. После того, как мы это все настроим, мы фактически, сидя в destination-аккаунте, cross account запросим нужные нам объекты и в свой родной аккаунт в нужный S3 bucket положим наши объекты. Почему важно, чтобы role или пользователь был в destination-бакете? Идея в том, что аккаунтом, владельцем файлов при записи в S3 bucket является тот аккаунт, который записывает. Если мы это делаем cross account, то при записи из аккаунта A, что является source, запишем в account B, cross account, то на стороне destination-бакета владельцем файлов внутри этого бакета будет другой аккаунт. И даже если это ваш аккаунт, это ваш bucket, вы не сможете обратиться к объектам внутри бакета, владельцем который вы не являетесь. Поэтому нам необходимо, чтобы пользователь был на стороне destination-аккаунта, таким образом при записи он относится к тому же аккаунту, соответственно, проблем с доступом не возникнет. Единственная здесь задача, правильно прописать policy на стороне source-аккаунта, source-бакета, чтобы эти данные можно было cross-account получить. На следующих слайдах вы можете посмотреть детальный разбор вопроса. На этом мы завершаем разбор вопроса practice теста. Спасибо за внимание.
