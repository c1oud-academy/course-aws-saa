WEBVTT

00:00:00.000 --> 00:00:07.480
Добрый день, уважаемые студенты. Мы с вами 
начинаем разбор вопроса Practice Test-а.

00:00:07.480 --> 00:00:11.840
Согласно вопросу, у компании во
владении несколько AWS аккаунтов.

00:00:11.840 --> 00:00:21.579
Они подключены к AWS Organizations. Необходимо
скопировать несколько S3 объектов в другой S3

00:00:21.603 --> 00:00:31.240
bucket, который находится на другом AWS аккаунте.
Оба аккаунта находятся в вашем владении.

00:00:31.240 --> 00:00:34.459
Вам как Solutions Architect
было дано задание настроить

00:00:34.483 --> 00:00:38.120
все необходимые права доступа,
чтобы выполнить это задание.

00:00:38.120 --> 00:00:49.800
Также вам необходимо обеспечить
следующие скопированные объекты.

00:00:49.800 --> 00:00:56.108
Они должны быть доступны
для пользователей в Destination

00:00:56.132 --> 00:01:02.440
аккаунте, а для Source аккаунта
должны быть недоступны.

00:01:02.440 --> 00:01:10.640
Нам необходимо выбрать вариант ответа,
который помогает эту задачу выполнить.

00:01:10.640 --> 00:01:20.360
На этом слайде вы видите варианты ответов.
Также видите, что первый вариант является верным.

00:01:20.360 --> 00:01:26.114
Я бы здесь хотел еще раз отметить, что с
теми знаниями, которые у вас есть по AWS,

00:01:26.138 --> 00:01:32.320
вы с легкостью можете исключать один или
несколько вариантов ответа, заведомо ложных.

00:01:32.320 --> 00:01:38.680
Давайте попробуем поступить следующим образом,
а потом после разберем верный вариант ответа.

00:01:38.680 --> 00:01:45.828
Если мы говорим про второй вариант, здесь
предлагается использовать функционал Requester Pays

00:01:45.852 --> 00:01:53.000
для того, чтобы получить некоторые скидки или
выплаты и ни слова не говорится про permission.

00:01:53.000 --> 00:01:57.480
Исходя из этого, мы можем
исключить этот вариант ответа.

00:01:57.480 --> 00:02:01.756
Если мы говорим про
третий вариант ответа, здесь

00:02:01.780 --> 00:02:06.968
предлагается использовать
сервис Amazon WorkDocs и далее

00:02:06.992 --> 00:02:11.669
произвести настройки до
S3 bucket-ов, сделать файлы

00:02:11.693 --> 00:02:17.120
общими и таким образом
скопировать на destination bucket.

00:02:17.120 --> 00:02:21.084
Это не сработает по той
простой причине, так как WorkDocs

00:02:21.108 --> 00:02:25.640
предоставляется по модели
SaaS, то есть Software As A Service.

00:02:25.640 --> 00:02:30.588
Идея в том, что это готовый
сервис, где вы можете менять

00:02:30.612 --> 00:02:35.560
его минимально, только
некоторые user-based настройки.

00:02:35.560 --> 00:02:43.600
А производить интеграцию с S3 невозможно,
поэтому этот вариант мы тоже можем исключить.

00:02:43.600 --> 00:02:48.400
Если мы говорим про четвертый вариант
ответа, то здесь говорится про CORS.

00:02:48.400 --> 00:02:54.376
Я напомню, что CORS это термин, не
относящийся напрямую к AWS, не относящийся к

00:02:54.400 --> 00:03:00.760
облачным технологиям. CORS пришел к
нам из веб-разработки, там часто используется.

00:03:00.760 --> 00:03:06.640
И здесь упоминается, так как у S3 есть
возможность настраивать CORS policy.

00:03:06.640 --> 00:03:16.446
Что такое CORS policy, вкратце напомню. Это
некоторый документ, который прописывается в первом

00:03:16.470 --> 00:03:27.120
веб-сайте для того, чтобы из второго веб-сайта
можно было использовать данные из первого веб-сайта.

00:03:27.120 --> 00:03:36.920
То есть CORS он как бы прописывает те веб-сайты,
которые могут обращаться к вашему веб-сайту.

00:03:36.920 --> 00:03:42.383
Так как здесь идет больше речь
про веб-сайты, а в вопросе у нас речь

00:03:42.407 --> 00:03:48.279
идет про S3 bucket и передачу данных
в рамках глобальной инфраструктуры

00:03:48.303 --> 00:03:53.604
AWS, при этом не выходя в интернет,
то этот вариант мы тоже можем исключить.

00:03:53.628 --> 00:03:58.680
Остается первый вариант,
который является верным.

00:03:58.680 --> 00:04:04.080
Давайте теперь остановимся на верном
варианте ответа и почему оно таковым является.

00:04:04.080 --> 00:04:08.840
Здесь нам предлагается
настроить policy для source bucket.

00:04:08.840 --> 00:04:19.800
Оно разрешает второму аккаунту
получать объекты из этого bucket.

00:04:19.800 --> 00:04:25.537
Далее нам необходимо на
стороне второго аккаунта настроить

00:04:25.561 --> 00:04:32.408
пользователя либо роль, у которого
есть возможность получать данные

00:04:32.432 --> 00:04:38.931
из source bucket и загружать
файлы в destination bucket, который

00:04:38.955 --> 00:04:45.040
находится в том же AWS
аккаунте, что и этот user или роль.

00:04:45.040 --> 00:04:54.064
После того как мы это все настроим,
мы фактически сидя в destination аккаунте,

00:04:54.088 --> 00:05:04.520
cross-account запросим нужные нам объекты и
в свой родной аккаунт положим наши объекты.

00:05:04.520 --> 00:05:10.000
Почему важно, чтобы роль или
пользователь был в destination bucket?

00:05:10.000 --> 00:05:16.648
Идея в том, что аккаунтом-владельцем
файлов при записи

00:05:16.672 --> 00:05:23.320
в S3 bucket является тот
аккаунт, который записывает.

00:05:23.320 --> 00:05:28.230
Если мы это делаем
cross-account, то при записи из

00:05:28.254 --> 00:05:33.666
аккаунта A, что является
source, запишем в аккаунт B,

00:05:33.690 --> 00:05:39.566
cross-account, то на стороне
destination bucket владельцем

00:05:39.590 --> 00:05:44.640
файлов внутри этого
bucket будет другой аккаунт.

00:05:44.640 --> 00:05:51.293
И даже если это ваш аккаунт, это
ваш bucket, вы не сможете обратиться

00:05:51.317 --> 00:05:57.480
к объекту внутри bucket,
владельцем которого вы не являетесь.

00:05:57.480 --> 00:06:03.968
Поэтому нам необходимо, чтобы пользователь
был на стороне destination аккаунта, таким образом

00:06:03.992 --> 00:06:10.480
при записи он относится к тому же аккаунту,
соответственно проблем с доступом не возникнет.

00:06:10.480 --> 00:06:16.522
Единственная здесь задача, правильно
прописать policy на стороне source

00:06:16.546 --> 00:06:23.280
аккаунта, source bucket, чтобы эти
данные можно было cross-account получить.

00:06:23.280 --> 00:06:39.800
На следующих слайдах вы можете
посмотреть детальный разбор вопроса.

00:06:39.800 --> 00:06:43.800
На этом мы завершаем разбор вопроса 
Practice Test-а. Спасибо за внимание.