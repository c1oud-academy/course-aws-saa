Қайырлы күн, құрметті студенттер! Келесі дәрісте көргеніме қуаныштымын.
Бұл алдыңғы апта тақырыбының, атап айтқанда Compute Layer, жалғасы.
Есептеулермен байланысты сервистерге тоқталатын боламыз.
Бұл - екінші және соңғы бөлім.
Ендеше, бастайық.
Бүгінгі дәрісте Amazon EC2 сервисіне қатысты қалған екі бөлімді қарастырамыз.
Бірінші бөлім қолданыстағы төлем үлгілеріне қатысты, ал екінші бөлім Placement Groups туралы болады.
Бұл - EC2 ішінде сұралатын серверлердің физикалық орнын басқару әдісі.
Әрі қарай, Демо белсенділіктегі Spot инстанстарын мұқият қарастырамыз, зертханалық жұмыстар болады.
Бұл - Challenge Lab, онда ең аз нұсқаулықтар аласыз және көп жағдайда берілген мәселені өзіңіз шешесіз.
Яғни, бизнес мәселе бар және оны техникалық тұрғыдан шешуге тырысасыз.
Зертханалық жұмыстың тақырыбы – кафеміздің динамикалық веб-сайтын құру.
Lab Intro және Lab Review деген екі бөлек белсенділік болады.
Ендеше, жетінші бөлімді бастаймыз.
Өйткені бір үлкен тақырып аясында бөлім нөмірлері үзіліссіз келе жатыр.
Енді Amazon EC2 сервисі үшін қолжетімді төлем үлгілеріне тоқталайық.
Бес түрлі төлем үлгісі бар.
Енді олардың әрқайсысын толығырақ қарастырамыз.
Ең біріншісі - On-Demand Instances мезгілдік, уақытша немесе қысқа мерзімді жүктемелер үшін пайдаланылады.
Тарификация инстанс түріне байланысты секундына немесе сағатына саналатын болады.
Бір мысал келтірейін.
Мысалы, кейбір ресурстарды қажет ететін есептеулерді орындау керек.
Сізге үш сағат ішінде белгілі бір түрдің 100 инстансы қажет делік.
Барлығы 300 сағат болады.
Тарификация сағатына немесе секундына болғандықтан, сізде бұл есептеулерді барынша тиімді жүргізу мүмкіндігіңіз бар.
Сіз AWS API-ге сұраныс жасайсыз, 100 дананы орнатасыз және тапсырмаңызды іске қосасыз.
Олар жұмыс істегеннен кейін сіз бірнеше сағаттан кейін жалға алынған инстанстарды қайтара аласыз және айдың соңында тарифке сәйкес инстанстың белгілі бір түрі үшін тек осы 300 сағаттың төлеміне шот аласыз.
Бұл жұмыс жүктемеңіз туралы толық білмесеңіз, ең тиімді төлем үлгісі болып саналады.
Оның үстіне, алдын ала ештеңе төлемейсіз, тек пайдаланғаныңыз үшін төлейсіз.
Келесі төлем үлгісі - Reserved Instances.
Идея мынада: сіз AWS-пен осы кезеңге белгілі бір есептеу қуатын жалға алу туралы бір немесе үш жылға келісім жасайсыз.
Осылайша, осы инстанстарды бір жыл немесе үш жыл бойы жалға алуға және төлеуге міндеттенгеніңізді біле отырып, AWS өзінің деректер орталықтарының, оның жаһандық инфрақұрылымының дамуын оңайырақ жоспарлай алады және сәйкесінше, бұл көмек үшін айтарлықтай жеңілдіктер беруге дайын.
Енді Reserved Instances сатып алу керек себебін қарастырайық.
Сіз киім сататын интернет-дүкен екеніңізді елестетіп көрейік, ал күндізгі уақытта қалыпты күндерде жүктеме жұмыс істейтін 10 EC2 инстансын қажет етеді.
Түнде, бәрі ұйықтап жатқанда, сізде әлі де белгілі бір жүктеме бар және кем дегенде үш инстанс әрқашан қолданыста болмақ.
Осылайша, сіз кем дегенде үш инстанстың тәулік бойы жұмыс істейтінін білесіз.
Бұл үш инстанс Reserved Instances үлгісіне өте жақсы сәйкес келеді, өйткені сіз кез келген жағдайда осы үш инстансқа тәулік бойы төлейтін боласыз.
Егер бұл Reserved Instances болса, бұл үшін айтарлықтай жеңілдіктер аласыз.
Мен AURI, PURI және NURI сияқты ұғымдарды да атап өткім келді.
Бұл не? Бұл - Reserved Instances үшін әртүрлі төлем опциялары.
AURI - бұл All Up-front Reserved Instances.
Идея мынада: бір жыл немесе үш жыл ішінде төлеуге тура келетін барлық нәрсені төлейсіз, көрсетілген инстанстардың саны үшін бүкіл соманы бірден төлейсіз.
Partial Up-front Reserved Instances деп аталатын PURI көмегімен сіз 50 пайызын алдын ала төлеп, қалған 50 пайызын ай сайын төлейсіз.
Ең соңғысы NURI – No Up-front Reserved Instances.
Идея мынада: алдын ала ештеңе төлемейсіз, жай ғана келісім-шартқа отырасыз және On Demand Instances сияқты бөлінген есептеу қуаты үшін ай сайын төлейсіз.
Бұл жағдайда ең төменгі жеңілдік беріледі.
Ең жоғары жеңілдік All Up-front Reserved Instances үш жылға таңдасаңыз беріледі және керісінше, ең төменгі жеңілдік бір жылға No Up-front Reserved Instances болса беріледі.
Үшінші төлем үлгісі - Savings Plans.
Бұл - салыстырмалы түрде жаңа төлем үлгісі.
Идея мынада: сіз сондай-ақ бір жылдық немесе үш жылдық келісім-шартқа тұрасыз, бірақ Savings Plans кейбір мүмкіндіктері бар, бұл оларды Reserved Instances-қа қарағанда икемді шешім етеді.
Мұнда Amazon EC2, AWS Lambda және AWS Fargate сияқты сервистер қатысады.
Осы сервистердің біреуін немесе бірнешеуін пайдалансаңыз, Savings Plans қарастырсаңыз болады.
Идея мынада: сіз доллардың сағатына қатынасына байланыстысыз.
Бұл инстанс түрлерін оңай өзгертуге мүмкіндік береді.
Бұл бір жылға немесе үш жылға алдын ала жоспарлау кезінде өте жақсы артықшылық болып табылады.
Төртінші төлем үлгісі - Spot Instances.
Бұл максималды жеңілдік беретін төлем үлгісі - 90 пайызға дейін.
Идея мынада: үлкен AWS дата-центрлерінде барлық аппараттық құрал әрқашан қолданыста болмайды, яғни AWS тұтынушылары пайдаланбайды.
Сондықтан олар жұмыс істемей тұрып қалады.
Олардың жұмыссыз тұрмауын қамтамасыз ету үшін AWS оларды айтарлықтай жеңілдікпен пайдалануға ұсынады.
Бірақ белгілі бір нюанс бар.
Сіз өте үлкен жеңілдікпен іске қосып жатқандықтан, бұл инстанстарды On-demand бойынша пайдалану үшін қажет болса, екі минут ішінде әрбір инстансқа екі минуттан кейін бұл Spot Instances өшіріледі, өйткені олар On-demand pricing шеңберінде басқа клиентке тасымалданады деген жеке хабарлама аласыз.
Тиісінше, осы екі минут ішінде сіз кез келген жұмысыңызды өшіруіңіз немесе оны басқа инстанс түріне ауыстыруыңыз керек.
Егер бұл инстанстың әрекеті сіз үшін қалыпты болса немесе шешіміңізді бизнеске әсер етпейтіндей етіп дайындай алсаңыз, есептеу мүмкіндігін айтарлықтай жеңілдіктермен іске қоса аласыз.
Amazon Linux немесе Ubuntu инстанстары үшін тарификация секунд бойынша болады, кемінде 60 секунд.
Барлық басқа операциялық жүйелер үшін тарификация сағат сайын және ең жақын сағатқа дейін дөңгелектенеді, яғни оны жаңадан іске қосқан болсаңыз, ол бір сағатқа дейін дөңгелектенеді.
Сондай-ақ, Spot-тың тағы бір түрі бар - Spot Blocks.
Идея мынада, белгілі бір инстанстардың санын жеңілдікпен сұрай аласыз, бірақ 90 пайыз емес, шамамен 40-50 пайыз, бұл да жақсы, бір сағаттан алты сағатқа дейін қажет нақты уақыт мөлшерін көрсете аласыз, содан кейін олар автоматты түрде өшеді, егер көбірек уақыт қажет болса, қайта сұрау керек.
Бұл жағдайда қызмет ету мерзімін алдын ала анықтайсыз және бұл инстантарды осы уақыттың соңына дейін AWS өшіре алмайды немесе талап ете алмайды, бірақ сіз Spot Block инстанстарын тәулік бойы пайдалана алмайтыныңызды көресіз, өйткені олар да қысқа мерзімді болып саналады.
Бұл Spot Blocks идеясы, сондай-ақ бос тұрған инстанстар бар және егер барлық инстанстар басқа төлем үлгілері арқылы сұралса, Spot сұрауы қазіргі уақытта тегін Spot инстанстар жоқ екенін көрсететін қате береді.
Сондықтан, кез келген Spot инстанстарын пайдаланған кезде, ол Spot инстанстары немесе Spot Block болсын, бұл инстанстар қолжетімді болмаса, не істеу керектігін қосымша жоспарлауыңыз керек.
Келесі және соңғы төлем үлгісі - Dedicated Hosts, бұл физикалық түрде EC2 құрылғысын иелену қажет болғанда, яғни басқа AWS клиенттері AWS дата-центрдегі бір серверді физикалық түрде қолдана алмайды.
Бұл талаптар қандай болуы мүмкін? Ең танымалдары - лицензиялау талаптары, егер сіз қандай да бір бірегей бағдарламалық құралды қолдансаңыз, реттеуші талаптар немесе сіз жұмыс істейтін саладағы кез келген басқа талаптар болуы мүмкін.
Бұл жағдайда да AWS шешім ұсынатынын көресіз - бұл Dedicated Hosts.
Dedicated Hosts іске асыру кезінде AWS деректер орталығындағы кеңістік бірлігіне шаққанда қуатты даналардың саны бірнеше AWS клиенттері арасында виртуалды түрде реттеп, бөле алатындықтан, Dedicated Hosts төлем үлгісі On Demand инстанстарына қарағанда қымбатырақ екені анық, бірақ кейбір компанияларда мұндай талаптар бар және олар оны басқа жолмен шеше алмайды, оның талаптарын бұзбау үшін Dedicated Hosts пайдалануға мәжбүр.
Dedicated Instances-та екі опция бар: Dedicated Instances және Dedicated Hosts.
Dedicated Hosts сізге инстанстарыңызды көбірек бақылауға мүмкіндік береді және Dedicated Hosts-пен сіз Reserved Instances төлем үлгісін пайдалана аласыз.
Dedicated Instances бұл мүмкіндікке ие емес, сонда да AWS серверлеріне оқшауланған қолжетімділік береді.
Amazon EC2 сервисін пайдаланудан максималды пайда алу үшін төлем үлгілерін біріктіру ұсынылады.
Тәулік бойы өзгермейтін және тұрақты жүктемелеріңіз үшін Reserved Instances немесе Savings Plans пайдалану ұсынылады.
Жоспарлауға болатын, жиі пайда бола бермейтін басқа жүктемелер үшін, мысалы, бұл мерекелер алдындағы күндер, адамдар көбірек сатып алатын болса, бұл жағдайда киім-кешек, тұрмыстық техника және т.б. сататын барлық сайттардағы жүктеме артады және барлық компаниялар бұл жерде жүктеменің белгілі бір пайызға өсетінін біледі.
Мұны біле отырып, уақытша немесе қысқа мерзімді барлық үстеме жүктемелер үшін On Demand төлем үлгісімен іске қосуға болады.
Бұл жүктеме өткеннен кейін сіз Reserved Instances немесе Savings Plans арқылы үлкен жеңілдікпен сатып алған инстанстармен қаласыз.
Сондай-ақ, оңай тоқтатылатын, оңай қалпына келтірілетін шығындардың тағы бір түрі бар.
Мұндай жұмыс жүктемелері үшін Spot Instances пайдалану ұсынылады.
Осымен біз Amazon EC2 сервисіндегі әртүрлі төлем үлгілерін мұқият қарастырдық.
Біз келесі бөлімге көшеміз.
Біз сегізінші бөлімге жеттік, енді Placement Groups туралы сөйлесетін боламыз.
Бұл - сіздің инстанстарыңыз Availability zone-да физикалық түрде қалай орналасатынын басқаруға мүмкіндік беретін мүмкіндік.
Үш түрлі стратегия бар.
Cluster - бұл бір шегі, Partition, Strategy - бұл ортаңғы бір түрі және Spread - инстанстарыңыздың орналасуының басқа шегі.
Әр стратегияны толығырақ қарастырайық.
Cluster Placement Group - инстанстарды бір-біріне мүмкіндігінше жақын орналастыруға көмектесетін стратегия.
Бұл жағдайда олардың ортақ желісі бар, олар желі бойымен мүмкіндігінше жақын орналасады, осылайша арна кеңірек және мәліметтерді берудегі кідіріс минималды болады.
Кейбір қолданба түрлері мұны талап етеді, сондықтан сіз Cluster Placement Group пайдаланасыз.
Есте сақтау керек нәрсе, дата-центр инфрақұрылымының кейбір құрамдас бөліктері осы инстанстардың барлығына ортақ болады және бұл аппараттық құрал сәтсіз болса, кейбір немесе барлық инстанстарыңыз қолжетімсіз болуы мүмкін.
Бұл жағдайда бұл инстанстарды басқа availability zone-да орнату қажет болады.
Келесі стратегия - Partition Placement Group - бұл алтын орта.
Алдыңғы стратегиямен салыстырғанда, біз кейбір жалпы аппараттық құралдарға байланысты қолданбаның қолжетімсіз болып қалу қаупін таратуға тырысамыз және партициялардың белгілі бір санын анықтаймыз және әрбір партицияда инстанстардың белгілі бір саны бар.
Сонымен қатар, бұл партициялар бірнеше availability zone-да орналасуы мүмкін.
Осылайша, кейбір инстанстар жақын болғандықтан бір-бірімен тиімді әрекеттесе алады.
Бірақ басқа партицияға физикалық түрде қосылмаған басқа партиция бар және егер бір партиция, оның барлық инстанстары немесе бөлігі құласа, басқа партицияларға әсер етпейді.
Келесі стратегия - Spread Placement Group - бұл сіздің инстансыңызды орналастырудың басқа шегі.
Идеясы - әрбір инстанс жеке серверлік сөреде қатаң орналасуында.
Осылайша, белгілі бір аппараттық құралдың істен шығуы бірнеше инстансқа әсер етуі екіталай.
Бұл placement Group-ты бірнеше availability zone-да кеңейтуге болады.
Осылайша, соңғы бөлімімізді аяқтаймыз және availability zone-да инстанстарды таратудың қандай стратегиялары бар екенін және қандай жағдайларда қолдану керектігін талдадық.
Бүгінгі дәрісті аяқтамас бұрын мен Challenge Lab туралы бірнеше сөз айтқым келеді.
Зертханалық жұмыстың бір бөлігі ретінде кафе үшін динамикалық веб-сайт жасаймыз.
Кейс бойынша, статикалық веб-сайтты іске қосқаннан кейін бәрі жақсы болды, клиенттер риза болды, енді олар біздің веб-сайтқа онлайн тапсырыс беру опциясын қосуды сұрады.
Бұл күрделі өзгерістерді қажет етеді, өйткені бұған дейін сайт статикалық болды, енді ол динамикалық болуы керек және қандай да бір қосымшаны жазуды талап етеді.
Зертханалық жұмыстың бір бөлігі ретінде қосымшаның өзін жазбаймыз, ол бұрын біз үшін жасалған, бірақ AWS инфрақұрылымына қатысты барлық нәрсені жасаймыз.
Мұнда Challenge Lab бөлігі ретінде орындайтын жеті тапсырманың қысқаша сипаттамасын көресіз, сонымен қатар нәтижесінде алатын инфрақұрылымды көресіз.
Қысқасы, бізде instance, EC2 серверінде жұмыс істейтін қосымша болады, бөлек деректер базасы болады, сонымен қатар қосымшаны сәтті іске қосу үшін VPC, Public Subnet, Security Groups сияқты қосымша ресурстарды жасаймыз және осы инфрақұрылымның барлығы бір аймақта орналасады.
Тапсырманың бір бөлігі ретінде басқа аймақтағы инфрақұрылымды көшіру қажет болады және болашақта жағдайға сәйкес бірінші аймақты Dev environment ретінде, ал екінші аймақты Prod environment ретінде пайдаланамыз.
Осылайша, біз Dev environment-те жаңа функционалдылықты дамытамыз, оны сынаймыз, содан кейін оны Prod environment-ке тасымалдаймыз.
Сайттың ең дұрыс, соңғы нұсқасы сонда іске қосылады және наубайхананың нақты тұтынушыларының деректер базасы да бөлек сақталады.
Осымен есептеулерге байланысты дәрістер топтамасы аяқталды.
Біз Amazon EC2 сервисін егжей-тегжейлі талқыладық - бұл есептеулерге қатысты ең негізгі сервистердің бірі.
Сіз толық түсініктеме алдыңыз деп үміттенемін.
Бұл слайдта пайдалы сілтемелерді көресіз, сілтемені енгізудің қажеті жоқ, іздеу жүйесіне көрсетілген кілт сөздерді енгізесіз және қажет парақша іздеу нәтижелеріндегі бірінші жарнамалық емес сілтеме болады.
Осымен бүгінгі дәріс аяқталды.
Назарларыңызға рахмет! Келесі белсенділіктерде кездескенше.
