Қайырлы күн, құрметті студенттер! Барлығыңызды келесі Демо сессияда көргеніме қуаныштымын. Бүгінгі Демоның тақырыбы - AWS Console арқылы VPC және барлық қажетті құрамдастарды жасау. Ендеше, бастайық. Бүгінгі Демоның аясында келесі архитектураны құрастырамыз. Бір аймақтағы, бұл us-east-1 немесе North Virginia болсын, бір AWS аккаунтында VPC жасайық. Ол келесі CIDR блогы бар DEMO_VPC деп аталады. Демоның аясында жасайтын барлық ресурстар us-east-1a availability zone-да орналасады. Бұл North Virginia аймағындағы бірінші availability zone. Әрі қарай, екі subnet құру керек. Біріншісі public болады. Оны тек public деп атамай, нақты public ету керек. Ол үшін қандай қадамдар жасау керек екенін дәрістерден еске түсіреміз. Атап айтқанда, subnet құру керек. Содан кейін Internet gateway жасап, оны VPC-ге байланыстырыңыз. Содан кейін, қажет болса, route table жасап, баптаңыз және сол жерге келесі rules енгізіңіз. Бірінші rule стандартты болып табылады, VPC ішінде ақпарат пен ресурстармен алмасуға мүмкіндік береді. Және Интернетке кіруді қамтамасыз ететін қосымша rule жасау керек. Яғни, Интернетті Destination ретінде көрсетеміз, ал Internet gateway Target ретінде қолданамыз. Әрі қарай, subnet-ті осы route table-ге байланыстыруымыз керек. Осыдан кейін, біздің public subnet шын мәнінде public болады және осы subnet-те жасалған барлық ресурстар Интернетке қол жеткізе алады. Әрі қарай, private subnet жасаймыз және де осы subnet-тегі ресурстарға Интернетке кіру мүмкіндігін беруіміз керек. Ол үшін біз NAT gateway қолданамыз, Elastic IP мекенжайын осы NAT gateway-мен байланыстырамыз және private subnet-ке арналған route table-де қосымша routing rule жазамыз, ол Интернетті Destination ретінде көрсетеді, бірақ Target ретінде NAT gateway ID көрсетеді. Мұны орындап, private route table-ді private subnet-ке байланыстырғаннан кейін private subnet-тегі барлық ресурстар қажетті рұқсатқа ие болады. Ендеше, бастайық. AWS Management Console негізгі парақшасынан бастаймыз. Бұл жерде бірінші North Virginia дұрыс аймақта екенімізді тексеру керек. Осыдан кейін VPC сервисіне барамыз, ол үшін сервисті іздеу жолағын пайдалануымыз керек және ең бірінші сілтеме - бізге қажет сілтеме. VPC сервисіне кіргеннен кейін, сол жақтағы шарлау мәзірін пайдаланып, Your VPCs пунктін таңдаңыз. Мұны жасағаннан кейін AWS аккаунтындағы барлық VPC тізімін көреміз. Демо аясында жаңа VPC жасаймыз, сондықтан жоғарғы оң жақтағы Create VPC батырмасын қолданамыз. Осы батырманы басқаннан кейін кейбір кіріс мәліметтерін енгізуіміз керек болатын VPC жасау парақшасына бағытталамыз. Бұл әрекеттің аясында тек VPC жасаймыз және VPC and more опциясын таңдап, қосымша қандай құрамдастарды жасау керектігін көрсету мүмкіндігі бар. Болашақта екінші нұсқаны пайдаланасыз, бірақ Демо үшін әрбір ресурсты жеке жасаймыз. Нәтижесінде бірдей инфрақұрылымды аламыз, оны сол немесе басқа жолмен де алуға болады. VPC only опциясын таңдаңыз, содан кейін Name tag ретінде DemoVPC енгізіңіз және CIDR блогы ретінде басында анықтаған мәнді енгізіңіз. Қалған параметрлерді сол күйінде қалдырамыз, сонымен қатар Name = DemoVPC кілт-мәні тегтер бөлімінде автоматты түрде толтырылғанын ескеруге болады. Содан кейін Create VPC батырмасын басамыз және жаңадан жасалған VPC парақшасына бағытталамыз және DemoVPC сәтті жасағанымыз туралы тиісті хабарламаны көреміз. Енді Демоның келесі бөлігіне көшеміз және осы жерде нақты public subnet құру үшін қажетті барлық қадамдарды орындаймыз. Ол үшін VPC сервисінде сол жақ шарлау мәзірін пайдаланып, subnets тізіміне өту керек. Бізді бұрыннан бар subnets қызықтырмайды, біз жаңасын жасап жатырмыз, сондықтан Create Subnet батырмасын басамыз. Біз subnet құру парақшасына бағытталамыз, онда кіріс деректерін енгізуіміз керек. Бірінші кезекте VPC таңдау керек. Subnet VPC-мен қатаң байланыста жасалатынын есте ұстаймыз. DemoVPC таңдаңыз және парақшаны сәл төмен жылжытыңыз. Subnet name ретінде біз PublicSubnet, Availability zone ретінде us-east-1a таңдаймыз және CIDR блогы ретінде тапсырмамыздың бір бөлігі ретінде басында талқылаған келесі мәндерді көрсетеміз. Енді парақшаның ең төменгі жағына өтеміз. Мұнда сонымен қатар Name кілті бар тег пен PublicSubnet мәні автоматты түрде толтырылғанын ескеріңіз. Енді барлық қажетті мәндерді енгізгеннен кейін Create Subnet батырмасын басуға болады. Мұны істегеннен кейін subnets тізіміне бағытталасыз және ол жаңа ғана жасаған subnet бойынша фильтрленеді. Енді Internet gateways жасау үшін сол жақ шарлау мәзірін пайдалануымыз керек. Internet gateway тізіміне көшейік. Ағымдағы аккаунтымызда Internet gateway жоқ, сондықтан жаңасын жасаймыз. Ол үшін Create Internet gateway батырмасын басыңыз. Name ретінде DemoIG енгіземіз, DemoIGVW деп те енгізе аламыз, бұл сіздің қалауыңыз бойынша. Мұнда басқа параметрлерді енгізе алмаймыз, name тегі автоматты түрде толтырылады және бұл жерде Create Internet gateway батырмасын басу керек. Мұны істегеннен кейін Internet gateway ресурстық парақшасына бағытталамыз және оның күйін Detached деп көресіз. Оны VPC-ге байланыстыруымыз керек. Мұны бірнеше жолмен жасауға болады және жоғарғы оң жақта Attach to a VPC батырмасы бар. Бұл - Internet gateway жасағаннан кейін бірден ұсынылатын әрекет. Егер мұндай хабар көрсетілмесе немесе кейінірек Internet gateway мен VPC арасында байланысты жасауға оралсаңыз, онда Actions батырмасын пайдаланып, сол жерден Attach to a VPC опциясын таңдауға болады. Мұны басқаннан кейін VPC таңдайтын негізгі жалғыз өрісті толтыру қажет парақшаға бағытталасыз. Тізімнен DemoVPC таңдаңыз және Attach Internet gateway батырмасын басыңыз. Жақсы, енді Internet gateway күйі Attached екенін және VPC ID ретінде біздің DemoVPC деп толтырылғанын көреміз. Енді route tables баптауымыз керек. Мұны істеу үшін сол жақтағы шарлау мәзірін қолданамыз және Route tables пунктін таңдаймыз. Мұнда жаңасын жасауымыз керек, бұл кастомдық route table болады, оны public subnet-ке байланыстырамыз. Create route table батырмасын басайық. Кіріс деректерді енгізу парақшасында PublicRouteTable-ді атау ретінде және DemoVPC-ді VPC ретінде енгіземіз. Бұл route table құру үшін қажетті негізгі параметрлер және осы жерде оны жасау үшін парақшаның төменгі жағындағы Create route table батырмасын басуға болады. Оны басқаннан кейін ресурстың негізгі парақшасына бағытталамыз. Сіз route table сәтті жасалғаны туралы хабарламаны көресіз. Сондай-ақ,парақшаның төменгі жағындағы қойындылардан көре аласыз, Routes қойындысында бір VPC ішінде осы ресурстарды алмасуға көмектесетін бір стандартты route көреміз. Ол үшін жаңа routing rule жасау керек, ол үшін Edit rules батырмасын басыңыз. Мұнда Add route батырмасын басып, қажетті өрістерді толтыруды бастаймыз. Destination ретінде Интернет мәнін көрсетеміз, бұл барлық нөлдерден кейін қиғаш сызық нөлден тұратын IP мекенжайы. Target ретінде Internet gateway көрсетілуі керек. Осымен барлық қажетті мәндерді енгіздік және парақшаның төменгі жағындағы Save changes батырмасын басу керек. Келесі қадам. Кастомды құрылған route table subnet-пен байланысты болуы керек, сондықтан Subnet associations қойындысына өтуіміз керек және осы жерден байланысты subnets жоқ екенін көресіз, сондықтан Edit subnet associations батырмасын басу керек. Осыны басқаннан кейін байланыстыру үшін қолжетімді subnet-тердің тізімі көрсетіледі, бұл жалғыз subnet - public subnet. Оны таңдап, Save associations батырмасын басыңыз. Жақсы, subnet route table-ге сәтті қосылғаны туралы хабарды көреміз және осы кезеңде public subnet-ті шын мәнінде public subnet-ке айналдырдық. Бүгінгі Демоның екінші бөлігіне жеттік, енді private subnet-тегі ресурстарды Интернетке қол жетімділікпен қамтамасыз ету үшін барлық қажетті қадамдарды жасаймыз. Ол үшін ең алдымен private subnet құру керек. Мұны істеу үшін Amazon VPC сервисінде сол жақ шарлау мәзіріндегі Subnets пунктіне өту керек. Осы AWS аккаунтындағы subnets тізімін көреміз. Мұнда Create Subnet батырмасын басуымыз керек. Барлық параметрлер бірдей, VPC ретінде DemoVPC таңдау керек, Subnet name ретінде PrivateSubnet-ті тіркейміз, Availability zone ретінде біріншісін таңдаймыз, яғни us-east-1a және зертханалық жұмыстың басында анықтаған CIDR блогын тіркейміз. Ең төменгі жағына қарай жылжып, мұнда name кілті бар тегтің сәйкес мәнді толтырғанын көреміз. Осымен барлық қажетті мәндерді енгіздік және Create Subnet батырмасын басуға болады. Оны жасағаннан кейін келесі бөлімге өтеміз. Бізге NAT gateway жасау керек, бірақ NAT gateway жасамас бұрын жасалған Elastic IP мекенжайы қажет, сондықтан сол жақ шарлау мәзірінде Elastic IPs таңдаймыз. Барлық Elastic IP мекенжайлары бар парақшаға кірген бойда Allocate Elastic IP address батырмасын басыңыз. Мұнда барлық мәндерді сол күйінде қалдырамыз, бірінші өрісте қалаған аймақ таңдалғанына көз жеткізу керек - North Virginia. Егер бәрі дұрыс болса, парақшаның ең төменгі жағына жылжып, Allocate батырмасын басыңыз. Elastic IP мекенжайы сәтті жасалғаны туралы хабарды көреміз және келесі Static IP мекенжайы бар. Жақсы, енді NAT Gateway құруға көшеміз. Мұнда сол жақтағы шарлау мәзірін қолданамыз және NAT gateways опциясын таңдаймыз. Мұнда Create NAT gateways батырмасын басу керек және кіріс деректерін енгізуге арналған парақшаға бағытталамыз. Subnet өрісінде Public subnet таңдауымыз керек, өйткені біз осы public subnet-те NAT gateway жасаймыз. Әрі қарай, Connectivity Type әдепкі Public мәнінде қалады, және бұл жерде бұрын жасаған Elastic IP address таңдау керек. Ол ашылмалы мәзірде пайда болуы керек. Бұл - осы жерде енгізу қажет барлық мәндер. Парақшаның төменгі жағына жылжып, Create NAT gateway батырмасын басамыз. Жақсы,ресурстың негізгі парақшасына бағытталамыз. Мұнда күйдің Pending екенін көреміз. Келесі қадамдарға өте береміз. Біраз уақыттан кейін NAT gateway күйі Available күйіне өзгереді. Әрі қарай жүреміз. Мұнда private subnet үшін route table жасау керек, сондықтан сол жақ шарлау мәзірінен сәйкес пунктті таңдап, осы AWS аккаунтындағы route tables тізіміне өтеміз. Мұнда Create route table батырмасын басып, барлық қажетті кіріс мәндерін енгізу керек. Name ретінде PrivateRouteTable енгіземіз және VPC ретінде DemoVPC көрсетеміз. Содан кейін парақшаның төменгі жағындағы Create route table батырмасын басыңыз. Мұны жасағаннан кейін ресурстың негізгі парақшасына бағытталамыз. Мұнда бірнеше қойындыларды көреміз. Бірінші қойынды - Routes. Егер оны бассаңыз, бір стандартты routing rule көреміз. Бізге тағы біреуін жасау керек. Ол үшін Edit routes батырмасын басыңыз. Келесі парақшадаAdd route батырмасын басып, қажетті мәндерді енгізу керек, атап айтқанда, Destination ретінде Интернеттің мәнін көрсетеміз және Target ретінде бұрын жасаған NAT gateway көрсетеміз. Содан кейін Save changes батырмасын басыңыз. Жақсы. Енді келесі қадам. Route table тәуелсіз ресурс екенін және оны сәйкес subnet-терге байланыстыруды ұмытпаңыз. Бұл әрекетті орындау үшін Subnet associations қойындысына өтіңіз және мұнда бұл route table ешқандай subnet пайдаланбайтынын көреміз. Мұны түзетіп, Edit subnet associations батырмасын басыңыз. Мұнда осы route table-ді байланыстыра алатын барлық бар subnet-терді көреміз. Public subnet үшін бөлек кастомдық route table жасап қойдық және ол байланыстырылған. Мұны тиісті бағанда көруге болады. Мұнда private subnet таңдап, Save associations батырмасын басу керек. Жақсы. Енді private subnet-ті анық байланыстырылған subnets тізімінде көреміз. Осымен бүгінгі Демоның тапсырмаларын орындадық және енді қандай ресурстар жасағанымызды қарастырайық. Ең алдымен, DemoVPC жасадық, содан кейін екі subnet жасадық - public subnet және private subnet. Әрбір subnet үшін сәйкес route table жасап, оларды subnet-термен байланыстырдық. Содан кейін Internet gateway, статикалық IP мекенжайы бар Elastic IP мекенжайын жасадық және NAT gateway жасау үшін Elastic IP мекенжайын қолдандық. Осымен бүгінгі Демоның соңына келдік. Барлығы түсінікті болды деп үміттенемін. Түсінбейтін ақпарат болса, сұрақтарыңызды қойыңыз. Мүмкіндігінше жауап береміз. Бүгінгі сабағымызды аяқтаймыз. Назарларыңызға рахмет. Келесі белсенділіктерде кездескенше.