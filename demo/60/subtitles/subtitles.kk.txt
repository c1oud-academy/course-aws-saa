Қайырлы күн, құрметті студенттер! Келесі Демо сессияда көргеніме қуаныштымын.
Бүгін EC2 инстансын жасауға, user data қосып, оның қалай жұмыс істейтінін көреміз.
Ендеше, бастайық.
Демоны AWS Management Console негізгі парақшасынан бастаймыз.
EC2 инстансын жасауды бастамас бұрын, VPC дайындау керек.
Ол үшін іздеу жолағына VPC деп енгізуді бастайық және нәтижесінде қажет сервиске өтейік.
AWS VPC сервисінің негізгі парақшасын ашқаннан кейін Create VPC батырмасын басу керек.
Мұнда VPC ғана емес, сонымен қатар оған байланысты ресурстарды жасайтынымызды көрсетеміз: subnets, root tables және т.б.
CIDR block көрсетуіміз керек.
Онда 10.0.0.0/24 деп жазайық.
Бұл CIDR block 256 IP мекенжайынан тұрады.
Аздап төмен айналдырыңыз.
Availability zone санын 1 деп белгілейік, бұл біздің Демо үшін жеткілікті.
Әрі қарай, жалпы және жеке subnets санын бір-бірден көрсетеміз.
Бұл да зертханалық жұмысымызды орындауға жеткілікті.
NAT Gateways пен VPC endpoints мәндеріне None деп көрсетейік.
Парақшаның төменгі жағында Create VPC батырмасын басыңыз.
Барлық қажетті ресурстарды құру күйі бар парақшаға бағытталамыз.
Ол аяқталғаннан кейін статусты көресіз, бұл ресурстарға сілтемелер де қолжетімді болады.
Енді View VPC батырмасын басуымыз керек.
Біз VPC негізгі парақшасына бағытталамыз.
Енді басқа ресурстар тұрғысынан барлығы дұрыс жасалғанын тексерейік.
Бізді subnets, атап айтқанда, public subnet қызықтырады.
Сондықтан сол жақ шарлау мәзірінде Subnets қойындысын басу керек.
Оған ауысқаннан кейін AWS аккаунтында бар subnets тізімін көреміз.
Бізде subnet-public1 бар екенін көресіз.
Бұл жаңадан жасалған VPC-де орналасқан subnet.
Жақсы. Желілік тұрғыдан қажеттінің бәрін дайындадық.
Енді EC2 инстансын жасауға көшейік.
Ол үшін сервис іздеу жолағына EC2 деп енгізуді бастау керек және нәтижелердегі сәйкес сервисті басу керек.
EC2 сервисінің негізгі парақшасына өткеннен кейін, инстансты құруға көшеміз.
Сондықтан, Launch Instance батырмасын басыңыз, ашылмалы тізім ашылады.
Тағы да Launch Instance опциясын таңдауымыз керек, ол кейбір кіріс деректерін енгізу үшін бөлек парақшаға бағыттайды.
Сізден бірінші сұралатын нәрсе - Name көрсету.
Ол сондай-ақ атау кілті және біз енгізетін мәнмен тегте қайталанады.
Мен Демо тақырыбы бойынша demo-ec2-user-data деп енгіземін.
Операциялық жүйе ретінде Amazon Linux таңдаймын және AMI ретінде Amazon Linux 2 таңдаймын.
Аздап төмен айналдырыңыз.
Мұнда Instance Type таңдау керек.
Мен t2.micro таңдаймын.
Бұл - Free Tier аясында қолжетімді инстанс түрі.
Демоны өзіңіз жасасаңыз, оны таңдауға, пайдалануға, содан кейін оны тегін өшіруге мүмкіндік аласыз.
Келесі бөлімде Key Pair таңдау керек.
Егер сіз оны жасамаған болсаңыз, оны жасайық.
Еске саламын, Key Pair - бұл SSH арқылы қашықтан веб-серверлеріңізге, виртуалды серверлеріңізге қауіпсіз қосылуға көмектесетін арнайы жеке кілт.
Бұл парақшада Key Pair Name көрсету керек.
Мұнда мен сізге түсінікті болатын атау жазуды ұсынамын.
Бұл атау EC2 инстансы парақшасында SSH арқылы қосылу үшін қажетті Key Pair ретінде көрсетіледі.
Сонымен қатар, бұл файлдың атын осыдан кейін өзгертуді ұсынбаймын, себебі сіз шатасып кетуіңіз мүмкін.
Содан кейін оны анықтау қиын болады.
Төменде жеке кілт форматын таңдауға болады.
Бізге .ppk қажет, өйткені біз қосылу үшін PuTTY программасын пайдаланамыз.
Барлық қажетті деректерді енгізгеннен кейін Create Key Pair батырмасын басайық.
Оны басқаннан кейін файлды сақтау ұсынылады.
Бұл - біз бұрын жазған аты бар .ppk файлы.
Оны жергілікті түрде сақтай аласыз.
Енді келесі бөлімге көшеміз.
Бұл бөлім Network-ке қатысты.
Мұнда кейбір өзгертулер енгізу үшін Edit батырмасын басу керек.
VPC ретінде біз жасаған VPC таңдау керек.
Бұл VPC жасау кезінде бұрын біз тіркеген CIDR block.
Осыдан кейін біз Public болып табылатын Subnet таңдауымыз керек.
Private Subnet те жасағанымызды ұмытпаңыз.
Ал біз қажетін, яғни Public дегенді таңдауымыз керек.
Auto-assign Public IP пунктінде Enable параметрін көрсету керек.
Бұл VPC ішінде жасалған барлық инстанстар жалпыға ортақ IP мекенжайына автоматты түрде байланыстырылуы үшін қажет.
Дәл төменде Create Security Group опциясын таңдауымыз керек, өйткені біз әлі Security Group құрған жоқпыз және оны дәл осы жерде жасау мүмкіндігіміз бар.
Security Group-тың кез келген сипаттамасын және атын енгізуге болады.
Мен әдепкі мәнді қалдырып, сәл төмен түсемін.
Мұнда Inbound Security Group Rules көрсетуге болады, яғни бұл инстансқа қосылу үшін қандай порт пен протоколды пайдалануға болатынын сипаттайтын ережелер.
SSH түрін таңдау керек, қалған өрістер автоматты түрде толтырылады, Source Type ретінде Anywhere деп көрсетеміз, яғни кілт бар болса, кез келген компьютерден интернет арқылы қосыла аламыз.
Егер жергілікті компьютерден немесе корпоративтік желіден қосылсақ және оның CIDR блогын білсек, қосылымды одан әрі қорғау үшін оны осында енгізуге болады.
Сәл төмен айналдырыңыз, мұнда Add Security Group Rule батырмасын екі рет басу керек және 80 портына, бұл HTTP порты және 443 - HTTPS қауіпсіз қосылымына кіруді ашу керек.
Біздің жағдайда бұл қажет емес, өйткені оның жұмыс істеуі үшін сертификаттарды баптау қажет.
Бұл зертханалық жұмыс аясынан тыс, бірақ оны орындау қаншалықты оңай екенін көре аласыз.
Біраз төмен айналдырайық, Storage ретінде не ұсынылатынын көрсетеміз, бұл 8 ГБ General Purpose SSD дискілері, біздің тапсырмамыз үшін жеткілікті.
Төменгі жағында Advanced Details деген соңғы бөлім бар, оны кеңейтіп, ең төменгі жағына қарай өтейік.
Мұнда User data деп аталатын қосымша өріс бар екенін көресіз, бұл бізге қажет.
Осы Демоның аясында веб-серверді іске қосу, сынақ парақшасын жасау және оған Интернет арқылы кіріп көру үшін арнайы Bash Script дайындадық.
Әр жолды талдап көрейік.
Біріншісі - Shebang, ақпаратты және келесі пәрмендердің қай тілде болатынын жариялау идеясы.
Біздің жағдайда, Bash Script.
Екінші жол - ол осы серверде бар барлық бағдарламалық құралды жаңартады.
Үшінші жол - веб-сервер компонентін орнату үшін yum пайдаланады.
httpd – қарапайым веб-сервер.
Төртінші жол - httpd-ді автоматты қосу үшін systemctl командасын пайдаланады.
Содан кейін systemctl start httpd веб-серверімізді іске қосады.
Ең соңғы жол - ол бір жолға сыймады, бірақ ол толығымен бір жолда болуы керек.
Идея мынада, біз мәтінді қарапайым html парақшасынан index.html файлына жазамыз, ол келесі жолда орналасқан: /var/www/html/index.html.
Осы командалардың барлығын енгізгеннен кейін инстансты жасауға дайынбыз, сондықтан экранның оң жағындағы Launch Instance батырмасын басу керек.
Оны басқаннан кейін ресурстарымыздың жасалу егжей-тегжейлерін көреміз.
Ол аяқтала салысымен, сәйкес жасыл хабарландыру пайда болады және барлық EC2 инстанстарының тізімі бар парақшаға өту үшін бөлек батырма болады.
Оны басып, өтейік.
Осы AWS аккаунтында біз жасаған бір инстансты көреміз.
Сіз оның күйі Initializing екенін көресіз, яғни ол енді ғана жасалып жатыр және әлі пайдалануға дайын емес.
Парақшаның жоғарғы жағындағы Refresh батырмасын басу керек немесе F5 батырмасы арқылы бүкіл парақшаны жаңарту керек.
Біраз уақыттан кейін біз стандартты күйді тексеруден өткенімізді көреміз, екінің екеуін өттік, бәрі жақсы және инстанс жұмысқа дайын.
Енді осы инстанс туралы біраз ақпарат алуымыз керек.
Мұны істеу үшін оны тізімнен таңдау керек, экранның төменгі жағында бөлек парақша көрсетіледі және ол жерде жалпыға қолжетімді IPv4 мекенжайын көресіз.
Оны көшіріп алайық, ол кейін керек болады.
Интернетте Демо парақшасын ашпас бұрын серверге SSH арқылы қашықтан қосылып көрейік және барлық параметрлер сәтті қолданылғанына көз жеткізейік.
Ол үшін PuTTY бағдарламасын ашамыз.
Ол сол жақ шарлау мәзірінде ашылғаннан кейін, Credentials қойындысын ашу керек.
Мұны істегеннен кейін үш өрісі бар парақша ашылады.
Бізді біріншісі қызықтырады; мұнда сіз .ppk файлыңызға жолды көрсетуіңіз керек.
Ыңғайлы болу үшін Browse... батырмасын басуға болады және қажетті папкаға өтіңіз.
Жолды көрсеткеннен кейін, біз PuTTY бағдарламасының негізгі парақшасына орала аламыз, атап айтқанда сол жақ шарлау мәзірінде Session қойындысын басыңыз, сіз келесі терезені көресіз.
Пайдаланудың қарапайымдылығы үшін біз енді қосылымды сақтауымыз керек.
Біздің жағдайда біз .ppk файл параметріне жолды сақтаймыз, осылайша оны әр уақыт көрсетудің қажеті болмайды.
Saved Sessions өрісінде сізге ыңғайлы кез келген мәнді енгізейік, менің жағдайымда бұл c1oud_academy және Save батырмасын басыңыз.
Төмендегі тізімде сіз көрсеткен атпен байланыс пайда болғанын көресіз.
Енді бағдарламаны жауып, қайта ашсаңыз, қосылымыңыз тізімде сақталғанын көресіз.
Ал енді осы қосылымды таңдау керек, Load батырмасын басу керек, барлық параметрлер жүктеледі, соның ішінде .ppk файлының жолы, оны өзіңіз тексере аласыз.
Әрі қарай, Host Name немесе IP мекенжайы өрісінде серверіміздің IP мекенжайын көрсету керек, бұл жалпыға ортақ IP мекенжайы, содан кейін Open батырмасын басыңыз.
Парақша ашылады, серверге кіретін пайдаланушыны көрсетуіңіз керек, біздің жағдайда бұл ec2-user, бұл AWS ішіндегі Linux EC2 инстанстарының стандартты пайдаланушылары.
Оны енгізген бойда сізге рұқсат беріледі, сәлемдесу хабарын көресіз және командаларды енгізуге болатын prompt көресіз.
Systemctl status httpd командасын енгізейік, оны енгізген бойда көлемді хабарламаны көресіз, бірақ бұл сервис белсенді екендігі жасыл түспен белгіленеді.
Керемет, бәрі дұрыс жұмыс істеп тұрғанына көз жеткізу үшін тағы бірнеше команда енгізейік.
/var/www/html мекенжайында орналасқан файлдар тізімін көрсетейік.
Бір файл көрсетілуі керек, бұл біздің index.html, енді сол жолды пайдаланып файлдың мазмұнын көрсетсек, біз бұрын User Data енгізген мәтінді көруіміз керек.
Егер солай болса, онда барлық параметрлер орындалып, дұрыс қолданылған.
Мен сізді құттықтаймын, енді браузерге өтіп, серверіміздің IP мекенжайын енгізе аламыз.
Сіз бұрын енгізген хабарламаны көресіз.
Hello from C1oud Academy demo session.
Жақсы, құттықтаймын, сіз User Data функционалдық мүмкіндіктерімен көбірек таныс болдыңыз, жаңа EC2 инстансын құру процесін және кейбір нюанстарын қайталадық.
EC2 сервисін, атап айтқанда, User Data функционалдығын жақсырақ түсіндіңіз деп үміттенемін.
Назарларыңызға рахмет, келесі белсенділіктерімізде кездескенше!
