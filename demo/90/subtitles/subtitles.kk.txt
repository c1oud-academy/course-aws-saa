Қайырлы күн, құрметті студенттер! Сізді келесі Демо сессияда көргеніме қуаныштымын. Бүгінгі Демоның тақырыбы - Amazon RDS сервисінің автоматты сақтық көшірмелері мен read replica функционалдығын талдау. Ендеше, бастайық. Біз бұл Демоны AWS Management Console негізгі парақшасынан бастаймыз. Енді сервистерді іздеу жолағын пайдаланып, RDS деп енгізуді бастаймыз. Бірінші сілтеме - бізге қажет сілтеме. Amazon RDS сервисінің негізгі парақшасына өткенде, RDS инстансын жасау үшін екі түрлі батырма бар. Олардың кез келгенін баса аламыз. Инстансты жасау үшін кіріс деректері бар парақшаға қайта бағытталамыз. Standard Create опциясын таңдап, қозғалтқыш ретінде MySQL-ді таңдайық. Содан кейін MySQL Community таңдау мүмкіндігі бар. Бұл жағдайда ол жалғыз мүмкін нұсқа. Басқа қозғалтқыштар үшін бірнеше нұсқа болуы мүмкін. Қалған опцияларды әдепкі ретінде қалдырамыз. Template ретінде 12 ай бойы Free Tier ішінде осы инстансты жасау үшін Free Tier-ді таңдаймыз. Availability мен Durability жолында бірден опция орнатылып, қолжетімсіз болады. Біз Multi-AZ опциясынсыз жалғыз инстансты жасаймыз. DB instance identifier ретінде c1oud-academy-demo-rds көрсетейік. Қалған кіріс деректерін әдепкі ретінде қалдырамыз. Құпия сөз adminadmin болады. Демодан кейін бұл инстансты жоямыз, сондықтан кез келген құпия сөзді пайдалануға болады. Инстанс түрі ретінде Burstable classes таңдаймыз. Ол әдепкі бойынша таңдалады және t3.micro түрі де таңдалады. Бұл - Free Tier-дегі қолжетімді инстанстың түрі. Демо мақсаттары үшін бұл жеткілікті. Storage үшін әдепкі бойынша 200 ГБ енгізіледі. Бірақ 200 ГБ өте көп. Сондықтан Демоның мақсаттары үшін 20 ГБ көрсету жеткілікті. Бұл - ең төменгі мән. Барлық басқа мәндерді әдепкі бойынша қалдырамыз. VPC ретінде алдыңғы Демода жасалған VPC таңдаймыз. Security group ретінде бұрыннан бар әдепкі топты таңдаңыз. Әрі қарай, Availability zone ретінде VPC іске қосылған zone таңдауыңыз керек. Біздің жағдайда бұл us-east-1a. Барлық қалған мәндерді әдепкі бойынша қалдырамыз. Дерекқор инстансы тезірек жасалу үшін, Enhanced monitoring бөлімі үшін құсбелгіні алып тастау керек. Бұл функцияны Демо аясында қарастырмаймыз, сондықтан оны өшіре аламыз. Ең төменгі жағына қарай жылжып, осы жерден осы инстанстың шамамен құны туралы ақпаратты көреміз. Бірақ бұл параметр Free Tier-ге жататындықтан, мұнда нақты ештеңе айтылмаған. Free Tier-ге қосылмаған инстансты жасаған жағдайда, сізде дерекқор инстансы үшін бөлек бөлу және storage үшін бөлек бөлу болады. Сіз нақты дерекқор инстансы үшін айына төленетін жалпы соманы көресіз. Жақсы, барлық қажетті параметрлерді енгіздік. Енді дерекқорды құру процесін бастау үшін Create Database батырмасын басу керек. Бұл біраз уақытты алады, екі-үш минут. Дерекқорлар тізімі бар парақшада Refresh батырмасын басып, парақшаны жаңарту қажет. Біраз уақыттан кейін күй Available күйіне өзгереді және осы инстанстың негізгі парақшасын ашу және дерекқорымыздың мәліметтерін көру үшін дерекқордың атын баса аламыз. Дерекқорымыздың негізгі парақшасына кіргеннен кейін осы жерден кез келген қажетті ақпаратты таба аламыз. Ең жоғарғы жағында ең негізгі ақпарат көрсетіледі, бұл біздің дерекқорымыздың атауы. Біздің жағдайда бұл c1oud-academy-demo-rds. Әрі қарай, Role ретінде бұл Instance екенін көреміз. Бірнеше инстанс орнатылып, бірге жұмыс істейтін Cluster опциясы да бар. Сондай-ақ, CPU-ге жүктемені көреміз. Қосылым санын көреміз, қазір ешқандай қосылым жоқ, сондықтан 0 connections деп жазылады. Status - Available. Қозғалтқыш туралы ақпаратты көреміз, бұл MySQL Community. Class - db.t3.micro және дерекқор орналасқан Available zone туралы ақпарат. Біздің жағдайда бұл us-east-1a. Төменде бірнеше қойындылар, топтастырылған ақпарат бар. Біріншісі - Connectivity and Security. Мұнда Endpoint and Port туралы ақпаратты көресіз, оның көмегімен дерекқорымызға қосыла аламыз. Мұны зертханалық жұмысымыздың бір бөлігі ретінде жасаймыз. Әрі қарай Networking туралы ақпарат бар. Бұл - ол қай VPC-де, қай Subnet-ке жатады. Қауіпсіздік туралы ақпарат. Security group-ке сілтеме бар. Сондай-ақ, бұл дерекқордың жалпыға қолжетімді немесе қолжетімді еместігін бөлек көреміз және т.б. Екінші Monitoring қойындысын ашсақ, бізде dashboard бар алтыдан астам парақша бар екенін көреміз. Әрбір dashboard белгілі бір көрсеткішті көрсетеді. Алғашқы екеуін қарастырайық. Бұл - CPU Utilization, яғни біздің процессорларға қандай жүктеме түседі. Сіз бұл дерекқордың жақында жасалғанын және ол қосылған кезде, дерекқорды орнату кезінде процессорға жүктеме болғанын көресіз. Бұл дерекқор еш жерде пайдаланылмағандықтан, оған түсетін жүктеме ең аз, 5%-дан аз. Қосылымдар санын қарасаңыз, іске қосылғаннан бері қосылымдар болған жоқ және көрсеткіш қазіргі уақытта осы дерекқорға 0 қосылым бар екенін көрсетеді. Үшінші қойынды - Logs and Events. Мұнда біз CloudWatch alarm баптай аламыз. Сондай-ақ, Recent events бөлімін көресіз. Бұл - дерекқор инстансында орын алған барлық оқиғалар. Оның қашан болғанын, қандай оқиға болғанын көресіз. Біз оның орнатылғанын, инстанстың жасалғанын және біздің инстанстың автоматты түрде сақтық көшірмесі жасалғанын көреміз. Сақтық көшірме сәтті жасалған оқиғалар да бар. Төменде журналдар бөлімі бар. Барлық уақытқа тіркелген журналдар осында сақталады. Және сізді қызықтыратын кез келген күн үшін журналдарды жүктеп алуға болады. Журналдардың әртүрлі түрлері бар. Олар туралы сәл кейінірек айтатын боламыз. Кез келген журнал файлын таңдауға, оны AWS Management Console осы жерден қарауға немесе жүктеп алуға мүмкіндігіңіз бар. Келесі қойынды - Configuration. Мұнда аппараттық құрал, қозғалтқыш туралы ақпаратты көреміз. Негізгілерінің ішінде сіз қозғалтқыштың 8.0.28 нұсқасын көресіз. Сондай-ақ, бізде көшіруге болатын ARN бар екенін көруге болады. Дерекқор қашан құрылғаны туралы ақпарат. Сондай-ақ, бізде t3.micro инстанс түрі туралы ақпаратты көреміз. Процессор ядроларының саны – 2. Оперативтік жады көлемі - 1 ГБ. Сондай-ақ, негізгі пайдаланушы admin деп аталатын ақпаратты көреміз. Multi-AZ функциясы қосылмаған. Шифрлау қосылған. RDS сервисі үшін AWS KMS key қолданамыз. Біздің storage 20 гигабайтты General Purpose SSD болып табылады. Яғни, барлық қажетті ақпаратты AWS Management Console табуға болады. Келесі қойынды - Maintenance and Backups. Мұнда жеке Maintenance бөлімі бар екенін көреміз, ол қосылған. Онда белгілі бір уақыт аралығын көрсетуге, кестені көрсетуге болады. Осы уақыт ішінде AWS дерекқор жаңартуларын, қауіпсіздік патчтарын және т.б. дербес орнатады. Бұл дерекқордың minor нұсқасына ғана қатысты. Егер major нұсқасы туралы айтатын болсақ, онда бұл өте үлкен жаңарту, оны бөлек жасау керек. Мұнда дерекқорлардың minor нұсқаларын жаңарту туралы ғана ақпарат берілген. Сондай-ақ, келесі Pending maintenance бөлімінде ешқандай жазбаларды көрмейміз. Бұл қазіргі уақытта MySQL қозғалтқышының соңғы нұсқасын пайдаланып жатқанымызды білдіреді. Келесі бөлім - Backup and snapshots. Backup бөлімінде сақтық көшірме жасалуының қосылған- қосылмағаны туралы ақпарат бар. Сондай-ақ, сақтық көшірмелердің қашан және қаншалықты жиі болатыны туралы ақпарат. Ал Snapshots бөлімінде автоматты түрде қолмен жасалған барлық суреттерді көре аламыз. Енді бізде дерекқор жасалған кезде жасалған бір ғана сурет бар, оған кез келген уақытта орала аламыз. Кейбір параметрлерді, соның ішінде сақтық көшірме жасау кестесінің параметрлерін өзгерту қажет болса, мұны парақшаның жоғарғы оң жақ бөлігіндегі Modify батырмасын пайдаланып жасауға болады. Дерекқорды жасау кезінде бұрын енгізген парақшаға ұқсас парақша ашылады. Ал сақтық көшірмелер болған жағдайда, тиісті бөлімге кіріп, сізге қажетті енгізу деректерін енгізуіңіз керек. Мұнда сақтық көшірмелерді жасау жиілігін көрсете алатынымызды көресіз. Қазіргі уақытта бұл 7, яғни әрбір 7 күн сайын сақтық көшірме жасаймыз. Сондай-ақ, сақтық көшірмелерді жасауға болатын бапталған уақыт терезесі бар екенін көреміз. Сақтық көшірме жасау дерекқорларды тоқтатуды қажет етпейді, бірақ жасау кезінде дерекқор жұмысы біраз баяулауы мүмкін. Яғни, сақтық көшірмелерді жасау да аппараттық құралға жүктеме түсіреді және ең жоғары жүктеме кезінде уақыт терезесін орнату ұсынылмайды. Мұнда басталу уақытын, сонымен қатар уақыт терезесінің ұзақтығын таңдай аласыз. Өзгерістерді енгізгеннен кейін, тиісті Summary of modifications бөлімінде қандай өзгерістер болғаны туралы барлық мәліметтерді көресіз. Сақтық көшірме параметрлерін өзгерту мысалын пайдалана отырып, біз Backup window ағымдағы мәннен жаңа мәнге өзгергенін көреміз. Және бұл өзгерістерді қолданудың екі нұсқасы бар. Бірінші нұсқа - қозғалтқыш жаңартуының minor нұсқаларын орнатуға болатын келесі maintenance window күту немесе production ортасында қажетсіз болуы мүмкін, бірақ уақыт жоғалтпау үшін dev ортасына мүмкін болатын Apply immediately опциясын пайдалану. Өзгерістерді дереу қолданатын болсақ, маңызды ештеңе болмайтынын білетіндіктен, Apply immediately опциясын пайдаланып, Modify DB Instance батырмасын басуға болады. Бүгінгі Демоның екінші бөлігіне көшеміз және read replica жасаймыз. Мұны істеу үшін жоғарғы оң жақ бөліктегі Actions батырмасын басып, ашылмалы тізімнен Create read replica опциясын таңдаңыз. Кіріс деректерді енгізу үшін сондай парақшаға бағытталамыз, тек бірінші бөлім басқаша. Мұнда негізгі дерекқорды таңдау керек, сонымен қатар read replica болып табылатын дерекқор инстансының атын енгізу керек. Барлық басқа параметрлер негізгі деректер базасымен бірдей, қажет болған жағдайда өзгертулер енгізуге болады. Ең соңында Create read replica батырмасы пайда болады, оны басуымыз керек және read replica инстансын жасау басталады. Сондай-ақ, негізгі дерекқордың күйі Modifying күйіне өзгергенін көресіз, өйткені ол қазірдің өзінде кластерге айналуда, кластерде екі инстанс бар, біреуі - Primary, екіншісі - Replica. Сондай-ақ, Role бағанында олардың сәйкес белгіленгенін көруге болады. Біраз уақыттан кейін екі инстанс та Available болады, енді әрбір дерекқорды кезекпен таңдап, кейбір мәліметтерді көрейік. Егер негізгі дерекқорды таңдасаңыз, онда Endpoint өзгерген жоқ, өзгеріссіз қалады, оны оқу және жазу әрекеттері үшін пайдалануға болады. Егер аздап төмен айналдырсаңыз, екі инстансы бар, негізгі және replica болатын бөлек Replication бөлімі бар. Сондай-ақ, репликаға арналған Replication state бағаны Replicating деп көрсететінін, яғни ол белсендірілгенін және репликация да белсендірілгенін көруге болады. Егер біз Instance read replica таңдасақ, онда Endpoint бөлімінде URL мекенжайы басқаша екенін көреміз, сондықтан оны оқу әрекеттеріңіз үшін пайдалана аласыз. Жүктеме read replica-ға түседі және осылайша негізгі дерекқорды босатуға болады. Осымен бүгінгі сессиямызды аяқтаймыз. Сіз Amazon RDS сервисі қалай жұмыс істейтінін жақсырақ түсіндіңіз деп үміттенемін. Назарларыңызға рахмет, келесі белсенділіктерде кездескенше!